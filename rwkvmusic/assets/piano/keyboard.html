<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Piano</title>
  <style>
    html,
    body {
      margin: 0;
      font-family: "Noto Serif", serif;
    }

    body {
      position: absolute;
      top: 0px;
      bottom: 0px;
      left: 0px;
      right: 0px;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #000000;
    }

    .container {
      border-bottom: 1px solid #ffffff99;
      box-shadow: -1px -1px 0.5px 0px #ffffff99 inset;
      border-radius: 9px;
      margin: 0;
      top: 0px;
      bottom: 0px;
      left: 0px;
      right: 0px;
      width: 100%;
      height: calc(100% - 1px);
      position: absolute;
      display: flex;
      justify-content: space-between;
    }

    #keyboard {
      border: 5px solid #212121;
      border-radius: 9px;
      background: #212121;
      margin: 0;
      top: 0px;
      bottom: 0px;
      left: 0px;
      right: 0px;
      width: calc(100% - 10px);
      height: calc(100% - 10px);
      position: absolute;
      display: flex;
      justify-content: space-between;
    }

    .svg-container {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
    }

    * {
      overflow: hidden;
      user-select: none;
    }

    :root {
      --keyboard: hsl(300, 100%, 16%);
      --keyboard-shadow: hsla(19, 50%, 66%, 0.2);
      --keyboard-border: hsl(20, 91%, 5%);
      --black-10: hsla(0, 0%, 0%, 0.1);
      --black-20: hsla(0, 0%, 0%, 0.2);
      --black-30: hsla(0, 0%, 0%, 0.3);
      --black-50: hsla(0, 0%, 0%, 0.5);
      --black-60: hsla(0, 0%, 0%, 0.6);
      --white-20: hsla(0, 0%, 100%, 0.2);
      --white-50: hsla(0, 0%, 100%, 0.5);
      --white-80: hsla(0, 0%, 100%, 0.8);
    }

    .white,
    .black {
      /* height: 100%;
        width: 100%; */
      position: relative;
      float: left;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      user-select: none;
      cursor: pointer;
      font-size: 0.6rem;
    }

    .white {
      height: 100%;
      width: 100%;
      background-image: url("data:image/svg+xml,%3Csvg width='40' height='204' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cmask id='mask0_33_189' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='0' y='0' width='40' height='204'%3E%3Cpath d='M0.666667 0.666667H39.3333V199.2C39.3333 200.051 39.3328 200.649 39.2947 201.116C39.2572 201.575 39.1866 201.848 39.079 202.059C38.8553 202.498 38.4983 202.855 38.0593 203.079C37.8481 203.187 37.5751 203.257 37.1161 203.295C36.6493 203.333 36.0511 203.333 35.2 203.333H4.8C3.94892 203.333 3.35071 203.333 2.88389 203.295C2.42486 203.257 2.15191 203.187 1.94069 203.079C1.50165 202.855 1.14469 202.498 0.920984 202.059C0.813361 201.848 0.742829 201.575 0.705325 201.116C0.667185 200.649 0.666667 200.051 0.666667 199.2V0.666667Z' fill='url(%23paint0_linear_33_189)' stroke='url(%23paint1_linear_33_189)' stroke-width='1.33333'/%3E%3C/mask%3E%3Cg mask='url(%23mask0_33_189)'%3E%3Cpath d='M0 0H40V199.2C40 200.88 40 201.72 39.673 202.362C39.3854 202.926 38.9265 203.385 38.362 203.673C37.7202 204 36.8802 204 35.2 204H4.8C3.11984 204 2.27976 204 1.63803 203.673C1.07354 203.385 0.614601 202.926 0.32698 202.362C0 201.72 0 200.88 0 199.2V0Z' fill='%23D9D9D9'/%3E%3Cg filter='url(%23filter0_f_33_189)'%3E%3Cpath d='M0 -2H40V197.2C40 198.88 40 199.72 39.673 200.362C39.3854 200.926 38.9265 201.385 38.362 201.673C37.7202 202 36.8802 202 35.2 202H4.8C3.11984 202 2.27976 202 1.63803 201.673C1.07354 201.385 0.614601 200.926 0.32698 200.362C0 199.72 0 198.88 0 197.2V-2Z' fill='url(%23paint2_linear_33_189)'/%3E%3Cpath d='M0.666667 -1.33333H39.3333V197.2C39.3333 198.051 39.3328 198.649 39.2947 199.116C39.2572 199.575 39.1866 199.848 39.079 200.059C38.8553 200.498 38.4984 200.855 38.0593 201.079C37.8481 201.187 37.5751 201.257 37.1161 201.295C36.6493 201.333 36.0511 201.333 35.2 201.333H4.8C3.94892 201.333 3.35071 201.333 2.88389 201.295C2.42486 201.257 2.15191 201.187 1.94069 201.079C1.50164 200.855 1.14469 200.498 0.920988 200.059C0.813362 199.848 0.742829 199.575 0.705325 199.116C0.667185 198.649 0.666667 198.051 0.666667 197.2V-1.33333Z' stroke='url(%23paint3_linear_33_189)' stroke-width='1.33333'/%3E%3C/g%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_f_33_189' x='-1.33333' y='-3.33333' width='42.6667' height='206.667' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur stdDeviation='0.666667' result='effect1_foregroundBlur_33_189'/%3E%3C/filter%3E%3ClinearGradient id='paint0_linear_33_189' x1='20' y1='0' x2='20' y2='204' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%238F8F8F'/%3E%3Cstop offset='0.312675' stop-color='%23F6F6F6'/%3E%3Cstop offset='1' stop-color='%23F7F7F7'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint1_linear_33_189' x1='20' y1='0' x2='20' y2='204' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%236C6C6C'/%3E%3Cstop offset='1' stop-color='white'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint2_linear_33_189' x1='20' y1='-2' x2='20' y2='202' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%238F8F8F'/%3E%3Cstop offset='0.312675' stop-color='%23F6F6F6'/%3E%3Cstop offset='1' stop-color='%23F5F5F5'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint3_linear_33_189' x1='20' y1='-2' x2='20' y2='202' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%236C6C6C'/%3E%3Cstop offset='1' stop-color='white'/%3E%3C/linearGradient%3E%3C/defs%3E%3C/svg%3E%0A");
      background-size: 100% 100%;
      /* 图片填满整个div，可能会导致失真 */
      background-repeat: no-repeat;
      /* 防止图片重复 */
      background-position: center;
      /* 图片居中 */
      /* margin-left: 1px;
        margin-right: 1px; */
    }

    .black {
      position: absolute;
      /* width: 10px; */
      height: 62%;
      z-index: 2;
      /* border: 1px solid black; */
      border-radius: 0 0 3px 3px;
      /* background: url("./style-assets/black-key.svg"); */
      background-image: url("data:image/svg+xml,%3Csvg width='36' height='137' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M36 1.46547e-05L36 133.42C36.0001 133.6 36.0003 133.856 35.9811 134.088C35.9581 134.365 35.8959 134.808 35.6512 135.28C35.3444 135.873 34.8548 136.355 34.2527 136.657C33.7724 136.898 33.3227 136.959 33.0408 136.981C32.8057 137 32.5459 137 32.3623 137H3.63771C3.4541 137 3.19426 137 2.95916 136.981C2.67734 136.959 2.22756 136.898 1.74727 136.657C1.14515 136.355 0.655616 135.873 0.348822 135.28C0.104104 134.808 0.0419389 134.365 0.0189134 134.088C-0.000295279 133.856 -0.000109026 133.6 2.28668e-05 133.42C0.0137484 90.1399 2.28668e-05 2.81706e-05 2.28668e-05 2.81706e-05C6.99942 -2.60262e-05 36 1.46547e-05 36 1.46547e-05ZM2.48723 2.79199C2.40004 2.96041 2.40004 3.18089 2.40004 3.62185V133.378C2.40004 133.819 2.40004 134.04 2.48723 134.208C2.56393 134.356 2.68631 134.477 2.83684 134.552C3.00797 134.638 3.23199 134.638 3.68004 134.638H32.32C32.768 134.638 32.992 134.638 33.1632 134.552C33.3137 134.477 33.4361 134.356 33.5128 134.208C33.6 134.04 33.6 133.819 33.6 133.378V3.62185C33.6 3.18089 33.6 2.96041 33.5128 2.79199C33.4361 2.64384 33.3137 2.52339 33.1632 2.4479C32.992 2.36208 32.768 2.36208 32.32 2.36208H3.68003C3.23199 2.36208 3.00797 2.36208 2.83684 2.4479C2.68631 2.52339 2.56393 2.64384 2.48723 2.79199Z' fill='%231F1F1F'/%3E%3Cpath d='M2.40039 3.62312C2.40039 3.1817 2.40039 2.96099 2.4863 2.79239C2.56186 2.64408 2.68244 2.52351 2.83074 2.44794C2.99934 2.36204 3.22005 2.36204 3.66147 2.36204H32.3392C32.7807 2.36204 33.0014 2.36204 33.17 2.44794C33.3183 2.52351 33.4388 2.64408 33.5144 2.79239C33.6003 2.96099 33.6003 3.1817 33.6003 3.62312V133.377C33.6003 133.818 33.6003 134.039 33.5144 134.207C33.4388 134.356 33.3183 134.476 33.17 134.552C33.0014 134.638 32.7807 134.638 32.3392 134.638H3.66147C3.22005 134.638 2.99934 134.638 2.83074 134.552C2.68244 134.476 2.56186 134.356 2.4863 134.207C2.40039 134.039 2.40039 133.818 2.40039 133.377V3.62312Z' fill='url(%23paint0_linear_131_2)'/%3E%3Cg filter='url(%23filter0_f_131_2)'%3E%3Cpath d='M4.3999 125.741V108.065C4.3999 111.151 5.1999 112.734 5.81026 113.913C6.34715 114.95 7.20384 115.793 8.25755 116.322C9.45545 116.922 11.0236 116.922 14.1599 116.922C11.0236 116.922 9.45545 116.922 8.25755 117.523C7.20384 118.052 6.34715 118.895 5.81026 119.932C5.1999 121.111 4.3999 122.654 4.3999 125.741Z' fill='%23AAAAAA'/%3E%3C/g%3E%3Cg filter='url(%23filter1_f_131_2)'%3E%3Cpath d='M30.1895 113.913C30.7998 112.734 31.5998 111.151 31.5998 108.065V125.741C31.5998 122.654 30.7998 121.111 30.1895 119.932C29.6526 118.895 28.7959 118.052 27.7422 117.523C26.5443 116.922 24.9761 116.922 21.8398 116.922C24.9761 116.922 26.5443 116.922 27.7422 116.322C28.7959 115.793 29.6526 114.95 30.1895 113.913Z' fill='%23545550'/%3E%3C/g%3E%3Cpath d='M5.81046 120.308C6.34735 119.141 7.20403 118.193 8.25774 117.598C9.45564 116.922 11.0238 116.922 14.1601 116.922H21.8401C24.9763 116.922 26.5445 116.922 27.7424 117.598C28.7961 118.193 29.6528 119.141 30.1897 120.308C31.8994 124.023 31.5332 130.415 32.4 134.638H3.6001C4.46693 130.415 4.10075 124.023 5.81046 120.308Z' fill='url(%23paint1_linear_131_2)'/%3E%3Cpath d='M4.7998 2.36204H31.1997V108.095C31.1997 111.185 31.1997 112.73 30.5984 113.91C30.0694 114.948 29.2254 115.792 28.1873 116.321C27.0071 116.922 25.4621 116.922 22.3722 116.922H13.6274C10.5374 116.922 8.99247 116.922 7.81227 116.321C6.77414 115.792 5.9301 114.948 5.40115 113.91C4.7998 112.73 4.7998 111.185 4.7998 108.095V2.36204Z' fill='url(%23paint2_linear_131_2)'/%3E%3Cg filter='url(%23filter2_f_131_2)'%3E%3Cpath d='M4.7998 2.36204H31.1997V108.095C31.1997 111.185 31.1997 112.73 30.5984 113.91C30.0694 114.948 29.2254 115.792 28.1873 116.321C27.0071 116.922 25.4621 116.922 22.3722 116.922H13.6274C10.5374 116.922 8.99247 116.922 7.81227 116.321C6.77414 115.792 5.9301 114.948 5.40115 113.91C4.7998 112.73 4.7998 111.185 4.7998 108.095V2.36204Z' stroke='url(%23paint3_linear_131_2)' stroke-width='0.551724'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_f_131_2' x='3.61172' y='107.276' width='11.3361' height='19.2526' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur stdDeviation='0.394089' result='effect1_foregroundBlur_131_2'/%3E%3C/filter%3E%3Cfilter id='filter1_f_131_2' x='21.0517' y='107.276' width='11.3361' height='19.2526' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur stdDeviation='0.394089' result='effect1_foregroundBlur_131_2'/%3E%3C/filter%3E%3Cfilter id='filter2_f_131_2' x='4.28747' y='1.84972' width='27.4246' height='115.585' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur stdDeviation='0.118227' result='effect1_foregroundBlur_131_2'/%3E%3C/filter%3E%3ClinearGradient id='paint0_linear_131_2' x1='18.0004' y1='2.36204' x2='18.0004' y2='134.638' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23222222'/%3E%3Cstop offset='0.027231' stop-color='%23383838'/%3E%3Cstop offset='0.149892' stop-color='%235D5D5D'/%3E%3Cstop offset='0.523165' stop-color='%23A2A2A2'/%3E%3Cstop offset='1' stop-color='%23545454'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint1_linear_131_2' x1='18.0001' y1='116.922' x2='18.0001' y2='134.638' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%234A4A4A'/%3E%3Cstop offset='1' stop-color='%237B7B7B'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint2_linear_131_2' x1='17.9998' y1='2.36204' x2='17.9998' y2='116.922' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23111111'/%3E%3Cstop offset='0.521751' stop-color='%2348494C'/%3E%3Cstop offset='1' stop-color='%23242426'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint3_linear_131_2' x1='17.9998' y1='2.36204' x2='17.9998' y2='116.922' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-opacity='0.29'/%3E%3Cstop offset='1'/%3E%3C/linearGradient%3E%3C/defs%3E%3C/svg%3E%0A");
      background-size: 100% 100%;
      /* 图片填满整个div，可能会导致失真 */
      background-repeat: no-repeat;
      /* 防止图片重复 */
      background-position: center;
      /* 图片居中 */
    }

    .white.pressed {
      /* border-top: 1px solid hsl(0, 0%, 47%);
        border-left: 1px solid hsl(0, 0%, 60%);
        border-bottom: 1px solid hsl(0, 0%, 60%);
        box-shadow: 2px 0 3px var(--black-10) inset,
          -5px 5px 20px var(--black-20) inset, 0 0 3px var(--black-20);
        background: linear-gradient(to bottom, white 0%, hsl(0, 0%, 91%) 100%);
        outline: none; */

      height: 99%;
      width: 100%;
      background-image: url("data:image/svg+xml,%3Csvg width='38' height='198' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cmask id='mask0_33_144' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='0' y='0' width='38' height='198'%3E%3Cpath d='M0.666667 0.666667H37.3333V193.2C37.3333 194.051 37.3328 194.649 37.2947 195.116C37.2572 195.575 37.1866 195.848 37.079 196.059C36.8553 196.498 36.4984 196.855 36.0593 197.079C35.8481 197.187 35.5751 197.257 35.1161 197.295C34.6493 197.333 34.0511 197.333 33.2 197.333H4.8C3.94892 197.333 3.35071 197.333 2.88389 197.295C2.42486 197.257 2.15191 197.187 1.94069 197.079C1.50164 196.855 1.14469 196.498 0.920984 196.059C0.813362 195.848 0.742829 195.575 0.705325 195.116C0.667185 194.649 0.666667 194.051 0.666667 193.2V0.666667Z' fill='url(%23paint0_linear_33_144)' stroke='url(%23paint1_linear_33_144)' stroke-width='1.33333'/%3E%3C/mask%3E%3Cg mask='url(%23mask0_33_144)'%3E%3Cpath d='M-1 0H39V193.2C39 194.88 39 195.72 38.673 196.362C38.3854 196.926 37.9265 197.385 37.362 197.673C36.7202 198 35.8802 198 34.2 198H3.8C2.11984 198 1.27976 198 0.638029 197.673C0.0735422 197.385 -0.385399 196.926 -0.67302 196.362C-1 195.72 -1 194.88 -1 193.2V0Z' fill='%23D9D9D9'/%3E%3Cg filter='url(%23filter0_f_33_144)'%3E%3Cpath d='M-1 -1.33333H39V161.867C39 163.547 39 164.387 38.673 165.029C38.3854 165.593 37.9265 166.052 37.362 166.34C36.7202 166.667 35.8802 166.667 34.2 166.667H3.8C2.11984 166.667 1.27976 166.667 0.638029 166.34C0.0735422 166.052 -0.385399 165.593 -0.67302 165.029C-1 164.387 -1 163.547 -1 161.867V-1.33333Z' fill='url(%23paint2_linear_33_144)'/%3E%3Cpath d='M-0.333333 -0.666662H38.3333V161.867C38.3333 162.718 38.3328 163.316 38.2947 163.783C38.2572 164.242 38.1866 164.515 38.079 164.726C37.8553 165.165 37.4984 165.522 37.0593 165.746C36.8481 165.853 36.5751 165.924 36.1161 165.961C35.6493 165.999 35.0511 166 34.2 166H3.8C2.94892 166 2.35071 165.999 1.88389 165.961C1.42486 165.924 1.15191 165.853 0.940689 165.746C0.501649 165.522 0.144692 165.165 -0.0790157 164.726C-0.186639 164.515 -0.257171 164.242 -0.294675 163.783C-0.332815 163.316 -0.333333 162.718 -0.333333 161.867V-0.666662Z' stroke='url(%23paint3_linear_33_144)' stroke-width='1.33333'/%3E%3C/g%3E%3Cg filter='url(%23filter1_f_33_144)'%3E%3Cpath d='M-1 0H39V193.2C39 194.88 39 195.72 38.673 196.362C38.3854 196.926 37.9265 197.385 37.362 197.673C36.7202 198 35.8802 198 34.2 198H3.8C2.11984 198 1.27976 198 0.638029 197.673C0.0735422 197.385 -0.385399 196.926 -0.67302 196.362C-1 195.72 -1 194.88 -1 193.2V0Z' fill='url(%23paint4_linear_33_144)'/%3E%3Cpath d='M-1 0H39V193.2C39 194.88 39 195.72 38.673 196.362C38.3854 196.926 37.9265 197.385 37.362 197.673C36.7202 198 35.8802 198 34.2 198H3.8C2.11984 198 1.27976 198 0.638029 197.673C0.0735422 197.385 -0.385399 196.926 -0.67302 196.362C-1 195.72 -1 194.88 -1 193.2V0Z' fill='url(%23paint5_linear_33_144)' fill-opacity='0.2'/%3E%3Cpath d='M-0.333333 0.666667H38.3333V193.2C38.3333 194.051 38.3328 194.649 38.2947 195.116C38.2572 195.575 38.1866 195.848 38.079 196.059C37.8553 196.498 37.4984 196.855 37.0593 197.079C36.8481 197.187 36.5751 197.257 36.1161 197.295C35.6493 197.333 35.0511 197.333 34.2 197.333H3.8C2.94892 197.333 2.35071 197.333 1.88389 197.295C1.42486 197.257 1.15191 197.187 0.940689 197.079C0.501642 196.855 0.144688 196.498 -0.0790157 196.059C-0.186638 195.848 -0.257171 195.575 -0.294675 195.116C-0.332815 194.649 -0.333333 194.051 -0.333333 193.2V0.666667Z' stroke='url(%23paint6_linear_33_144)' stroke-width='1.33333'/%3E%3C/g%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_f_33_144' x='-2.33333' y='-2.66666' width='42.6667' height='170.667' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur stdDeviation='0.666667' result='effect1_foregroundBlur_33_144'/%3E%3C/filter%3E%3Cfilter id='filter1_f_33_144' x='-2.33333' y='-1.33333' width='42.6667' height='200.667' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur stdDeviation='0.666667' result='effect1_foregroundBlur_33_144'/%3E%3C/filter%3E%3ClinearGradient id='paint0_linear_33_144' x1='19' y1='0' x2='19' y2='202.829' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%238F8F8F'/%3E%3Cstop offset='0.312675' stop-color='%23F6F6F6'/%3E%3Cstop offset='1' stop-color='%23F7F7F7'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint1_linear_33_144' x1='19' y1='0' x2='19' y2='202.829' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%236C6C6C'/%3E%3Cstop offset='1' stop-color='white'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint2_linear_33_144' x1='19' y1='-1.33333' x2='19' y2='166.667' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%238F8F8F'/%3E%3Cstop offset='0.312675' stop-color='%23F6F6F6'/%3E%3Cstop offset='1' stop-color='%23F5F5F5'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint3_linear_33_144' x1='19' y1='-1.33333' x2='19' y2='166.667' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%236C6C6C'/%3E%3Cstop offset='1' stop-color='white'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint4_linear_33_144' x1='19' y1='0' x2='19' y2='198' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0.00202319' stop-color='%230D0D0D'/%3E%3Cstop offset='0.0430758' stop-color='%233D3D3D'/%3E%3Cstop offset='0.420274' stop-color='%23B6B6B6'/%3E%3Cstop offset='1' stop-color='%23E0E0E0'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint5_linear_33_144' x1='19' y1='119.625' x2='-1' y2='119.625' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-opacity='0'/%3E%3Cstop offset='1'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint6_linear_33_144' x1='19' y1='0' x2='19' y2='198' gradientUnits='userSpaceOnUse'%3E%3Cstop/%3E%3Cstop offset='1' stop-color='white'/%3E%3C/linearGradient%3E%3C/defs%3E%3C/svg%3E%0A");
      background-size: 100% 100%;
      /* 图片填满整个div，可能会导致失真 */
      background-repeat: no-repeat;
      /* 防止图片重复 */
      background-position: center;
      /* 图片居中 */
    }

    .black.pressed {
      background-image: url("data:image/svg+xml,%3Csvg width='36' height='137' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M36 1.46547e-05L36 133.42C36.0001 133.6 36.0003 133.856 35.9811 134.088C35.9581 134.365 35.8959 134.808 35.6512 135.28C35.3444 135.873 34.8548 136.355 34.2527 136.657C33.7724 136.898 33.3227 136.959 33.0408 136.981C32.8057 137 32.5459 137 32.3623 137H3.63771C3.4541 137 3.19426 137 2.95916 136.981C2.67734 136.959 2.22756 136.898 1.74727 136.657C1.14515 136.355 0.655616 135.873 0.348822 135.28C0.104104 134.808 0.0419389 134.365 0.0189134 134.088C-0.00029528 133.856 -0.000109026 133.6 2.28668e-05 133.42C0.0137484 90.1399 2.28668e-05 2.81706e-05 2.28668e-05 2.81706e-05C6.99942 -2.60262e-05 36 1.46547e-05 36 1.46547e-05ZM2.48723 2.79199C2.40004 2.96041 2.40004 3.18089 2.40004 3.62185V128.378C2.40004 128.819 2.40004 129.04 2.48723 129.208C2.56393 129.356 2.68631 129.477 2.83684 129.552C3.00797 129.638 3.23199 129.638 3.68004 129.638H32.32C32.768 129.638 32.992 129.638 33.1632 129.552C33.3137 129.477 33.4361 129.356 33.5128 129.208C33.6 129.04 33.6 128.819 33.6 128.378V3.62185C33.6 3.18089 33.6 2.96041 33.5128 2.79199C33.4361 2.64384 33.3137 2.52339 33.1632 2.4479C32.992 2.36208 32.768 2.36208 32.32 2.36208H3.68003C3.23199 2.36208 3.00797 2.36208 2.83684 2.4479C2.68631 2.52339 2.56393 2.64384 2.48723 2.79199Z' fill='%231F1F1F'/%3E%3Cpath d='M2 3.26109C2 2.81966 2 2.59895 2.08591 2.43035C2.16147 2.28205 2.28205 2.16147 2.43035 2.08591C2.59895 2 2.81966 2 3.26108 2H32.7389C33.1803 2 33.401 2 33.5696 2.08591C33.718 2.16147 33.8385 2.28205 33.9141 2.43035C34 2.59895 34 2.81966 34 3.26108V128.739C34 129.18 34 129.401 33.9141 129.57C33.8385 129.718 33.718 129.839 33.5696 129.914C33.401 130 33.1803 130 32.7389 130H3.26108C2.81966 130 2.59895 130 2.43035 129.914C2.28205 129.839 2.16147 129.718 2.08591 129.57C2 129.401 2 129.18 2 128.739V3.26109Z' fill='url(%23paint0_linear_128_1380)'/%3E%3Cg filter='url(%23filter0_f_128_1380)'%3E%3Cpath d='M4 130V117C4 119.27 4.81967 120.434 5.44504 121.301C5.99514 122.064 6.87289 122.684 7.95251 123.073C9.17988 123.514 10.7866 123.514 14 123.514C10.7866 123.514 9.17988 123.515 7.95251 123.956C6.87289 124.345 5.99514 124.965 5.44504 125.728C4.81967 126.595 4 127.73 4 130Z' fill='%23AAAAAA'/%3E%3C/g%3E%3Cg filter='url(%23filter1_f_128_1380)'%3E%3Cpath d='M30.555 121.301C31.1803 120.434 32 119.27 32 117V130C32 127.73 31.1803 126.595 30.555 125.728C30.0049 124.965 29.1271 124.345 28.0475 123.956C26.8201 123.515 25.2134 123.514 22 123.514C25.2134 123.514 26.8201 123.514 28.0475 123.073C29.1271 122.684 30.0049 122.064 30.555 121.301Z' fill='%23545550'/%3E%3C/g%3E%3Cpath d='M6.14896 125.147C6.67094 124.751 7.50384 124.43 8.52827 124.229C9.6929 124 11.2175 124 14.2667 124H21.7333C24.7825 124 26.3071 124 27.4717 124.229C28.4962 124.43 29.3291 124.751 29.851 125.147C31.5133 126.405 31.1572 128.57 32 130H4C4.84276 128.57 4.48674 126.405 6.14896 125.147Z' fill='url(%23paint1_linear_128_1380)'/%3E%3Cpath d='M5 2H31V114.172C31 117.262 31 118.807 30.3987 119.988C29.8697 121.026 29.0257 121.87 27.9875 122.399C26.8073 123 25.2624 123 22.1724 123H13.8276C10.7376 123 9.19267 123 8.01247 122.399C6.97433 121.87 6.1303 121.026 5.60134 119.988C5 118.807 5 117.262 5 114.172V2Z' fill='url(%23paint2_linear_128_1380)'/%3E%3Cg filter='url(%23filter2_f_128_1380)'%3E%3Cpath d='M5 2H31V114.172C31 117.262 31 118.807 30.3987 119.988C29.8697 121.026 29.0257 121.87 27.9875 122.399C26.8073 123 25.2624 123 22.1724 123H13.8276C10.7376 123 9.19267 123 8.01247 122.399C6.97433 121.87 6.1303 121.026 5.60134 119.988C5 118.807 5 117.262 5 114.172V2Z' stroke='url(%23paint3_linear_128_1380)' stroke-width='0.551724'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_f_128_1380' x='3.21182' y='116.212' width='11.5764' height='14.5764' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur stdDeviation='0.394089' result='effect1_foregroundBlur_128_1380'/%3E%3C/filter%3E%3Cfilter id='filter1_f_128_1380' x='21.2118' y='116.212' width='11.5764' height='14.5764' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur stdDeviation='0.394089' result='effect1_foregroundBlur_128_1380'/%3E%3C/filter%3E%3Cfilter id='filter2_f_128_1380' x='4.48767' y='1.48768' width='27.0247' height='122.025' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='BackgroundImageFix' result='shape'/%3E%3CfeGaussianBlur stdDeviation='0.118227' result='effect1_foregroundBlur_128_1380'/%3E%3C/filter%3E%3ClinearGradient id='paint0_linear_128_1380' x1='18' y1='2' x2='18' y2='130' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23222222'/%3E%3Cstop offset='0.027231' stop-color='%232D2D2D'/%3E%3Cstop offset='0.149892' stop-color='%231F1F1F'/%3E%3Cstop offset='0.523165' stop-color='%23565656'/%3E%3Cstop offset='1' stop-color='%23333333'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint1_linear_128_1380' x1='18' y1='124' x2='18' y2='130' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23333333'/%3E%3Cstop offset='1' stop-color='%23373737'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint2_linear_128_1380' x1='18' y1='2' x2='18' y2='128' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-color='%23929198'/%3E%3Cstop offset='0.577152' stop-color='%23303135'/%3E%3Cstop offset='1' stop-color='%23515255'/%3E%3C/linearGradient%3E%3ClinearGradient id='paint3_linear_128_1380' x1='18' y1='2' x2='18' y2='128' gradientUnits='userSpaceOnUse'%3E%3Cstop stop-opacity='0.29'/%3E%3Cstop offset='1'/%3E%3C/linearGradient%3E%3C/defs%3E%3C/svg%3E%0A");
      background-size: 100% 100%;
      /* 图片填满整个div，可能会导致失真 */
      background-repeat: no-repeat;
      /* 防止图片重复 */
      background-position: center;
      /* 图片居中 */
      outline: none;
    }

    .offset {
      margin: 0 0 0 -1rem;
    }
  </style>
</head>

<body>
  <div class="container">
    <div id="keyboard">
      <!-- 生成88个黑白钢琴键 -->
    </div>
  </div>
  <script>
    // JavaScript 代码用于动态创建钢琴键盘
    window.setPiano = function (start, end) {
      const existElements = document.querySelectorAll(".key");
      if (existElements?.length) {
        existElements.forEach((element) => {
          element.removeEventListener("touchstart", handleMouseDown);
          element.removeEventListener("touchend", handleMouseUp);
          element.removeEventListener("touchcancel", handleMouseUp);
          element.remove();
        });
      }
      if (start < 21 || end > 108) {
        alert("please set number between 21 and 108");
        return;
      }
      const piano = document.querySelector("#keyboard");
      const blackKeyArray = [1, 3, 6, 8, 10]; // 黑键的键位
      // 定义起始和结束键位
      let startNote = start; // 21对应A0音符，根据需要修改
      let endNote = end; // 108对应C8音符，根据需要修改
      // 这里是兼容情况，如果起始和结束键位是黑键，则向前或向后移动一位
      if (blackKeyArray.includes(startNote % 12)) {
        startNote = startNote - 1;
      }
      if (blackKeyArray.includes(endNote % 12)) {
        endNote = endNote + 1;
      }
      let whiteCount = 0;
      for (let i = startNote; i <= endNote; i++) {
        if (!blackKeyArray.includes(i % 12)) {
          whiteCount = whiteCount + 1;
        }
      }
      const everyWhiteKeyWidth = 100 / whiteCount;

      console.log(whiteCount);

      let prevWhiteKeyCount = 0;
      for (let i = startNote; i <= endNote; i++) {
        midiKey = i;

        const key = document.createElement("div");

        key.classList.add("key");

        if (blackKeyArray.includes(i % 12)) {
          key.classList.add("black");
          const keyWidth = everyWhiteKeyWidth * (2 / 3);
          key.style.width = `${keyWidth}%`;
          // 根据白色键的位置计算黑色键的位置
          key.style.left = `calc(${prevWhiteKeyCount * everyWhiteKeyWidth - keyWidth / 2
            }% - 0.5px)`;
        } else {
          key.classList.add("white");

          prevWhiteKeyCount = prevWhiteKeyCount + 1;

          const renderMidiKey = midiKey - 20;
          const whichGroup = parseInt(renderMidiKey / 12);
          const currentNum = renderMidiKey % 12;

          // 每七个白键为一组，分别为ABCDEFG，这里要展示C键和第几组
          if (currentNum === 4) {
            key.innerText = `C${whichGroup + 1}`;
          }
        }
        key.setAttribute("data-midiKey", midiKey);
        piano.appendChild(key);
      }
      // 计算所有白色键的宽度，1px是因为有
      const allWhiteKeys = document.querySelectorAll(".white");
      // allWhiteKeys.forEach((key) => {
      //   key.style.width = `calc(${everyWhiteKeyWidth}% - 1px)`;
      // });

      // 设置白色键的margin
      // allWhiteKeys.forEach((key) => {
      //   const marginLeft = (everyWhiteKeyWidth * 0.026).toFixed(2);
      //   const marginRight = (everyWhiteKeyWidth * 0.026).toFixed(2);
      //   key.style.marginLeft = `calc(${marginLeft}% )`;
      //   key.style.marginRight = `calc(${marginRight}% )`;
      // });

      // set white key margin from range 1px to 0.5px.
      // white keys number is from 1 to 80
      // 1 keys is 1px, 80 keys is 0.5px
      allWhiteKeys.forEach((key) => {
        var totalWhiteKeys = end - start;
        console.log("totalWhiteKeys", totalWhiteKeys);
        if (totalWhiteKeys > 40) {
          key.style.marginLeft = `.5px`;
          key.style.marginRight = `.5px`;
        } else {
          key.style.marginLeft = `1px`;
          key.style.marginRight = `1px`;
        }
      });

      // 开始键盘监听逻辑
      const keyElements = document.querySelectorAll(".key");
      console.log(keyElements.length);
      // 坚挺多个事件
      keyElements.forEach((element) => {
        element.addEventListener("touchstart", handleMouseDown);
        element.addEventListener("touchend", handleMouseUp);
        element.addEventListener("touchcancel", handleMouseUp);
        element.addEventListener("mousedown", handleMouseDown); // 添加mousedown事件
        element.addEventListener("mouseup", handleMouseUp);
      });

      function handleMouseDown(event) {
        event.preventDefault();
        event.stopPropagation();
        const midiKey = event.target.getAttribute("data-midiKey");
        if (!midiKey) return;
        const key = document.querySelector(`.key[data-midiKey="${midiKey}"]`);
        key.classList.add("pressed");
        console.log("mousedown midiKey: ", midiKey);
        // 由这里调用安卓程序
        flutteronNoteOn.postMessage(midiKey);
        // if (typeof controller !== "undefined") {
        //   controller.onNoteOn(parseInt(midiKey));
        // } else {
        //   alert("Running outside Android app down");
        // }
      }

      function handleMouseUp(e) {
        event.preventDefault();
        event.stopPropagation();
        const keyElements = document.querySelectorAll(`.key`);
        const midiKey = event.target.getAttribute("data-midiKey");

        keyElements.forEach((element) => {
          element.classList.remove("pressed");
        });

        // 由这里调用安卓程序

        flutteronNoteOff.postMessage(midiKey);
        // if (typeof controller !== "undefined") {
        //   controller.onNoteOff(parseInt(midiKey));
        // } else {
        //   alert("Running outside Android app up");
        // }
      }
    };
    setPiano(21, 108);
  </script>
</body>

</html>