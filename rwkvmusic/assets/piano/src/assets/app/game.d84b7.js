!function(e){"use strict";var t,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}
/*! *****************************************************************************
	Copyright (C) Microsoft. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */!function(e){!function(t){var r="object"==typeof n?n:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=o(e);function o(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:i=o(r.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!o&&!a,c={create:o?function(){return ie(Object.create(null))}:a?function(){return ie({__proto__:null})}:function(){return ie({})},has:s?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:s?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?te():Map,d=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?ne():Set,p=l||"function"!=typeof WeakMap?re():WeakMap,h=new p;function v(e,t,n,r){if(M(n)){if(!W(e))throw new TypeError;if(!q(t))throw new TypeError;return j(e,t)}if(!W(e))throw new TypeError;if(!V(t))throw new TypeError;if(!V(r)&&!M(r)&&!z(r))throw new TypeError;return z(r)&&(r=void 0),A(e,t,n=B(n),r)}function y(e,t){function n(n,r){if(!V(n))throw new TypeError;if(!M(r)&&!G(r))throw new TypeError;N(e,t,n,r)}return n}function g(e,t,n,r){if(!V(n))throw new TypeError;return M(r)||(r=B(r)),N(e,t,n,r)}function m(e,t,n){if(!V(t))throw new TypeError;return M(n)||(n=B(n)),E(e,t,n)}function b(e,t,n){if(!V(t))throw new TypeError;return M(n)||(n=B(n)),T(e,t,n)}function w(e,t,n){if(!V(t))throw new TypeError;return M(n)||(n=B(n)),C(e,t,n)}function _(e,t,n){if(!V(t))throw new TypeError;return M(n)||(n=B(n)),P(e,t,n)}function x(e,t){if(!V(e))throw new TypeError;return M(t)||(t=B(t)),I(e,t)}function k(e,t){if(!V(e))throw new TypeError;return M(t)||(t=B(t)),R(e,t)}function O(e,t,n){if(!V(t))throw new TypeError;M(n)||(n=B(n));var r=S(t,n,!1);if(M(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=h.get(t);return i.delete(n),i.size>0||h.delete(t),!0}function j(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!M(r)&&!z(r)){if(!q(r))throw new TypeError;t=r}}return t}function A(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!M(o)&&!z(o)){if(!V(o))throw new TypeError;r=o}}return r}function S(e,t,n){var r=h.get(e);if(M(r)){if(!n)return;r=new f,h.set(e,r)}var i=r.get(t);if(M(i)){if(!n)return;i=new f,r.set(t,i)}return i}function E(e,t,n){if(T(e,t,n))return!0;var r=ee(t);return!z(r)&&E(e,r,n)}function T(e,t,n){var r=S(t,n,!1);return!M(r)&&$(r.has(e))}function C(e,t,n){if(T(e,t,n))return P(e,t,n);var r=ee(t);return z(r)?void 0:C(e,r,n)}function P(e,t,n){var r=S(t,n,!1);if(!M(r))return r.get(e)}function N(e,t,n,r){S(n,r,!0).set(e,t)}function I(e,t){var n=R(e,t),r=ee(e);if(null===r)return n;var i=I(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new d,a=[],s=0,c=n;s<c.length;s++){var u=c[s];o.has(u)||(o.add(u),a.push(u))}for(var l=0,f=i;l<f.length;l++){u=f[l];o.has(u)||(o.add(u),a.push(u))}return a}function R(e,t){var n=[],r=S(e,t,!1);if(M(r))return n;for(var i=H(r.keys()),o=0;;){var a=X(i);if(!a)return n.length=o,n;var s=J(a);try{n[o]=s}catch(e){try{Q(i)}finally{throw e}}o++}}function D(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function M(e){return void 0===e}function z(e){return null===e}function Z(e){return"symbol"==typeof e}function V(e){return"object"==typeof e?null!==e:"function"==typeof e}function F(e,t){switch(D(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=Y(e,r);if(void 0!==i){var o=i.call(e,n);if(V(o))throw new TypeError;return o}return L(e,"default"===n?"number":n)}function L(e,t){if("string"===t){var n=e.toString;if(K(n))if(!V(i=n.call(e)))return i;if(K(r=e.valueOf))if(!V(i=r.call(e)))return i}else{var r;if(K(r=e.valueOf))if(!V(i=r.call(e)))return i;var i,o=e.toString;if(K(o))if(!V(i=o.call(e)))return i}throw new TypeError}function $(e){return!!e}function U(e){return""+e}function B(e){var t=F(e,3);return Z(t)?t:U(t)}function W(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function K(e){return"function"==typeof e}function q(e){return"function"==typeof e}function G(e){switch(D(e)){case 3:case 4:return!0;default:return!1}}function Y(e,t){var n=e[t];if(null!=n){if(!K(n))throw new TypeError;return n}}function H(e){var t=Y(e,i);if(!K(t))throw new TypeError;var n=t.call(e);if(!V(n))throw new TypeError;return n}function J(e){return e.value}function X(e){var t=e.next();return!t.done&&t}function Q(e){var t=e.return;t&&t.call(e)}function ee(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function te(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function a(e,t){return[e,t]}}function ne(){return function(){function e(){this._map=new f}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}()}function re(){var e=16,n=c.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+u()}while(c.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function u(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function ie(e){return e.__=void 0,delete e.__,e}e("decorate",v),e("metadata",y),e("defineMetadata",g),e("hasMetadata",m),e("hasOwnMetadata",b),e("getMetadata",w),e("getOwnMetadata",_),e("getMetadataKeys",x),e("getOwnMetadataKeys",k),e("deleteMetadata",O)}(i)}()}(t||(t={}));var i="object"==typeof n&&n&&n.Object===Object&&n,o=i,a="object"==typeof self&&self&&self.Object===Object&&self,s=o||a||Function("return this")(),c=s.Symbol,u=c,l=Object.prototype,f=l.hasOwnProperty,d=l.toString,p=u?u.toStringTag:void 0;var h=function(e){var t=f.call(e,p),n=e[p];try{e[p]=void 0;var r=!0}catch(e){}var i=d.call(e);return r&&(t?e[p]=n:delete e[p]),i},v=Object.prototype.toString;var y=h,g=function(e){return v.call(e)},m=c?c.toStringTag:void 0;var b=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":m&&m in Object(e)?y(e):g(e)};var w=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},_=b,x=w;var k,O=function(e){if(!x(e))return!1;var t=_(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},j=s["__core-js_shared__"],A=(k=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"";var S=function(e){return!!A&&A in e},E=Function.prototype.toString;var T=function(e){if(null!=e){try{return E.call(e)}catch(e){}try{return e+""}catch(e){}}return""},C=O,P=S,N=w,I=T,R=/^\[object .+?Constructor\]$/,D=Function.prototype,M=Object.prototype,z=D.toString,Z=M.hasOwnProperty,V=RegExp("^"+z.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var F=function(e){return!(!N(e)||P(e))&&(C(e)?V:R).test(I(e))},L=function(e,t){return null==e?void 0:e[t]};var $=function(e,t){var n=L(e,t);return F(n)?n:void 0},U=$,B=function(){try{var e=U(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),W=B;var K=function(e,t,n){"__proto__"==t&&W?W(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var q=function(e,t){return e===t||e!=e&&t!=t},G=K,Y=q,H=Object.prototype.hasOwnProperty;var J=function(e,t,n){var r=e[t];H.call(e,t)&&Y(r,n)&&(void 0!==n||t in e)||G(e,t,n)},X=J,Q=K;var ee=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?Q(n,s,c):X(n,s,c)}return n};var te=function(e){return e};var ne=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},re=ne,ie=Math.max;var oe=function(e,t,n){return t=ie(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=ie(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),re(e,this,s)}};var ae=function(e){return function(){return e}},se=B,ce=se?function(e,t){return se(e,"toString",{configurable:!0,enumerable:!1,value:ae(t),writable:!0})}:te,ue=Date.now;var le=function(e){var t=0,n=0;return function(){var r=ue(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},fe=le(ce),de=te,pe=oe,he=fe;var ve=function(e,t){return he(pe(e,t,de),e+"")};var ye=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ge=O,me=ye;var be=function(e){return null!=e&&me(e.length)&&!ge(e)},we=/^(?:0|[1-9]\d*)$/;var _e=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t},xe=q,ke=be,Oe=_e,je=w;var Ae=function(e,t,n){if(!je(n))return!1;var r=typeof t;return!!("number"==r?ke(n)&&Oe(t,n.length):"string"==r&&t in n)&&xe(n[t],e)},Se=ve,Ee=Ae;var Te=function(e){return Se((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Ee(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))},Ce=Object.prototype;var Pe=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ce)};var Ne=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var Ie=function(e){return null!=e&&"object"==typeof e},Re=b,De=Ie;var Me=function(e){return De(e)&&"[object Arguments]"==Re(e)},ze=Ie,Ze=Object.prototype,Ve=Ze.hasOwnProperty,Fe=Ze.propertyIsEnumerable,Le=Me(function(){return arguments}())?Me:function(e){return ze(e)&&Ve.call(e,"callee")&&!Fe.call(e,"callee")},$e=Le,Ue=Array.isArray,Be=r(Ue),We={exports:{}};var Ke=function(){return!1};!function(e,t){var n=s,r=Ke,i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,c=(a?a.isBuffer:void 0)||r;e.exports=c}(We,We.exports);var qe=We.exports,Ge=b,Ye=ye,He=Ie,Je={};Je["[object Float32Array]"]=Je["[object Float64Array]"]=Je["[object Int8Array]"]=Je["[object Int16Array]"]=Je["[object Int32Array]"]=Je["[object Uint8Array]"]=Je["[object Uint8ClampedArray]"]=Je["[object Uint16Array]"]=Je["[object Uint32Array]"]=!0,Je["[object Arguments]"]=Je["[object Array]"]=Je["[object ArrayBuffer]"]=Je["[object Boolean]"]=Je["[object DataView]"]=Je["[object Date]"]=Je["[object Error]"]=Je["[object Function]"]=Je["[object Map]"]=Je["[object Number]"]=Je["[object Object]"]=Je["[object RegExp]"]=Je["[object Set]"]=Je["[object String]"]=Je["[object WeakMap]"]=!1;var Xe=function(e){return He(e)&&Ye(e.length)&&!!Je[Ge(e)]};var Qe=function(e){return function(t){return e(t)}},et={exports:{}};!function(e,t){var n=i,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,a=o&&o.exports===r&&n.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}(et,et.exports);var tt=et.exports,nt=Xe,rt=Qe,it=tt&&tt.isTypedArray,ot=it?rt(it):nt,at=Ne,st=$e,ct=Ue,ut=qe,lt=_e,ft=ot,dt=Object.prototype.hasOwnProperty;var pt=function(e,t){var n=ct(e),r=!n&&st(e),i=!n&&!r&&ut(e),o=!n&&!r&&!i&&ft(e),a=n||r||i||o,s=a?at(e.length,String):[],c=s.length;for(var u in e)!t&&!dt.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||lt(u,c))||s.push(u);return s};var ht=function(e,t){return function(n){return e(t(n))}},vt=ht(Object.keys,Object),yt=Pe,gt=vt,mt=Object.prototype.hasOwnProperty;var bt=function(e){if(!yt(e))return gt(e);var t=[];for(var n in Object(e))mt.call(e,n)&&"constructor"!=n&&t.push(n);return t},wt=pt,_t=bt,xt=be;var kt=function(e){return xt(e)?wt(e):_t(e)},Ot=J,jt=ee,At=Te,St=be,Et=Pe,Tt=kt,Ct=Object.prototype.hasOwnProperty,Pt=r(At((function(e,t){if(Et(t)||St(t))jt(t,Tt(t),e);else for(var n in t)Ct.call(t,n)&&Ot(e,n,t[n])})));var Nt=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},It=b,Rt=Ie;var Dt=function(e){return"symbol"==typeof e||Rt(e)&&"[object Symbol]"==It(e)},Mt=Nt,zt=Ue,Zt=Dt,Vt=c?c.prototype:void 0,Ft=Vt?Vt.toString:void 0;var Lt=function e(t){if("string"==typeof t)return t;if(zt(t))return Mt(t,e)+"";if(Zt(t))return Ft?Ft.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},$t=Lt;var Ut=function(e){return null==e?"":$t(e)},Bt=r(Ut);var Wt=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o},Kt=Wt;var qt=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Kt(e,t,n)},Gt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Yt=function(e){return Gt.test(e)};var Ht=function(e){return e.split("")},Jt="\\ud800-\\udfff",Xt="["+Jt+"]",Qt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",en="\\ud83c[\\udffb-\\udfff]",tn="[^"+Jt+"]",nn="(?:\\ud83c[\\udde6-\\uddff]){2}",rn="[\\ud800-\\udbff][\\udc00-\\udfff]",on="(?:"+Qt+"|"+en+")"+"?",an="[\\ufe0e\\ufe0f]?",sn=an+on+("(?:\\u200d(?:"+[tn,nn,rn].join("|")+")"+an+on+")*"),cn="(?:"+[tn+Qt+"?",Qt,nn,rn,Xt].join("|")+")",un=RegExp(en+"(?="+en+")|"+cn+sn,"g");var ln=Ht,fn=Yt,dn=function(e){return e.match(un)||[]};var pn=function(e){return fn(e)?dn(e):ln(e)},hn=qt,vn=Yt,yn=pn,gn=Ut;var mn=function(e){return function(t){t=gn(t);var n=vn(t)?yn(t):void 0,r=n?n[0]:t.charAt(0),i=n?hn(n,1).join(""):t.slice(1);return r[e]()+i}},bn=mn("toUpperCase"),wn=r(bn),_n=Ut,xn=bn;var kn=r((function(e){return xn(_n(e).toLowerCase())})),On=Ue;var jn=function(){if(!arguments.length)return[];var e=arguments[0];return On(e)?e:[e]},An=r(jn),Sn=/\s/;var En=function(e){for(var t=e.length;t--&&Sn.test(e.charAt(t)););return t},Tn=/^\s+/;var Cn=function(e){return e?e.slice(0,En(e)+1).replace(Tn,""):e},Pn=Cn,Nn=w,In=Dt,Rn=/^[-+]0x[0-9a-f]+$/i,Dn=/^0b[01]+$/i,Mn=/^0o[0-7]+$/i,zn=parseInt;var Zn=function(e){if("number"==typeof e)return e;if(In(e))return NaN;if(Nn(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Nn(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Pn(e);var n=Dn.test(e);return n||Mn.test(e)?zn(e.slice(2),n?2:8):Rn.test(e)?NaN:+e},Vn=r(Zn),Fn=Zn,Ln=1/0;var $n=function(e){return e?(e=Fn(e))===Ln||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},Un=$n;var Bn=function(e){var t=Un(e),n=t%1;return t==t?n?t-n:t:0},Wn=r(Bn),Kn=Wt,qn=Ae,Gn=Bn,Yn=Math.ceil,Hn=Math.max;var Jn=function(e,t,n){t=(n?qn(e,t,n):void 0===t)?1:Hn(Gn(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Array(Yn(r/t));i<r;)a[o++]=Kn(e,i,i+=t);return a},Xn=r(Jn);var Qn=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},er=Qn,tr=Zn;var nr=r((function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=tr(n))==n?n:0),void 0!==t&&(t=(t=tr(t))==t?t:0),er(tr(e),t,n)}));var rr=function(){this.__data__=[],this.size=0},ir=q;var or=function(e,t){for(var n=e.length;n--;)if(ir(e[n][0],t))return n;return-1},ar=or,sr=Array.prototype.splice;var cr=function(e){var t=this.__data__,n=ar(t,e);return!(n<0)&&(n==t.length-1?t.pop():sr.call(t,n,1),--this.size,!0)},ur=or;var lr=function(e){var t=this.__data__,n=ur(t,e);return n<0?void 0:t[n][1]},fr=or;var dr=or;var pr=function(e,t){var n=this.__data__,r=dr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},hr=rr,vr=cr,yr=lr,gr=function(e){return fr(this.__data__,e)>-1},mr=pr;function br(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}br.prototype.clear=hr,br.prototype.delete=vr,br.prototype.get=yr,br.prototype.has=gr,br.prototype.set=mr;var wr=br,_r=wr;var xr=function(){this.__data__=new _r,this.size=0};var kr=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var Or=function(e){return this.__data__.get(e)};var jr=function(e){return this.__data__.has(e)},Ar=$(s,"Map"),Sr=$(Object,"create"),Er=Sr;var Tr=function(){this.__data__=Er?Er(null):{},this.size=0};var Cr=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Pr=Sr,Nr=Object.prototype.hasOwnProperty;var Ir=function(e){var t=this.__data__;if(Pr){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Nr.call(t,e)?t[e]:void 0},Rr=Sr,Dr=Object.prototype.hasOwnProperty;var Mr=function(e){var t=this.__data__;return Rr?void 0!==t[e]:Dr.call(t,e)},zr=Sr;var Zr=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zr&&void 0===t?"__lodash_hash_undefined__":t,this},Vr=Tr,Fr=Cr,Lr=Ir,$r=Mr,Ur=Zr;function Br(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Br.prototype.clear=Vr,Br.prototype.delete=Fr,Br.prototype.get=Lr,Br.prototype.has=$r,Br.prototype.set=Ur;var Wr=Br,Kr=wr,qr=Ar;var Gr=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},Yr=Gr;var Hr=function(e,t){var n=e.__data__;return Yr(t)?n["string"==typeof t?"string":"hash"]:n.map},Jr=Hr;var Xr=Hr;var Qr=Hr;var ei=Hr;var ti=function(e,t){var n=ei(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ni=function(){this.size=0,this.__data__={hash:new Wr,map:new(qr||Kr),string:new Wr}},ri=function(e){var t=Jr(this,e).delete(e);return this.size-=t?1:0,t},ii=function(e){return Xr(this,e).get(e)},oi=function(e){return Qr(this,e).has(e)},ai=ti;function si(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}si.prototype.clear=ni,si.prototype.delete=ri,si.prototype.get=ii,si.prototype.has=oi,si.prototype.set=ai;var ci=si,ui=wr,li=Ar,fi=ci;var di=function(e,t){var n=this.__data__;if(n instanceof ui){var r=n.__data__;if(!li||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new fi(r)}return n.set(e,t),this.size=n.size,this},pi=wr,hi=xr,vi=kr,yi=Or,gi=jr,mi=di;function bi(e){var t=this.__data__=new pi(e);this.size=t.size}bi.prototype.clear=hi,bi.prototype.delete=vi,bi.prototype.get=yi,bi.prototype.has=gi,bi.prototype.set=mi;var wi=bi;var _i=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},xi=ee,ki=kt;var Oi=function(e,t){return e&&xi(t,ki(t),e)};var ji=w,Ai=Pe,Si=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},Ei=Object.prototype.hasOwnProperty;var Ti=pt,Ci=function(e){if(!ji(e))return Si(e);var t=Ai(e),n=[];for(var r in e)("constructor"!=r||!t&&Ei.call(e,r))&&n.push(r);return n},Pi=be;var Ni=function(e){return Pi(e)?Ti(e,!0):Ci(e)},Ii=ee,Ri=Ni;var Di=function(e,t){return e&&Ii(t,Ri(t),e)},Mi={exports:{}};!function(e,t){var n=s,r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,o=i&&i.exports===r?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}}(Mi,Mi.exports);var zi=Mi.exports;var Zi=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var Vi=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};var Fi=function(){return[]},Li=Vi,$i=Fi,Ui=Object.prototype.propertyIsEnumerable,Bi=Object.getOwnPropertySymbols,Wi=Bi?function(e){return null==e?[]:(e=Object(e),Li(Bi(e),(function(t){return Ui.call(e,t)})))}:$i,Ki=Wi,qi=ee,Gi=Ki;var Yi=function(e,t){return qi(e,Gi(e),t)};var Hi=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Ji=ht(Object.getPrototypeOf,Object),Xi=Hi,Qi=Ji,eo=Ki,to=Fi,no=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Xi(t,eo(e)),e=Qi(e);return t}:to,ro=ee,io=no;var oo=function(e,t){return ro(e,io(e),t)},ao=Hi,so=Ue;var co=function(e,t,n){var r=t(e);return so(e)?r:ao(r,n(e))},uo=co,fo=Ki,po=kt;var ho=function(e){return uo(e,po,fo)},vo=co,yo=no,go=Ni;var mo=function(e){return vo(e,go,yo)},bo=$(s,"DataView"),wo=$(s,"Promise"),_o=$(s,"Set"),xo=$(s,"WeakMap"),ko=bo,Oo=Ar,jo=wo,Ao=_o,So=xo,Eo=b,To=T,Co="[object Map]",Po="[object Promise]",No="[object Set]",Io="[object WeakMap]",Ro="[object DataView]",Do=To(ko),Mo=To(Oo),zo=To(jo),Zo=To(Ao),Vo=To(So),Fo=Eo;(ko&&Fo(new ko(new ArrayBuffer(1)))!=Ro||Oo&&Fo(new Oo)!=Co||jo&&Fo(jo.resolve())!=Po||Ao&&Fo(new Ao)!=No||So&&Fo(new So)!=Io)&&(Fo=function(e){var t=Eo(e),n="[object Object]"==t?e.constructor:void 0,r=n?To(n):"";if(r)switch(r){case Do:return Ro;case Mo:return Co;case zo:return Po;case Zo:return No;case Vo:return Io}return t});var Lo=Fo,$o=Object.prototype.hasOwnProperty;var Uo=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&$o.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Bo=s.Uint8Array,Wo=Bo;var Ko=function(e){var t=new e.constructor(e.byteLength);return new Wo(t).set(new Wo(e)),t},qo=Ko;var Go=function(e,t){var n=t?qo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Yo=/\w*$/;var Ho=function(e){var t=new e.constructor(e.source,Yo.exec(e));return t.lastIndex=e.lastIndex,t},Jo=c?c.prototype:void 0,Xo=Jo?Jo.valueOf:void 0;var Qo=function(e){return Xo?Object(Xo.call(e)):{}},ea=Ko;var ta=function(e,t){var n=t?ea(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},na=Ko,ra=Go,ia=Ho,oa=Qo,aa=ta;var sa=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return na(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return ra(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return aa(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return ia(e);case"[object Symbol]":return oa(e)}},ca=w,ua=Object.create,la=function(){function e(){}return function(t){if(!ca(t))return{};if(ua)return ua(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),fa=la,da=Ji,pa=Pe;var ha=function(e){return"function"!=typeof e.constructor||pa(e)?{}:fa(da(e))},va=Lo,ya=Ie;var ga=function(e){return ya(e)&&"[object Map]"==va(e)},ma=Qe,ba=tt&&tt.isMap,wa=ba?ma(ba):ga,_a=Lo,xa=Ie;var ka=function(e){return xa(e)&&"[object Set]"==_a(e)},Oa=Qe,ja=tt&&tt.isSet,Aa=ja?Oa(ja):ka,Sa=wi,Ea=_i,Ta=J,Ca=Oi,Pa=Di,Na=zi,Ia=Zi,Ra=Yi,Da=oo,Ma=ho,za=mo,Za=Lo,Va=Uo,Fa=sa,La=ha,$a=Ue,Ua=qe,Ba=wa,Wa=w,Ka=Aa,qa=kt,Ga=Ni,Ya="[object Arguments]",Ha="[object Function]",Ja="[object Object]",Xa={};Xa[Ya]=Xa["[object Array]"]=Xa["[object ArrayBuffer]"]=Xa["[object DataView]"]=Xa["[object Boolean]"]=Xa["[object Date]"]=Xa["[object Float32Array]"]=Xa["[object Float64Array]"]=Xa["[object Int8Array]"]=Xa["[object Int16Array]"]=Xa["[object Int32Array]"]=Xa["[object Map]"]=Xa["[object Number]"]=Xa[Ja]=Xa["[object RegExp]"]=Xa["[object Set]"]=Xa["[object String]"]=Xa["[object Symbol]"]=Xa["[object Uint8Array]"]=Xa["[object Uint8ClampedArray]"]=Xa["[object Uint16Array]"]=Xa["[object Uint32Array]"]=!0,Xa["[object Error]"]=Xa[Ha]=Xa["[object WeakMap]"]=!1;var Qa=function e(t,n,r,i,o,a){var s,c=1&n,u=2&n,l=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!Wa(t))return t;var f=$a(t);if(f){if(s=Va(t),!c)return Ia(t,s)}else{var d=Za(t),p=d==Ha||"[object GeneratorFunction]"==d;if(Ua(t))return Na(t,c);if(d==Ja||d==Ya||p&&!o){if(s=u||p?{}:La(t),!c)return u?Da(t,Pa(s,t)):Ra(t,Ca(s,t))}else{if(!Xa[d])return o?t:{};s=Fa(t,d,c)}}a||(a=new Sa);var h=a.get(t);if(h)return h;a.set(t,s),Ka(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):Ba(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var v=f?void 0:(l?u?za:Ma:u?Ga:qa)(t);return Ea(v||t,(function(i,o){v&&(i=t[o=i]),Ta(s,o,e(i,n,r,o,t,a))})),s},es=Qa;var ts=r((function(e){return es(e,4)}));var ns=r((function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i})),rs=$e,os=Ue,ss=c?c.isConcatSpreadable:void 0;var cs=Hi,us=function(e){return os(e)||rs(e)||!!(ss&&e&&e[ss])};var ls=function e(t,n,r,i,o){var a=-1,s=t.length;for(r||(r=us),o||(o=[]);++a<s;){var c=t[a];n>0&&r(c)?n>1?e(c,n-1,r,i,o):cs(o,c):i||(o[o.length]=c)}return o},fs=Hi,ds=ls,ps=Zi,hs=Ue;var vs=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return fs(hs(n)?ps(n):[n],ds(t,1))},ys=r(vs),gs=s,ms=w,bs=function(){return gs.Date.now()},ws=Zn,_s=Math.max,xs=Math.min;var ks=function(e,t,n){var r,i,o,a,s,c,u=0,l=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function h(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-u>=o}function v(){var e=bs();if(h(e))return y(e);s=setTimeout(v,function(e){var n=t-(e-c);return f?xs(n,o-(e-u)):n}(e))}function y(e){return s=void 0,d&&r?p(e):(r=i=void 0,a)}function g(){var e=bs(),n=h(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(v,t),l?p(e):a}(c);if(f)return clearTimeout(s),s=setTimeout(v,t),p(c)}return void 0===s&&(s=setTimeout(v,t)),a}return t=ws(t)||0,ms(n)&&(l=!!n.leading,o=(f="maxWait"in n)?_s(ws(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),g.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},g.flush=function(){return void 0===s?a:y(bs())},g},Os=r(ks),js=ve,As=q,Ss=Ae,Es=Ni,Ts=Object.prototype,Cs=Ts.hasOwnProperty,Ps=r(js((function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&Ss(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=Es(o),s=-1,c=a.length;++s<c;){var u=a[s],l=e[u];(void 0===l||As(l,Ts[u])&&!Cs.call(e,u))&&(e[u]=o[u])}return e})));var Ns=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)},Is=Ns,Rs=r(ve((function(e,t){return Is(e,1,t)}))),Ds=Ns,Ms=Zn,zs=ve((function(e,t,n){return Ds(e,Ms(t)||0,n)})),Zs=r(zs);var Vs=ci,Fs=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ls=function(e){return this.__data__.has(e)};function $s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Vs;++t<n;)this.add(e[t])}$s.prototype.add=$s.prototype.push=Fs,$s.prototype.has=Ls;var Us=$s;var Bs=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1};var Ws=Bs,Ks=function(e){return e!=e},qs=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var Gs=function(e,t,n){return t==t?qs(e,t,n):Ws(e,Ks,n)},Ys=Gs;var Hs=function(e,t){return!!(null==e?0:e.length)&&Ys(e,t,0)>-1};var Js=function(e,t){return e.has(t)},Xs=Us,Qs=Hs,ec=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},tc=Nt,nc=Qe,rc=Js;var ic=function(e,t,n,r){var i=-1,o=Qs,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=tc(t,nc(n))),r?(o=ec,a=!1):t.length>=200&&(o=rc,a=!1,t=new Xs(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var d=u;d--;)if(t[d]===f)continue e;c.push(l)}else o(t,f,r)||c.push(l)}return c},oc=be,ac=Ie;var sc=function(e){return ac(e)&&oc(e)},cc=ic,uc=ls,lc=sc,fc=ve((function(e,t){return lc(e)?cc(e,uc(t,1,lc,!0)):[]})),dc=r(fc);var pc=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}(),hc=pc,vc=kt;var yc=function(e,t){return e&&hc(e,t,vc)},gc=be;var mc=function(e,t){return function(n,r){if(null==n)return n;if(!gc(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(yc),bc=te;var wc=function(e){return"function"==typeof e?e:bc},_c=_i,xc=mc,kc=wc,Oc=Ue;var jc=r((function(e,t){return(Oc(e)?_c:xc)(e,kc(t))}));var Ac=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0},Sc=mc;var Ec=function(e,t){var n=!0;return Sc(e,(function(e,r,i){return n=!!t(e,r,i)})),n};var Tc=Us,Cc=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Pc=Js;var Nc=function(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e),l=o.get(t);if(u&&l)return u==t&&l==e;var f=-1,d=!0,p=2&n?new Tc:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var h=e[f],v=t[f];if(r)var y=a?r(v,h,f,t,e,o):r(h,v,f,e,t,o);if(void 0!==y){if(y)continue;d=!1;break}if(p){if(!Cc(t,(function(e,t){if(!Pc(p,t)&&(h===e||i(h,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(h!==v&&!i(h,v,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d};var Ic=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var Rc=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Dc=Bo,Mc=q,zc=Nc,Zc=Ic,Vc=Rc,Fc=c?c.prototype:void 0,Lc=Fc?Fc.valueOf:void 0;var $c=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Dc(e),new Dc(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Mc(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Zc;case"[object Set]":var c=1&r;if(s||(s=Vc),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var l=zc(s(e),s(t),r,i,o,a);return a.delete(e),l;case"[object Symbol]":if(Lc)return Lc.call(e)==Lc.call(t)}return!1},Uc=ho,Bc=Object.prototype.hasOwnProperty;var Wc=function(e,t,n,r,i,o){var a=1&n,s=Uc(e),c=s.length;if(c!=Uc(t).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in t:Bc.call(t,l)))return!1}var f=o.get(e),d=o.get(t);if(f&&d)return f==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);for(var h=a;++u<c;){var v=e[l=s[u]],y=t[l];if(r)var g=a?r(y,v,l,t,e,o):r(v,y,l,e,t,o);if(!(void 0===g?v===y||i(v,y,n,r,o):g)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var m=e.constructor,b=t.constructor;m==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p},Kc=wi,qc=Nc,Gc=$c,Yc=Wc,Hc=Lo,Jc=Ue,Xc=qe,Qc=ot,eu="[object Arguments]",tu="[object Array]",nu="[object Object]",ru=Object.prototype.hasOwnProperty;var iu=function(e,t,n,r,i,o){var a=Jc(e),s=Jc(t),c=a?tu:Hc(e),u=s?tu:Hc(t),l=(c=c==eu?nu:c)==nu,f=(u=u==eu?nu:u)==nu,d=c==u;if(d&&Xc(e)){if(!Xc(t))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new Kc),a||Qc(e)?qc(e,t,n,r,i,o):Gc(e,t,c,n,r,i,o);if(!(1&n)){var p=l&&ru.call(e,"__wrapped__"),h=f&&ru.call(t,"__wrapped__");if(p||h){var v=p?e.value():e,y=h?t.value():t;return o||(o=new Kc),i(v,y,n,r,o)}}return!!d&&(o||(o=new Kc),Yc(e,t,n,r,i,o))},ou=iu,au=Ie;var su=function e(t,n,r,i,o){return t===n||(null==t||null==n||!au(t)&&!au(n)?t!=t&&n!=n:ou(t,n,r,i,e,o))},cu=wi,uu=su;var lu=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=n[i])[0],u=e[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var f=new cu;if(r)var d=r(u,l,c,e,t,f);if(!(void 0===d?uu(l,u,3,r,f):d))return!1}}return!0},fu=w;var du=function(e){return e==e&&!fu(e)},pu=du,hu=kt;var vu=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},yu=lu,gu=function(e){for(var t=hu(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,pu(i)]}return t},mu=vu;var bu=function(e){var t=gu(e);return 1==t.length&&t[0][2]?mu(t[0][0],t[0][1]):function(n){return n===e||yu(n,e,t)}},wu=Ue,_u=Dt,xu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ku=/^\w*$/;var Ou=function(e,t){if(wu(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!_u(e))||(ku.test(e)||!xu.test(e)||null!=t&&e in Object(t))},ju=ci;function Au(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Au.Cache||ju),n}Au.Cache=ju;var Su=Au;var Eu=function(e){var t=Su(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},Tu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cu=/\\(\\)?/g,Pu=Eu((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Tu,(function(e,n,r,i){t.push(r?i.replace(Cu,"$1"):n||e)})),t})),Nu=Ue,Iu=Ou,Ru=Pu,Du=Ut;var Mu=function(e,t){return Nu(e)?e:Iu(e,t)?[e]:Ru(Du(e))},zu=Dt;var Zu=function(e){if("string"==typeof e||zu(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},Vu=Mu,Fu=Zu;var Lu=function(e,t){for(var n=0,r=(t=Vu(t,e)).length;null!=e&&n<r;)e=e[Fu(t[n++])];return n&&n==r?e:void 0},$u=Lu;var Uu=function(e,t,n){var r=null==e?void 0:$u(e,t);return void 0===r?n:r},Bu=r(Uu);var Wu=Mu,Ku=$e,qu=Ue,Gu=_e,Yu=ye,Hu=Zu;var Ju=function(e,t){return null!=e&&t in Object(e)},Xu=function(e,t,n){for(var r=-1,i=(t=Wu(t,e)).length,o=!1;++r<i;){var a=Hu(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Yu(i)&&Gu(a,i)&&(qu(e)||Ku(e))};var Qu=function(e,t){return null!=e&&Xu(e,t,Ju)},el=su,tl=Uu,nl=Qu,rl=Ou,il=du,ol=vu,al=Zu;var sl=function(e){return function(t){return null==t?void 0:t[e]}},cl=Lu;var ul=sl,ll=function(e){return function(t){return cl(t,e)}},fl=Ou,dl=Zu;var pl=bu,hl=function(e,t){return rl(e)&&il(t)?ol(al(e),t):function(n){var r=tl(n,e);return void 0===r&&r===t?nl(n,e):el(t,r,3)}},vl=te,yl=Ue,gl=function(e){return fl(e)?ul(dl(e)):ll(e)};var ml=function(e){return"function"==typeof e?e:null==e?vl:"object"==typeof e?yl(e)?hl(e[0],e[1]):pl(e):gl(e)},bl=Ac,wl=Ec,_l=ml,xl=Ue,kl=Ae;var Ol=r((function(e,t,n){var r=xl(e)?bl:wl;return n&&kl(e,t,n)&&(t=void 0),r(e,_l(t))})),jl=Qn,Al=Lt,Sl=Bn,El=Ut;var Tl=r((function(e,t,n){e=El(e),t=Al(t);var r=e.length,i=n=void 0===n?r:jl(Sl(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t})),Cl=Qn,Pl=Bn;var Nl=Bn,Il=function(e){return e?Cl(Pl(e),0,4294967295):0};var Rl=function(e,t,n,r){var i=e.length;for((n=Nl(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:Nl(r))<0&&(r+=i),r=n>r?0:Il(r);n<r;)e[n++]=t;return e},Dl=Ae;var Ml=r((function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Dl(e,t,n)&&(n=0,r=i),Rl(e,t,n,r)):[]})),zl=mc;var Zl=function(e,t){var n=[];return zl(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n},Vl=Vi,Fl=Zl,Ll=ml,$l=Ue;var Ul=r((function(e,t){return($l(e)?Vl:Fl)(e,Ll(t))})),Bl=ml,Wl=be,Kl=kt;var ql=function(e){return function(t,n,r){var i=Object(t);if(!Wl(t)){var o=Bl(n);t=Kl(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}},Gl=Bs,Yl=ml,Hl=Bn,Jl=Math.max;var Xl=r(ql((function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Hl(n);return i<0&&(i=Jl(r+i,0)),Gl(e,Yl(t),i)})));var Ql=function(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r},ef=yc,tf=ml;var nf=r((function(e,t){return Ql(e,tf(t),ef)}));var rf=function(e){return e&&e.length?e[0]:void 0},of=r(rf),af=r(rf),sf=ls;var cf=function(e){return(null==e?0:e.length)?sf(e,1):[]},uf=r(cf),lf=Bn,ff=Zn,df=Ut,pf=s.isFinite,hf=Math.min;var vf=function(e){var t=Math[e];return function(e,n){if(e=ff(e),(n=null==n?0:hf(lf(n),292))&&pf(e)){var r=(df(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return+((r=(df(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}},yf=r(vf("floor"));var gf=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},mf=r(gf),bf=Gs,wf=Bn,_f=Math.max;var kf=r((function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:wf(n);return i<0&&(i=_f(r+i,0)),bf(e,t,i)})),Of=b,jf=Ue,Af=Ie;var Sf=function(e){return"string"==typeof e||!jf(e)&&Af(e)&&"[object String]"==Of(e)},Ef=r(Sf),Tf=Nt;var Cf=function(e,t){return Tf(t,(function(t){return e[t]}))},Pf=kt;var Nf=Gs,If=be,Rf=Sf,Df=Bn,Mf=function(e){return null==e?[]:Cf(e,Pf(e))},zf=Math.max;var Zf=r((function(e,t,n,r){e=If(e)?e:Mf(e),n=n&&!r?Df(n):0;var i=e.length;return n<0&&(n=zf(i+n,0)),Rf(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Nf(e,t,n)>-1})),Vf=b,Ff=Ji,Lf=Ie,$f=Function.prototype,Uf=Object.prototype,Bf=$f.toString,Wf=Uf.hasOwnProperty,Kf=Bf.call(Object);var qf=function(e){if(!Lf(e)||"[object Object]"!=Vf(e))return!1;var t=Ff(e);if(null===t)return!0;var n=Wf.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Bf.call(n)==Kf},Gf=r(qf),Yf=Array.prototype.join;var Hf=r((function(e,t){return null==e?"":Yf.call(e,t)}));var Jf=mc;var Xf=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r},Qf=function(e,t,n,r){return Jf(e,(function(e,i,o){t(r,e,n(e),o)})),r},ed=ml,td=Ue;var nd=K,rd=r(function(e,t){return function(n,r){var i=td(n)?Xf:Qf,o=t?t():{};return i(n,e,ed(r),o)}}((function(e,t,n){nd(e,n,t)})));var id=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},od=r(id),ad=r(mn("toLowerCase")),sd=mc,cd=be;var ud=function(e,t){var n=-1,r=cd(e)?Array(e.length):[];return sd(e,(function(e,i,o){r[++n]=t(e,i,o)})),r},ld=Nt,fd=ml,dd=ud,pd=Ue;var hd=r((function(e,t){return(pd(e)?ld:dd)(e,fd(t))})),vd=K,yd=q;var gd=function(e,t,n){(void 0!==n&&!yd(e[t],n)||void 0===n&&!(t in e))&&vd(e,t,n)};var md=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},bd=ee,wd=Ni;var _d=gd,xd=zi,kd=ta,Od=Zi,jd=ha,Ad=$e,Sd=Ue,Ed=sc,Td=qe,Cd=O,Pd=w,Nd=qf,Id=ot,Rd=md,Dd=function(e){return bd(e,wd(e))};var Md=function(e,t,n,r,i,o,a){var s=Rd(e,n),c=Rd(t,n),u=a.get(c);if(u)_d(e,n,u);else{var l=o?o(s,c,n+"",e,t,a):void 0,f=void 0===l;if(f){var d=Sd(c),p=!d&&Td(c),h=!d&&!p&&Id(c);l=c,d||p||h?Sd(s)?l=s:Ed(s)?l=Od(s):p?(f=!1,l=xd(c,!0)):h?(f=!1,l=kd(c,!0)):l=[]:Nd(c)||Ad(c)?(l=s,Ad(s)?l=Dd(s):Pd(s)&&!Cd(s)||(l=jd(c))):f=!1}f&&(a.set(c,l),i(l,c,r,o,a),a.delete(c)),_d(e,n,l)}},zd=wi,Zd=gd,Vd=pc,Fd=Md,Ld=w,$d=Ni,Ud=md;var Bd=function e(t,n,r,i,o){t!==n&&Vd(n,(function(a,s){if(o||(o=new zd),Ld(a))Fd(t,n,s,r,e,i,o);else{var c=i?i(Ud(t,s),a,s+"",t,n,o):void 0;void 0===c&&(c=a),Zd(t,s,c)}}),$d)},Wd=Bd,Kd=r(Te((function(e,t,n){Wd(e,t,n)}))),qd=Lu,Gd=Wt;var Yd=Mu,Hd=id,Jd=function(e,t){return t.length<2?e:qd(e,Gd(t,0,-1))},Xd=Zu;var Qd=function(e,t){return t=Yd(t,e),null==(e=Jd(e,t))||delete e[Xd(Hd(t))]},ep=qf;var tp=cf,np=oe,rp=fe;var ip=function(e){return rp(np(e,void 0,tp),e+"")},op=Nt,ap=Qa,sp=Qd,cp=Mu,up=ee,lp=function(e){return ep(e)?void 0:e},fp=mo,dp=r(ip((function(e,t){var n={};if(null==e)return n;var r=!1;t=op(t,(function(t){return t=cp(t,e),r||(r=t.length>1),t})),up(e,fp(e),n),r&&(n=ap(n,7,lp));for(var i=t.length;i--;)sp(n,t[i]);return n}))),pp=J,hp=Mu,vp=_e,yp=w,gp=Zu;var mp=function(e,t,n,r){if(!yp(e))return e;for(var i=-1,o=(t=hp(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var c=gp(t[i]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=a){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=yp(l)?l:vp(t[i+1])?[]:{})}pp(s,c,u),s=s[c]}return e},bp=Lu,wp=mp,_p=Mu;var xp=function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=bp(e,a);n(s,a)&&wp(o,_p(a,e),s)}return o},kp=Qu;var Op=function(e,t){return xp(e,t,(function(t,n){return kp(e,n)}))},jp=r(ip((function(e,t){return null==e?{}:Op(e,t)})));var Ap=Nt,Sp=Gs,Ep=function(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1},Tp=Qe,Cp=Zi,Pp=Array.prototype.splice;var Np=function(e,t,n,r){var i=r?Ep:Sp,o=-1,a=t.length,s=e;for(e===t&&(t=Cp(t)),n&&(s=Ap(e,Tp(n)));++o<a;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==e&&Pp.call(s,c,1),Pp.call(e,c,1);return e},Ip=Np;var Rp=function(e,t){return e&&e.length&&t&&t.length?Ip(e,t):e},Dp=r(ve(Rp)),Mp=Math.floor,zp=Math.random;var Zp=function(e,t){return e+Mp(zp()*(t-e+1))},Vp=Ae,Fp=$n,Lp=parseFloat,$p=Math.min,Up=Math.random;var Bp=r((function(e,t,n){if(n&&"boolean"!=typeof n&&Vp(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=Fp(e),void 0===t?(t=e,e=0):t=Fp(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Up();return $p(e+i*(t-e+Lp("1e-"+((i+"").length-1))),t)}return Zp(e,t)})),Wp=Math.ceil,Kp=Math.max;var qp=function(e,t,n,r){for(var i=-1,o=Kp(Wp((t-e)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=e,e+=n;return a},Gp=Ae,Yp=$n;var Hp=r(function(e){return function(t,n,r){return r&&"number"!=typeof r&&Gp(t,n,r)&&(n=r=void 0),t=Yp(t),void 0===n?(n=t,t=0):n=Yp(n),r=void 0===r?t<n?1:-1:Yp(r),qp(t,n,r,e)}}());var Jp=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n},Xp=mc,Qp=ml,eh=function(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n},th=Ue;var nh=function(e,t,n){var r=th(e)?Jp:eh,i=arguments.length<3;return r(e,Qp(t),n,i,Xp)},rh=r(nh);var ih=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}},oh=Vi,ah=Zl,sh=ml,ch=Ue,uh=ih;var lh=r((function(e,t){return(ch(e)?oh:ah)(e,uh(sh(t)))})),fh=Qd,dh=_e,ph=Array.prototype.splice;var hh=ml,vh=function(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;dh(i)?ph.call(e,i,1):fh(e,i)}}return e};var yh=r((function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=hh(t);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return vh(e,i),n})),gh=Ut;var mh=function(){var e=arguments,t=gh(e[0]);return e.length<3?t:t.replace(e[1],e[2])},bh=r(mh),wh=Array.prototype.reverse;var _h=r((function(e){return null==e?e:wh.call(e)})),xh=r(vf("round")),kh=mp;var Oh=r((function(e,t,n){return null==e?e:kh(e,t,n)})),jh=sl("length"),Ah="\\ud800-\\udfff",Sh="["+Ah+"]",Eh="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Th="\\ud83c[\\udffb-\\udfff]",Ch="[^"+Ah+"]",Ph="(?:\\ud83c[\\udde6-\\uddff]){2}",Nh="[\\ud800-\\udbff][\\udc00-\\udfff]",Ih="(?:"+Eh+"|"+Th+")"+"?",Rh="[\\ufe0e\\ufe0f]?",Dh=Rh+Ih+("(?:\\u200d(?:"+[Ch,Ph,Nh].join("|")+")"+Rh+Ih+")*"),Mh="(?:"+[Ch+Eh+"?",Eh,Ph,Nh,Sh].join("|")+")",zh=RegExp(Th+"(?="+Th+")|"+Mh+Dh,"g");var Zh=jh,Vh=Yt,Fh=function(e){for(var t=zh.lastIndex=0;zh.test(e);)++t;return t};var Lh=bt,$h=Lo,Uh=be,Bh=Sf,Wh=function(e){return Vh(e)?Fh(e):Zh(e)};var Kh=r((function(e){if(null==e)return 0;if(Uh(e))return Bh(e)?Wh(e):e.length;var t=$h(e);return"[object Map]"==t||"[object Set]"==t?e.size:Lh(e).length})),qh=Qn,Gh=Lt,Yh=Bn,Hh=Ut;var Jh=r((function(e,t,n){return e=Hh(e),n=null==n?0:qh(Yh(n),0,e.length),t=Gh(t),e.slice(n,n+t.length)==t}));var Xh=Dt;var Qh=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Xh(e),a=void 0!==t,s=null===t,c=t==t,u=Xh(t);if(!s&&!u&&!o&&e>t||o&&a&&c&&!s&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!c)return-1}return 0};var ev=Nt,tv=Lu,nv=ml,rv=ud,iv=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},ov=Qe,av=function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var c=Qh(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index},sv=te,cv=Ue;var uv=ls,lv=function(e,t,n){t=t.length?ev(t,(function(e){return cv(e)?function(t){return tv(t,1===e.length?e[0]:e)}:e})):[sv];var r=-1;t=ev(t,ov(nv));var i=rv(e,(function(e,n,i){return{criteria:ev(t,(function(t){return t(e)})),index:++r,value:e}}));return iv(i,(function(e,t){return av(e,t,n)}))},fv=Ae,dv=r(ve((function(e,t){if(null==e)return[];var n=t.length;return n>1&&fv(e,t[0],t[1])?t=[]:n>2&&fv(t[0],t[1],t[2])&&(t=[t[0]]),lv(e,uv(t,1),[])}))),pv=b,hv=Ie;var vv=function(e){return hv(e)&&"[object RegExp]"==pv(e)},yv=Qe,gv=tt&&tt.isRegExp,mv=gv?yv(gv):vv,bv=Lt,wv=qt,_v=Yt,xv=Ae,kv=mv,Ov=pn,jv=Ut;var Av=r((function(e,t,n){return n&&"number"!=typeof n&&xv(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=jv(e))&&("string"==typeof t||null!=t&&!kv(t))&&!(t=bv(t))&&_v(e)?wv(Ov(e),0,n):e.split(t,n):[]})),Sv=Wt;var Ev=r((function(e){var t=null==e?0:e.length;return t?Sv(e,1,t):[]})),Tv=Wt,Cv=Bn;var Pv=function(e,t,n){return e&&e.length?(t=n||void 0===t?1:Cv(t),Tv(e,0,t<0?0:t)):[]},Nv=r(Pv),Iv=Ut;var Rv=r((function(e){return Iv(e).toLowerCase()})),Dv=Ut;var Mv=r((function(e){return Dv(e).toUpperCase()})),zv=_i,Zv=la,Vv=yc,Fv=ml,Lv=Ji,$v=Ue,Uv=qe,Bv=O,Wv=w,Kv=ot;var qv=r((function(e,t,n){var r=$v(e),i=r||Uv(e)||Kv(e);if(t=Fv(t),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Wv(e)&&Bv(o)?Zv(Lv(e)):{}}return(i?zv:Vv)(e,(function(e,r,i){return t(n,e,r,i)})),n})),Gv=Gs;var Yv=Gs;var Hv=Lt,Jv=Cn,Xv=qt,Qv=function(e,t){for(var n=e.length;n--&&Gv(t,e[n],0)>-1;);return n},ey=function(e,t){for(var n=-1,r=e.length;++n<r&&Yv(t,e[n],0)>-1;);return n},ty=pn,ny=Ut;var ry=r((function(e,t,n){if((e=ny(e))&&(n||void 0===t))return Jv(e);if(!e||!(t=Hv(t)))return e;var r=ty(e),i=ty(t),o=ey(r,i),a=Qv(r,i)+1;return Xv(r,o,a).join("")})),iy=ic,oy=sc,ay=ve((function(e,t){return oy(e)?iy(e,t):[]})),sy=r(ay),cy=xo&&new xo,uy=cy,ly=uy?function(e,t){return uy.set(e,t),e}:te,fy=ly,dy=la,py=w;var hy=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=dy(e.prototype),r=e.apply(n,t);return py(r)?r:n}},vy=hy,yy=s;var gy=function(e,t,n){var r=1&t,i=vy(e);return function t(){return(this&&this!==yy&&this instanceof t?i:e).apply(r?n:this,arguments)}},my=Math.max;var by=function(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,c=t.length,u=my(o-a,0),l=Array(c+u),f=!r;++s<c;)l[s]=t[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;u--;)l[s++]=e[i++];return l},wy=Math.max;var _y=function(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,c=-1,u=t.length,l=wy(o-s,0),f=Array(l+u),d=!r;++i<l;)f[i]=e[i];for(var p=i;++c<u;)f[p+c]=t[c];for(;++a<s;)(d||i<o)&&(f[p+n[a]]=e[i++]);return f};var xy=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};var ky=function(){},Oy=la,jy=ky;function Ay(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}Ay.prototype=Oy(jy.prototype),Ay.prototype.constructor=Ay;var Sy=Ay;var Ey=cy,Ty=Ey?function(e){return Ey.get(e)}:function(){},Cy={},Py=Object.prototype.hasOwnProperty;var Ny=function(e){for(var t=e.name+"",n=Cy[t],r=Py.call(Cy,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t},Iy=la,Ry=ky;function Dy(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Dy.prototype=Iy(Ry.prototype),Dy.prototype.constructor=Dy;var My=Sy,zy=Dy,Zy=Zi;var Vy=Sy,Fy=Dy,Ly=ky,$y=Ue,Uy=Ie,By=function(e){if(e instanceof My)return e.clone();var t=new zy(e.__wrapped__,e.__chain__);return t.__actions__=Zy(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},Wy=Object.prototype.hasOwnProperty;function Ky(e){if(Uy(e)&&!$y(e)&&!(e instanceof Vy)){if(e instanceof Fy)return e;if(Wy.call(e,"__wrapped__"))return By(e)}return new Fy(e)}Ky.prototype=Ly.prototype,Ky.prototype.constructor=Ky;var qy=Sy,Gy=Ty,Yy=Ny,Hy=Ky;var Jy=function(e){var t=Yy(e),n=Hy[t];if("function"!=typeof n||!(t in qy.prototype))return!1;if(e===n)return!0;var r=Gy(n);return!!r&&e===r[0]},Xy=le(fy),Qy=/\{\n\/\* \[wrapped with (.+)\] \*/,eg=/,? & /;var tg=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var ng=_i,rg=Hs,ig=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var og=function(e){var t=e.match(Qy);return t?t[1].split(eg):[]},ag=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(tg,"{\n/* [wrapped with "+t+"] */\n")},sg=fe,cg=function(e,t){return ng(ig,(function(n){var r="_."+n[0];t&n[1]&&!rg(e,r)&&e.push(r)})),e.sort()};var ug=function(e,t,n){var r=t+"";return sg(e,ag(r,cg(og(r),n)))},lg=Jy,fg=Xy,dg=ug;var pg=function(e,t,n,r,i,o,a,s,c,u){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,s,c,u],d=n.apply(void 0,f);return lg(e)&&fg(d,f),d.placeholder=r,dg(d,e,t)};var hg=function(e){return e.placeholder},vg=Zi,yg=_e,gg=Math.min;var mg="__lodash_placeholder__";var bg=function(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==mg||(e[n]=mg,o[i++]=n)}return o},wg=by,_g=_y,xg=xy,kg=hy,Og=pg,jg=hg,Ag=function(e,t){for(var n=e.length,r=gg(t.length,n),i=vg(e);r--;){var o=t[r];e[r]=yg(o,n)?i[o]:void 0}return e},Sg=bg,Eg=s;var Tg=function e(t,n,r,i,o,a,s,c,u,l){var f=128&n,d=1&n,p=2&n,h=24&n,v=512&n,y=p?void 0:kg(t);return function g(){for(var m=arguments.length,b=Array(m),w=m;w--;)b[w]=arguments[w];if(h)var _=jg(g),x=xg(b,_);if(i&&(b=wg(b,i,o,h)),a&&(b=_g(b,a,s,h)),m-=x,h&&m<l){var k=Sg(b,_);return Og(t,n,e,g.placeholder,r,b,k,c,u,l-m)}var O=d?r:this,j=p?O[t]:t;return m=b.length,c?b=Ag(b,c):v&&m>1&&b.reverse(),f&&u<m&&(b.length=u),this&&this!==Eg&&this instanceof g&&(j=y||kg(j)),j.apply(O,b)}},Cg=ne,Pg=hy,Ng=Tg,Ig=pg,Rg=hg,Dg=bg,Mg=s;var zg=function(e,t,n){var r=Pg(e);return function i(){for(var o=arguments.length,a=Array(o),s=o,c=Rg(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==c&&a[o-1]!==c?[]:Dg(a,c);return(o-=u.length)<n?Ig(e,t,Ng,i.placeholder,void 0,a,u,void 0,void 0,n-o):Cg(this&&this!==Mg&&this instanceof i?r:e,this,a)}},Zg=ne,Vg=hy,Fg=s;var Lg=function(e,t,n,r){var i=1&t,o=Vg(e);return function t(){for(var a=-1,s=arguments.length,c=-1,u=r.length,l=Array(u+s),f=this&&this!==Fg&&this instanceof t?o:e;++c<u;)l[c]=r[c];for(;s--;)l[c++]=arguments[++a];return Zg(f,i?n:this,l)}},$g=by,Ug=_y,Bg=bg,Wg="__lodash_placeholder__",Kg=128,qg=Math.min;var Gg=function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==Kg&&8==n||r==Kg&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var c=e[3];e[3]=c?$g(c,s,t[4]):s,e[4]=c?Bg(e[3],Wg):t[4]}return(s=t[5])&&(c=e[5],e[5]=c?Ug(c,s,t[6]):s,e[6]=c?Bg(e[5],Wg):t[6]),(s=t[7])&&(e[7]=s),r&Kg&&(e[8]=null==e[8]?t[8]:qg(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e},Yg=fy,Hg=gy,Jg=zg,Xg=Tg,Qg=Lg,em=Ty,tm=Gg,nm=Xy,rm=ug,im=Bn,om=Math.max;var am=function(e,t,n,r,i,o,a,s){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var u=r?r.length:0;if(u||(t&=-97,r=i=void 0),a=void 0===a?a:om(im(a),0),s=void 0===s?s:im(s),u-=i?i.length:0,64&t){var l=r,f=i;r=i=void 0}var d=c?void 0:em(e),p=[e,t,n,r,i,l,f,o,a,s];if(d&&tm(p,d),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],!(s=p[9]=void 0===p[9]?c?0:e.length:om(p[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)h=8==t||16==t?Jg(e,t,s):32!=t&&33!=t||i.length?Xg.apply(void 0,p):Qg(e,t,n,r);else var h=Hg(e,t,n);return rm((d?Yg:nm)(h,p),e,t)},sm=am,cm=hg,um=bg,lm=ve((function(e,t){var n=um(t,cm(lm));return sm(e,32,void 0,t,n)}));lm.placeholder={};var fm=wc,dm=lm;var pm,hm,vm=r((function(e,t){return dm(fm(t),e)})),ym=Object.freeze({__proto__:null,assign:Pt,capitalize:kn,castArray:An,chunk:Xn,clamp:nr,clone:ts,cloneDeep:ts,compact:ns,concat:ys,debounce:Os,defaults:Ps,defer:Rs,delay:Zs,difference:dc,each:jc,endsWith:Tl,every:Ol,fill:Ml,filter:Ul,find:Xl,findKey:nf,first:af,flatten:uf,floor:yf,fromPairs:mf,get:Bu,head:of,includes:Zf,indexOf:kf,isArray:Be,isPlainObject:Gf,isString:Ef,join:Hf,keyBy:rd,last:od,lowerFirst:ad,map:hd,merge:Kd,omit:dp,pick:jp,pull:Dp,random:Bp,range:Hp,reduce:rh,reject:lh,remove:yh,replace:bh,reverse:_h,round:xh,set:Oh,size:Kh,sortBy:dv,split:Av,startsWith:Jh,tail:Ev,take:Nv,toInteger:Wn,toLower:Rv,toNumber:Vn,toString:Bt,toUpper:Mv,transform:qv,trim:ry,upperFirst:wn,without:sy,wrap:vm});globalThis.global=globalThis,global.is=(e,t)=>t(e),global.as=e=>e,global.lo=ym,null==global.process&&(global.process={env:{NODE_ENV:"production"}}),"WECHAT_GAME"===global.cc?.sys.platform&&(process=process??global.process),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(pm||(pm={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(hm||(hm={}));const gm=pm.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mm=e=>{switch(typeof e){case"undefined":return gm.undefined;case"string":return gm.string;case"number":return isNaN(e)?gm.nan:gm.number;case"boolean":return gm.boolean;case"function":return gm.function;case"bigint":return gm.bigint;case"symbol":return gm.symbol;case"object":return Array.isArray(e)?gm.array:null===e?gm.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?gm.promise:"undefined"!=typeof Map&&e instanceof Map?gm.map:"undefined"!=typeof Set&&e instanceof Set?gm.set:"undefined"!=typeof Date&&e instanceof Date?gm.date:gm.object;default:return gm.unknown}},bm=pm.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class wm extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,pm.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}wm.create=e=>new wm(e);const _m=(e,t)=>{let n;switch(e.code){case bm.invalid_type:n=e.received===gm.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case bm.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,pm.jsonStringifyReplacer)}`;break;case bm.unrecognized_keys:n=`Unrecognized key(s) in object: ${pm.joinValues(e.keys,", ")}`;break;case bm.invalid_union:n="Invalid input";break;case bm.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${pm.joinValues(e.options)}`;break;case bm.invalid_enum_value:n=`Invalid enum value. Expected ${pm.joinValues(e.options)}, received '${e.received}'`;break;case bm.invalid_arguments:n="Invalid function arguments";break;case bm.invalid_return_type:n="Invalid function return type";break;case bm.invalid_date:n="Invalid date";break;case bm.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:pm.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case bm.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case bm.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case bm.custom:n="Invalid input";break;case bm.invalid_intersection_types:n="Intersection results could not be merged";break;case bm.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case bm.not_finite:n="Number must be finite";break;default:n=t.defaultError,pm.assertNever(e)}return{message:n}};let xm=_m;function km(){return xm}const Om=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],a={...i,path:o};let s="";const c=r.filter((e=>!!e)).slice().reverse();for(const e of c)s=e(a,{data:t,defaultError:s}).message;return{...i,path:o,message:i.message||s}};function jm(e,t){const n=Om({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,km(),_m].filter((e=>!!e))});e.common.issues.push(n)}class Am{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return Sm;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t)n.push({key:await e.key,value:await e.value});return Am.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return Sm;if("aborted"===i.status)return Sm;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const Sm=Object.freeze({status:"aborted"}),Em=e=>({status:"dirty",value:e}),Tm=e=>({status:"valid",value:e}),Cm=e=>"aborted"===e.status,Pm=e=>"dirty"===e.status,Nm=e=>"valid"===e.status,Im=e=>"undefined"!=typeof Promise&&e instanceof Promise;var Rm;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Rm||(Rm={}));class Dm{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Mm=(e,t)=>{if(Nm(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new wm(e.common.issues);return this._error=t,this._error}}};function zm(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=r?r:t.defaultError}:{message:null!=n?n:t.defaultError},description:i}}class Zm{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return mm(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:mm(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Am,ctx:{common:e.parent.common,data:e.data,parsedType:mm(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Im(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mm(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Mm(r,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mm(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(Im(r)?r:Promise.resolve(r));return Mm(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const i=e(t),o=()=>r.addIssue({code:bm.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(o(),!1))):!!i||(o(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new jb({schema:this,typeName:zb.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ab.create(this,this._def)}nullable(){return Sb.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ab.create(this,this._def)}promise(){return Ob.create(this,this._def)}or(e){return ub.create([this,e],this._def)}and(e){return pb.create(this,e,this._def)}transform(e){return new jb({...zm(this._def),schema:this,typeName:zb.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Eb({...zm(this._def),innerType:this,defaultValue:t,typeName:zb.ZodDefault})}brand(){return new Nb({typeName:zb.ZodBranded,type:this,...zm(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Tb({...zm(this._def),innerType:this,catchValue:t,typeName:zb.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Ib.create(this,e)}readonly(){return Rb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Vm=/^c[^\s-]{8,}$/i,Fm=/^[a-z][a-z0-9]*$/,Lm=/[0-9A-HJKMNP-TV-Z]{26}/,$m=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Um=/^([A-Z0-9_+-]+\.?)*[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Bm=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Wm=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Km=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class qm extends Zm{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement((t=>e.test(t)),{validation:t,code:bm.invalid_string,...Rm.errToObj(n)}),this.nonempty=e=>this.min(1,Rm.errToObj(e)),this.trim=()=>new qm({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new qm({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new qm({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==gm.string){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.string,received:t.parsedType}),Sm}const t=new Am;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),jm(n,{code:bm.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),jm(n,{code:bm.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const r=e.data.length>a.value,i=e.data.length<a.value;(r||i)&&(n=this._getOrReturnCtx(e,n),r?jm(n,{code:bm.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):i&&jm(n,{code:bm.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)Um.test(e.data)||(n=this._getOrReturnCtx(e,n),jm(n,{validation:"email",code:bm.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)Bm.test(e.data)||(n=this._getOrReturnCtx(e,n),jm(n,{validation:"emoji",code:bm.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)$m.test(e.data)||(n=this._getOrReturnCtx(e,n),jm(n,{validation:"uuid",code:bm.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)Vm.test(e.data)||(n=this._getOrReturnCtx(e,n),jm(n,{validation:"cuid",code:bm.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)Fm.test(e.data)||(n=this._getOrReturnCtx(e,n),jm(n,{validation:"cuid2",code:bm.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)Lm.test(e.data)||(n=this._getOrReturnCtx(e,n),jm(n,{validation:"ulid",code:bm.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),jm(n,{validation:"url",code:bm.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),jm(n,{validation:"regex",code:bm.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),jm(n,{code:bm.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),jm(n,{code:bm.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),jm(n,{code:bm.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){((o=a).precision?o.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${o.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${o.precision}}Z$`):0===o.precision?o.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):o.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(n=this._getOrReturnCtx(e,n),jm(n,{code:bm.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else"ip"===a.kind?(r=e.data,("v4"!==(i=a.version)&&i||!Wm.test(r))&&("v6"!==i&&i||!Km.test(r))&&(n=this._getOrReturnCtx(e,n),jm(n,{validation:"ip",code:bm.invalid_string,message:a.message}),t.dirty())):pm.assertNever(a);var r,i,o;return{status:t.value,value:e.data}}_addCheck(e){return new qm({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Rm.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Rm.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Rm.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Rm.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Rm.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Rm.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Rm.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Rm.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...Rm.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Rm.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Rm.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Rm.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Rm.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Rm.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Rm.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Rm.errToObj(t)})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Gm(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}qm.create=e=>{var t;return new qm({checks:[],typeName:zb.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...zm(e)})};class Ym extends Zm{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==gm.number){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.number,received:t.parsedType}),Sm}let t;const n=new Am;for(const r of this._def.checks)if("int"===r.kind)pm.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),jm(t,{code:bm.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),jm(t,{code:bm.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),jm(t,{code:bm.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Gm(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),jm(t,{code:bm.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),jm(t,{code:bm.not_finite,message:r.message}),n.dirty()):pm.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Rm.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Rm.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Rm.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Rm.toString(t))}setLimit(e,t,n,r){return new Ym({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Rm.toString(r)}]})}_addCheck(e){return new Ym({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Rm.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Rm.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Rm.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Rm.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Rm.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Rm.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Rm.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Rm.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Rm.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&pm.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ym.create=e=>new Ym({checks:[],typeName:zb.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...zm(e)});class Hm extends Zm{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==gm.bigint){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.bigint,received:t.parsedType}),Sm}let t;const n=new Am;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),jm(t,{code:bm.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),jm(t,{code:bm.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),jm(t,{code:bm.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):pm.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Rm.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Rm.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Rm.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Rm.toString(t))}setLimit(e,t,n,r){return new Hm({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Rm.toString(r)}]})}_addCheck(e){return new Hm({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Rm.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Rm.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Rm.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Rm.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Rm.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Hm.create=e=>{var t;return new Hm({checks:[],typeName:zb.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...zm(e)})};class Jm extends Zm{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==gm.boolean){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.boolean,received:t.parsedType}),Sm}return Tm(e.data)}}Jm.create=e=>new Jm({typeName:zb.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...zm(e)});class Xm extends Zm{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==gm.date){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.date,received:t.parsedType}),Sm}if(isNaN(e.data.getTime())){return jm(this._getOrReturnCtx(e),{code:bm.invalid_date}),Sm}const t=new Am;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),jm(n,{code:bm.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),jm(n,{code:bm.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):pm.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xm({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Rm.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Rm.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Xm.create=e=>new Xm({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:zb.ZodDate,...zm(e)});class Qm extends Zm{_parse(e){if(this._getType(e)!==gm.symbol){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.symbol,received:t.parsedType}),Sm}return Tm(e.data)}}Qm.create=e=>new Qm({typeName:zb.ZodSymbol,...zm(e)});class eb extends Zm{_parse(e){if(this._getType(e)!==gm.undefined){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.undefined,received:t.parsedType}),Sm}return Tm(e.data)}}eb.create=e=>new eb({typeName:zb.ZodUndefined,...zm(e)});class tb extends Zm{_parse(e){if(this._getType(e)!==gm.null){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.null,received:t.parsedType}),Sm}return Tm(e.data)}}tb.create=e=>new tb({typeName:zb.ZodNull,...zm(e)});class nb extends Zm{constructor(){super(...arguments),this._any=!0}_parse(e){return Tm(e.data)}}nb.create=e=>new nb({typeName:zb.ZodAny,...zm(e)});class rb extends Zm{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Tm(e.data)}}rb.create=e=>new rb({typeName:zb.ZodUnknown,...zm(e)});class ib extends Zm{_parse(e){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.never,received:t.parsedType}),Sm}}ib.create=e=>new ib({typeName:zb.ZodNever,...zm(e)});class ob extends Zm{_parse(e){if(this._getType(e)!==gm.undefined){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.void,received:t.parsedType}),Sm}return Tm(e.data)}}ob.create=e=>new ob({typeName:zb.ZodVoid,...zm(e)});class ab extends Zm{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==gm.array)return jm(t,{code:bm.invalid_type,expected:gm.array,received:t.parsedType}),Sm;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(jm(t,{code:e?bm.too_big:bm.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(jm(t,{code:bm.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(jm(t,{code:bm.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new Dm(t,e,t.path,n))))).then((e=>Am.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>r.type._parseSync(new Dm(t,e,t.path,n))));return Am.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new ab({...this._def,minLength:{value:e,message:Rm.toString(t)}})}max(e,t){return new ab({...this._def,maxLength:{value:e,message:Rm.toString(t)}})}length(e,t){return new ab({...this._def,exactLength:{value:e,message:Rm.toString(t)}})}nonempty(e){return this.min(1,e)}}function sb(e){if(e instanceof cb){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ab.create(sb(r))}return new cb({...e._def,shape:()=>t})}return e instanceof ab?new ab({...e._def,type:sb(e.element)}):e instanceof Ab?Ab.create(sb(e.unwrap())):e instanceof Sb?Sb.create(sb(e.unwrap())):e instanceof hb?hb.create(e.items.map((e=>sb(e)))):e}ab.create=(e,t)=>new ab({type:e,minLength:null,maxLength:null,exactLength:null,typeName:zb.ZodArray,...zm(t)});class cb extends Zm{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=pm.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==gm.object){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.object,received:t.parsedType}),Sm}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof ib&&"strip"===this._def.unknownKeys))for(const e in n.data)i.includes(e)||o.push(e);const a=[];for(const e of i){const t=r[e],i=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new Dm(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof ib){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of o)a.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)o.length>0&&(jm(n,{code:bm.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new Dm(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>Am.mergeObjectSync(t,e))):Am.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return Rm.errToObj,new cb({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,i,o,a;const s=null!==(o=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,t,n).message)&&void 0!==o?o:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=Rm.errToObj(e).message)&&void 0!==a?a:s}:{message:s}}}:{}})}strip(){return new cb({...this._def,unknownKeys:"strip"})}passthrough(){return new cb({...this._def,unknownKeys:"passthrough"})}extend(e){return new cb({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new cb({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:zb.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new cb({...this._def,catchall:e})}pick(e){const t={};return pm.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new cb({...this._def,shape:()=>t})}omit(e){const t={};return pm.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new cb({...this._def,shape:()=>t})}deepPartial(){return sb(this)}partial(e){const t={};return pm.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new cb({...this._def,shape:()=>t})}required(e){const t={};return pm.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Ab;)e=e._def.innerType;t[n]=e}})),new cb({...this._def,shape:()=>t})}keyof(){return _b(pm.objectKeys(this.shape))}}cb.create=(e,t)=>new cb({shape:()=>e,unknownKeys:"strip",catchall:ib.create(),typeName:zb.ZodObject,...zm(t)}),cb.strictCreate=(e,t)=>new cb({shape:()=>e,unknownKeys:"strict",catchall:ib.create(),typeName:zb.ZodObject,...zm(t)}),cb.lazycreate=(e,t)=>new cb({shape:e,unknownKeys:"strip",catchall:ib.create(),typeName:zb.ZodObject,...zm(t)});class ub extends Zm{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new wm(e.ctx.common.issues)));return jm(t,{code:bm.invalid_union,unionErrors:n}),Sm}));{let e;const r=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},o=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map((e=>new wm(e)));return jm(t,{code:bm.invalid_union,unionErrors:i}),Sm}}get options(){return this._def.options}}ub.create=(e,t)=>new ub({options:e,typeName:zb.ZodUnion,...zm(t)});const lb=e=>e instanceof bb?lb(e.schema):e instanceof jb?lb(e.innerType()):e instanceof wb?[e.value]:e instanceof xb?e.options:e instanceof kb?Object.keys(e.enum):e instanceof Eb?lb(e._def.innerType):e instanceof eb?[void 0]:e instanceof tb?[null]:null;class fb extends Zm{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==gm.object)return jm(t,{code:bm.invalid_type,expected:gm.object,received:t.parsedType}),Sm;const n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(jm(t,{code:bm.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Sm)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=lb(n.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(r.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new fb({typeName:zb.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...zm(n)})}}function db(e,t){const n=mm(e),r=mm(t);if(e===t)return{valid:!0,data:e};if(n===gm.object&&r===gm.object){const n=pm.objectKeys(t),r=pm.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const n of r){const r=db(e[n],t[n]);if(!r.valid)return{valid:!1};i[n]=r.data}return{valid:!0,data:i}}if(n===gm.array&&r===gm.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=db(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===gm.date&&r===gm.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class pb extends Zm{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(Cm(e)||Cm(r))return Sm;const i=db(e.value,r.value);return i.valid?((Pm(e)||Pm(r))&&t.dirty(),{status:t.value,value:i.data}):(jm(n,{code:bm.invalid_intersection_types}),Sm)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}pb.create=(e,t,n)=>new pb({left:e,right:t,typeName:zb.ZodIntersection,...zm(n)});class hb extends Zm{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==gm.array)return jm(n,{code:bm.invalid_type,expected:gm.array,received:n.parsedType}),Sm;if(n.data.length<this._def.items.length)return jm(n,{code:bm.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Sm;!this._def.rest&&n.data.length>this._def.items.length&&(jm(n,{code:bm.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Dm(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>Am.mergeArray(t,e))):Am.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new hb({...this._def,rest:e})}}hb.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hb({items:e,typeName:zb.ZodTuple,rest:null,...zm(t)})};class vb extends Zm{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==gm.object)return jm(n,{code:bm.invalid_type,expected:gm.object,received:n.parsedType}),Sm;const r=[],i=this._def.keyType,o=this._def.valueType;for(const e in n.data)r.push({key:i._parse(new Dm(n,e,n.path,e)),value:o._parse(new Dm(n,n.data[e],n.path,e))});return n.common.async?Am.mergeObjectAsync(t,r):Am.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new vb(t instanceof Zm?{keyType:e,valueType:t,typeName:zb.ZodRecord,...zm(n)}:{keyType:qm.create(),valueType:e,typeName:zb.ZodRecord,...zm(t)})}}class yb extends Zm{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==gm.map)return jm(n,{code:bm.invalid_type,expected:gm.map,received:n.parsedType}),Sm;const r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map((([e,t],o)=>({key:r._parse(new Dm(n,e,n.path,[o,"key"])),value:i._parse(new Dm(n,t,n.path,[o,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of o){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return Sm;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of o){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return Sm;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}yb.create=(e,t,n)=>new yb({valueType:t,keyType:e,typeName:zb.ZodMap,...zm(n)});class gb extends Zm{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==gm.set)return jm(n,{code:bm.invalid_type,expected:gm.set,received:n.parsedType}),Sm;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(jm(n,{code:bm.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(jm(n,{code:bm.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function o(e){const n=new Set;for(const r of e){if("aborted"===r.status)return Sm;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map(((e,t)=>i._parse(new Dm(n,e,n.path,t))));return n.common.async?Promise.all(a).then((e=>o(e))):o(a)}min(e,t){return new gb({...this._def,minSize:{value:e,message:Rm.toString(t)}})}max(e,t){return new gb({...this._def,maxSize:{value:e,message:Rm.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}gb.create=(e,t)=>new gb({valueType:e,minSize:null,maxSize:null,typeName:zb.ZodSet,...zm(t)});class mb extends Zm{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==gm.function)return jm(t,{code:bm.invalid_type,expected:gm.function,received:t.parsedType}),Sm;function n(e,n){return Om({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,km(),_m].filter((e=>!!e)),issueData:{code:bm.invalid_arguments,argumentsError:n}})}function r(e,n){return Om({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,km(),_m].filter((e=>!!e)),issueData:{code:bm.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Ob){const e=this;return Tm((async function(...t){const a=new wm([]),s=await e._def.args.parseAsync(t,i).catch((e=>{throw a.addIssue(n(t,e)),a})),c=await Reflect.apply(o,this,s),u=await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw a.addIssue(r(c,e)),a}));return u}))}{const e=this;return Tm((function(...t){const a=e._def.args.safeParse(t,i);if(!a.success)throw new wm([n(t,a.error)]);const s=Reflect.apply(o,this,a.data),c=e._def.returns.safeParse(s,i);if(!c.success)throw new wm([r(s,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new mb({...this._def,args:hb.create(e).rest(rb.create())})}returns(e){return new mb({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new mb({args:e||hb.create([]).rest(rb.create()),returns:t||rb.create(),typeName:zb.ZodFunction,...zm(n)})}}class bb extends Zm{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}bb.create=(e,t)=>new bb({getter:e,typeName:zb.ZodLazy,...zm(t)});class wb extends Zm{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return jm(t,{received:t.data,code:bm.invalid_literal,expected:this._def.value}),Sm}return{status:"valid",value:e.data}}get value(){return this._def.value}}function _b(e,t){return new xb({values:e,typeName:zb.ZodEnum,...zm(t)})}wb.create=(e,t)=>new wb({value:e,typeName:zb.ZodLiteral,...zm(t)});class xb extends Zm{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return jm(t,{expected:pm.joinValues(n),received:t.parsedType,code:bm.invalid_type}),Sm}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return jm(t,{received:t.data,code:bm.invalid_enum_value,options:n}),Sm}return Tm(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return xb.create(e)}exclude(e){return xb.create(this.options.filter((t=>!e.includes(t))))}}xb.create=_b;class kb extends Zm{_parse(e){const t=pm.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==gm.string&&n.parsedType!==gm.number){const e=pm.objectValues(t);return jm(n,{expected:pm.joinValues(e),received:n.parsedType,code:bm.invalid_type}),Sm}if(-1===t.indexOf(e.data)){const e=pm.objectValues(t);return jm(n,{received:n.data,code:bm.invalid_enum_value,options:e}),Sm}return Tm(e.data)}get enum(){return this._def.values}}kb.create=(e,t)=>new kb({values:e,typeName:zb.ZodNativeEnum,...zm(t)});class Ob extends Zm{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==gm.promise&&!1===t.common.async)return jm(t,{code:bm.invalid_type,expected:gm.promise,received:t.parsedType}),Sm;const n=t.parsedType===gm.promise?t.data:Promise.resolve(t.data);return Tm(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Ob.create=(e,t)=>new Ob({type:e,typeName:zb.ZodPromise,...zm(t)});class jb extends Zm{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===zb.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{jm(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n}))):this._def.schema._parseSync({data:e,path:n.path,parent:n})}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?Sm:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?Sm:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Nm(e))return e;const o=r.transform(e.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>Nm(e)?Promise.resolve(r.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}pm.assertNever(r)}}jb.create=(e,t,n)=>new jb({schema:e,typeName:zb.ZodEffects,effect:t,...zm(n)}),jb.createWithPreprocess=(e,t,n)=>new jb({schema:t,effect:{type:"preprocess",transform:e},typeName:zb.ZodEffects,...zm(n)});class Ab extends Zm{_parse(e){return this._getType(e)===gm.undefined?Tm(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ab.create=(e,t)=>new Ab({innerType:e,typeName:zb.ZodOptional,...zm(t)});class Sb extends Zm{_parse(e){return this._getType(e)===gm.null?Tm(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Sb.create=(e,t)=>new Sb({innerType:e,typeName:zb.ZodNullable,...zm(t)});class Eb extends Zm{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===gm.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Eb.create=(e,t)=>new Eb({innerType:e,typeName:zb.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...zm(t)});class Tb extends Zm{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Im(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new wm(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new wm(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Tb.create=(e,t)=>new Tb({innerType:e,typeName:zb.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...zm(t)});class Cb extends Zm{_parse(e){if(this._getType(e)!==gm.nan){const t=this._getOrReturnCtx(e);return jm(t,{code:bm.invalid_type,expected:gm.nan,received:t.parsedType}),Sm}return{status:"valid",value:e.data}}}Cb.create=e=>new Cb({typeName:zb.ZodNaN,...zm(e)});const Pb=Symbol("zod_brand");class Nb extends Zm{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ib extends Zm{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Sm:"dirty"===e.status?(t.dirty(),Em(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Sm:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Ib({in:e,out:t,typeName:zb.ZodPipeline})}}class Rb extends Zm{_parse(e){const t=this._def.innerType._parse(e);return Nm(t)&&(t.value=Object.freeze(t.value)),t}}Rb.create=(e,t)=>new Rb({innerType:e,typeName:zb.ZodReadonly,...zm(t)});const Db=(e,t={},n)=>e?nb.create().superRefine(((r,i)=>{var o,a;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,s=null===(a=null!==(o=e.fatal)&&void 0!==o?o:n)||void 0===a||a,c="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...c,fatal:s})}})):nb.create(),Mb={object:cb.lazycreate};var zb;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(zb||(zb={}));const Zb=qm.create,Vb=Ym.create,Fb=Cb.create,Lb=Hm.create,$b=Jm.create,Ub=Xm.create,Bb=Qm.create,Wb=eb.create,Kb=tb.create,qb=nb.create,Gb=rb.create,Yb=ib.create,Hb=ob.create,Jb=ab.create,Xb=cb.create,Qb=cb.strictCreate,ew=ub.create,tw=fb.create,nw=pb.create,rw=hb.create,iw=vb.create,ow=yb.create,aw=gb.create,sw=mb.create,cw=bb.create,uw=wb.create,lw=xb.create,fw=kb.create,dw=Ob.create,pw=jb.create,hw=Ab.create,vw=Sb.create,yw=jb.createWithPreprocess,gw=Ib.create,mw={string:e=>qm.create({...e,coerce:!0}),number:e=>Ym.create({...e,coerce:!0}),boolean:e=>Jm.create({...e,coerce:!0}),bigint:e=>Hm.create({...e,coerce:!0}),date:e=>Xm.create({...e,coerce:!0})},bw=Sm;var ww=Object.freeze({__proto__:null,defaultErrorMap:_m,setErrorMap:function(e){xm=e},getErrorMap:km,makeIssue:Om,EMPTY_PATH:[],addIssueToContext:jm,ParseStatus:Am,INVALID:Sm,DIRTY:Em,OK:Tm,isAborted:Cm,isDirty:Pm,isValid:Nm,isAsync:Im,get util(){return pm},get objectUtil(){return hm},ZodParsedType:gm,getParsedType:mm,ZodType:Zm,ZodString:qm,ZodNumber:Ym,ZodBigInt:Hm,ZodBoolean:Jm,ZodDate:Xm,ZodSymbol:Qm,ZodUndefined:eb,ZodNull:tb,ZodAny:nb,ZodUnknown:rb,ZodNever:ib,ZodVoid:ob,ZodArray:ab,ZodObject:cb,ZodUnion:ub,ZodDiscriminatedUnion:fb,ZodIntersection:pb,ZodTuple:hb,ZodRecord:vb,ZodMap:yb,ZodSet:gb,ZodFunction:mb,ZodLazy:bb,ZodLiteral:wb,ZodEnum:xb,ZodNativeEnum:kb,ZodPromise:Ob,ZodEffects:jb,ZodTransformer:jb,ZodOptional:Ab,ZodNullable:Sb,ZodDefault:Eb,ZodCatch:Tb,ZodNaN:Cb,BRAND:Pb,ZodBranded:Nb,ZodPipeline:Ib,ZodReadonly:Rb,custom:Db,Schema:Zm,ZodSchema:Zm,late:Mb,get ZodFirstPartyTypeKind(){return zb},coerce:mw,any:qb,array:Jb,bigint:Lb,boolean:$b,date:Ub,discriminatedUnion:tw,effect:pw,enum:lw,function:sw,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Db((t=>t instanceof e),t),intersection:nw,lazy:cw,literal:uw,map:ow,nan:Fb,nativeEnum:fw,never:Yb,null:Kb,nullable:vw,number:Vb,object:Xb,oboolean:()=>$b().optional(),onumber:()=>Vb().optional(),optional:hw,ostring:()=>Zb().optional(),pipeline:gw,preprocess:yw,promise:dw,record:iw,set:aw,strictObject:Qb,string:Zb,symbol:Bb,transformer:pw,tuple:rw,undefined:Wb,union:ew,unknown:Gb,void:Hb,NEVER:bw,ZodIssueCode:bm,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:wm});const _w=[];const xw=new Map;function kw(e){return Reflect.getPrototypeOf(e)?.constructor}function Ow(e,t,n){return e[t]=lo.wrap(e[t],n)}let jw=class extends global.Error{static stack(e,t){return new this(e,t).stack}constructor(e,t){super(e);const n=Reflect.getPrototypeOf(this).constructor;global.Error.captureStackTrace&&global.Error.captureStackTrace(this,t??n),this.name=n.name}};var Aw=Object.freeze({__proto__:null,Error:jw,bootstrap:function(e){_w.push(e)},constructor:kw,load:async function(){await Promise.all(lo.map(_w,(e=>e())))},patch:Ow,register:function(e,t){xw.set(e,t)},registry:xw});const Sw={...ww};function Ew(...e){(global.xf?.logger??console).warn(...e)}function Tw(e){if(null==e)throw new ReferenceError;return e}function Cw(e){return e}function Pw(e){return e}function Nw(e){return lo.cloneDeep(e)}function Iw(e,t=0){return lo.floor(lo.round(e,t+1),t)}function Rw(e){return e()}Ow(Sw,"instanceof",(function(e,...t){const n=e.call(this,...t);return lo.assign(n._def.effect.refinement,{type:t[0]}),n})),Ow(Sw.ZodType.prototype,"refine",(function(e,...t){const n=e.call(this,...t);return null!=t[0].data&&lo.assign(n._def.effect.refinement,{data:t[0].data}),n}));var Dw=Object.freeze({__proto__:null,bind:function(e,t){return e.bind(t)},clone:Nw,exec:Rw,exist:Tw,floor:Iw,get:function(e,t){return e[t]},immutable:Pw,maybe:Cw,mutable:function(e){return Nw(e)},normalize:function e(t){if(lo.isPlainObject(t)){const n=lo.compact(lo.map(t,((t,n)=>{const r=e(t);return null==r?null:[n,r]})));return 0===n.length?null:lo.fromPairs(lo.sortBy(n,lo.head))}return lo.isArray(t)?lo.map(t,e):""===t?null:t},prettify:function(e){return e},replace:function(e,t,n){return e===t?n:e},set:function(e,t,n){return e[t]=n,e},trap:function(e,t=!0){try{return Rw(e)}catch(e){t||Ew(e)}return null},uuid:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>lo.random(0,15).toString(16)))},warn:Ew}),Mw=Symbol.for("immer-nothing"),zw=Symbol.for("immer-draftable"),Zw=Symbol.for("immer-state"),Vw="production"!==process.env.NODE_ENV?[function(e){return`The plugin for '${e}' has not been loaded into Immer. To enable the plugin, import and call \`enable${e}()\` when initializing your application.`},function(e){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${e}'`},"This object has been frozen and should not be mutated",function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(e){return`'current' expects a draft, got: ${e}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(e){return`'original' expects a draft, got: ${e}`}]:[];function Fw(e,...t){if("production"!==process.env.NODE_ENV){const n=Vw[e],r="function"==typeof n?n.apply(null,t):n;throw new Error(`[Immer] ${r}`)}throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Lw=Object.getPrototypeOf;function $w(e){return!!e&&!!e[Zw]}function Uw(e){return!!e&&(Ww(e)||Array.isArray(e)||!!e[zw]||!!e.constructor?.[zw]||Hw(e)||Jw(e))}var Bw=Object.prototype.constructor.toString();function Ww(e){if(!e||"object"!=typeof e)return!1;const t=Lw(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Bw}function Kw(e,t){0===qw(e)?Object.entries(e).forEach((([n,r])=>{t(n,r,e)})):e.forEach(((n,r)=>t(r,n,e)))}function qw(e){const t=e[Zw];return t?t.type_:Array.isArray(e)?1:Hw(e)?2:Jw(e)?3:0}function Gw(e,t){return 2===qw(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Yw(e,t,n){const r=qw(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Hw(e){return e instanceof Map}function Jw(e){return e instanceof Set}function Xw(e){return e.copy_||e.base_}function Qw(e,t){if(Hw(e))return new Map(e);if(Jw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Ww(e)){if(!Lw(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[Zw];let r=Reflect.ownKeys(n);for(let t=0;t<r.length;t++){const i=r[t],o=n[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Lw(e),n)}function e_(e,t=!1){return n_(e)||$w(e)||!Uw(e)||(qw(e)>1&&(e.set=e.add=e.clear=e.delete=t_),Object.freeze(e),t&&Kw(e,((e,t)=>e_(t,!0)))),e}function t_(){Fw(2)}function n_(e){return Object.isFrozen(e)}var r_,i_={};function o_(e){const t=i_[e];return t||Fw(0,e),t}function a_(){return r_}function s_(e,t){t&&(o_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function c_(e){u_(e),e.drafts_.forEach(f_),e.drafts_=null}function u_(e){e===r_&&(r_=e.parent_)}function l_(e){return r_={drafts_:[],parent_:r_,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function f_(e){const t=e[Zw];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function d_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Zw].modified_&&(c_(t),Fw(4)),Uw(e)&&(e=p_(t,e),t.parent_||v_(t,e)),t.patches_&&o_("Patches").generateReplacementPatches_(n[Zw].base_,e,t.patches_,t.inversePatches_)):e=p_(t,n,[]),c_(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Mw?e:void 0}function p_(e,t,n){if(n_(t))return t;const r=t[Zw];if(!r)return Kw(t,((i,o)=>h_(e,r,t,i,o,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return v_(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,o=!1;3===r.type_&&(i=new Set(t),t.clear(),o=!0),Kw(i,((i,a)=>h_(e,r,t,i,a,n,o))),v_(e,t,!1),n&&e.patches_&&o_("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function h_(e,t,n,r,i,o,a){if("production"!==process.env.NODE_ENV&&i===n&&Fw(5),$w(i)){const a=p_(e,i,o&&t&&3!==t.type_&&!Gw(t.assigned_,r)?o.concat(r):void 0);if(Yw(n,r,a),!$w(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(Uw(i)&&!n_(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;p_(e,i),t&&t.scope_.parent_||v_(e,i)}}function v_(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&e_(t,n)}var y_={get(e,t){if(t===Zw)return e;const n=Xw(e);if(!Gw(n,t))return function(e,t,n){const r=b_(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Uw(r)?r:r===m_(e.base_,t)?(__(e),e.copy_[t]=x_(r,e)):r},has:(e,t)=>t in Xw(e),ownKeys:e=>Reflect.ownKeys(Xw(e)),set(e,t,n){const r=b_(Xw(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=m_(Xw(e),t),i=r?.[Zw];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)&&(void 0!==n||Gw(e.base_,t)))return!0;__(e),w_(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==m_(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,__(e),w_(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Xw(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Fw(11)},getPrototypeOf:e=>Lw(e.base_),setPrototypeOf(){Fw(12)}},g_={};function m_(e,t){const n=e[Zw];return(n?Xw(n):e)[t]}function b_(e,t){if(!(t in e))return;let n=Lw(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Lw(n)}}function w_(e){e.modified_||(e.modified_=!0,e.parent_&&w_(e.parent_))}function __(e){e.copy_||(e.copy_=Qw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Kw(y_,((e,t)=>{g_[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),g_.deleteProperty=function(e,t){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&Fw(13),g_.set.call(this,e,t,void 0)},g_.set=function(e,t,n){return"production"!==process.env.NODE_ENV&&"length"!==t&&isNaN(parseInt(t))&&Fw(14),y_.set.call(this,e[0],t,n,e[0])};function x_(e,t){const n=Hw(e)?o_("MapSet").proxyMap_(e,t):Jw(e)?o_("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:a_(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=y_;n&&(i=[r],o=g_);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return r.draft_=s,r.revoke_=a,s}(e,t);return(t?t.scope_:a_()).drafts_.push(n),n}function k_(e){if(!Uw(e)||n_(e))return e;const t=e[Zw];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Qw(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Qw(e,!0);return Kw(n,((e,t)=>{Yw(n,e,k_(t))})),t&&(t.finalized_=!1),n}var O_=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...i){return r.produce(e,(e=>t.call(this,e,...i)))}}let r;if("function"!=typeof t&&Fw(6),void 0!==n&&"function"!=typeof n&&Fw(7),Uw(e)){const i=l_(this),o=x_(e,void 0);let a=!0;try{r=t(o),a=!1}finally{a?c_(i):u_(i)}return s_(i,n),d_(r,i)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===Mw&&(r=void 0),this.autoFreeze_&&e_(r,!0),n){const t=[],i=[];o_("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}Fw(1,e)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;const i=this.produce(e,t,((e,t)=>{n=e,r=t}));return[i,n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Uw(e)||Fw(8),$w(e)&&(e=function(e){$w(e)||Fw(10,e);return k_(e)}(e));const t=l_(this),n=x_(e,void 0);return n[Zw].isManual_=!0,u_(t),n}finishDraft(e,t){const n=e&&e[Zw];n&&n.isManual_||Fw(9);const{scope_:r}=n;return s_(r,t),d_(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=o_("Patches").applyPatches_;return $w(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},j_=O_.produce;O_.produceWithPatches.bind(O_);var A_=O_.setAutoFreeze.bind(O_);O_.setUseStrictShallowCopy.bind(O_),O_.applyPatches.bind(O_),O_.createDraft.bind(O_),O_.finishDraft.bind(O_);const S_=Symbol(),E_=Symbol(),T_="a",C_="w";const P_=Object.getPrototypeOf,N_=new WeakMap,I_=e=>e&&(N_.has(e)?N_.get(e):P_(e)===Object.prototype||P_(e)===Array.prototype),R_=e=>"object"==typeof e&&null!==e,D_=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach((e=>{e.configurable=!0})),Object.create(P_(e),t)},M_=e=>e[E_]||e,z_=(e,t,n,r)=>{if(!I_(e))return e;let i=r&&r.get(e);if(!i){const t=M_(e);i=(e=>Object.values(Object.getOwnPropertyDescriptors(e)).some((e=>!e.configurable&&!e.writable)))(t)?[t,D_(t)]:[t],null==r||r.set(e,i)}const[o,a]=i;let s=n&&n.get(o);return s&&s[1].f===!!a||(s=((e,t)=>{const n={f:t};let r=!1;const i=(t,i)=>{if(!r){let r=n[T_].get(e);if(r||(r={},n[T_].set(e,r)),t===C_)r[C_]=!0;else{let e=r[t];e||(e=new Set,r[t]=e),e.add(i)}}},o={get:(t,r)=>r===E_?e:(i("k",r),z_(Reflect.get(t,r),n[T_],n.c,n.t)),has:(t,o)=>o===S_?(r=!0,n[T_].delete(e),!0):(i("h",o),Reflect.has(t,o)),getOwnPropertyDescriptor:(e,t)=>(i("o",t),Reflect.getOwnPropertyDescriptor(e,t)),ownKeys:e=>(i(C_),Reflect.ownKeys(e))};return t&&(o.set=o.deleteProperty=()=>!1),[o,n]})(o,!!a),s[1].p=((e,t)=>new Proxy(e,t))(a||o,s[0]),n&&n.set(o,s)),s[1][T_]=t,s[1].c=n,s[1].t=r,s[1].p},Z_=(e,t,n,r)=>{if(Object.is(e,t))return!1;if(!R_(e)||!R_(t))return!0;const i=n.get(M_(e));if(!i)return!0;if(r){const n=r.get(e);if(n&&n.n===t)return n.g;r.set(e,{n:t,g:!1})}let o=null;try{for(const n of i.h||[])if(o=Reflect.has(e,n)!==Reflect.has(t,n),o)return o;if(!0===i[C_]){if(o=((e,t)=>{const n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);return n.length!==r.length||n.some(((e,t)=>e!==r[t]))})(e,t),o)return o}else for(const n of i.o||[])if(o=!!Reflect.getOwnPropertyDescriptor(e,n)!=!!Reflect.getOwnPropertyDescriptor(t,n),o)return o;for(const a of i.k||[])if(o=Z_(e[a],t[a],n,r),o)return o;return null===o&&(o=!0),o}finally{r&&r.set(e,{n:t,g:o})}},V_=e=>I_(e)&&e[E_]||null,F_=new WeakMap,L_=e=>"object"==typeof e&&null!==e,$_=(e,t)=>{if(!L_(e))return e;const n=V_(e);return null!==n?((e=>{I_(e)})(e),n):(t.has(e)||(t.add(e),Object.entries(e).forEach((([n,r])=>{const i=$_(r,t);Object.is(i,r)||(e[n]=i)}))),e)},U_=(e,t,n)=>{var r,i,o;if(!L_(e)||!L_(t))return;const a=n.get(V_(t)||t);a&&(null==(r=a.h)||r.forEach((t=>{Reflect.has(e,t)})),!0===a.w&&Reflect.ownKeys(e),null==(i=a.o)||i.forEach((t=>{Reflect.getOwnPropertyDescriptor(e,t)})),null==(o=a.k)||o.forEach((r=>{U_(e[r],t[r],n)})))};function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B_.apply(this,arguments)}const W_=(e,t)=>{const n=function(e,t){var n;let r=0;const i=null!=(n=null==t?void 0:t.size)?n:1,o=[],a=null!=t&&t.noWeakMap?null:new WeakMap;return t=>{const n=null==a?void 0:a.get(t);if(n)return n.r;for(let e=0;e<i;e+=1){const n=o[(r+e)%i];if(!n)break;if(!Z_(n.o,t,n.a,new WeakMap))return U_(t,n.o,n.a),null==a||a.set(t,n),n.r}const s=new WeakMap,c=z_(t,s,void 0,F_),u=$_(e(c),new Set);U_(t,t,s);const l={o:t,r:u,a:s};return r=(r-1+i)%i,o[r]=l,null==a||a.set(t,l),u}}((t=>e(...t)),B_({},t,{noWeakMap:!0}));return(...e)=>n(e)};function K_(e){return`select${lo.upperFirst(e)}`}const q_={active:null};function G_(){return q_.active}const Y_=(e,t)=>W_((t=>{const n=q_.active;try{return q_.active=t,e(t)}finally{q_.active=n}}),t);function H_(...e){const t=lo.reduce(lo.reverse(e),((e,t)=>lo.defaults(e,t)),{});return lo.each(t,(e=>J_(e))),t}function J_(e){return e[Symbol.for("xf.state.selector.nop")],e}function X_(e,t){const n=(e,t)=>(n,r)=>{let i=null;return i=i??e[r],i=i??t[r],i=i??n[r],i},r=function(e,t,i){const o=lo.fromPairs(lo.compact(lo.map(t,((n,o)=>{if(null==n)return null;return[o,r(e[o],t[o],i[o])]}))));return new Proxy(e,{get:n(o,i)})};return{wrap:n=>r(e,t,n),selector:new Map}}const Q_=new WeakMap;function ex(e,t){return Q_.set(e,t),e}function tx(e,t){return rx(e,(e=>Nw(t)))}function nx(e,t){return rx(e,(e=>lo.merge(e,t)))}function rx(e,t){const n=Q_.get(e),r=j_(e,t);return null!=n&&r!==e&&(Q_.set(r,n),n(r)),r}const ix=lo.assign(ex,{autoFreeze:A_,use:tx,set:nx,patch:rx});var ox=Object.freeze({__proto__:null});const ax={zone:0};function sx(){return Date.now()}function cx(e){return(e??new Date).getTime()}var ux=Object.freeze({__proto__:null,date:function(e,t){return e=e??new Date,t&&(e=new Date(e.getTime()+3600*ax.zone*1e3)),lo.replace(e.toISOString(),/-/g,"").slice(0,8)},diff:function(e,t){return cx(e)-cx(t)},from:function(e){return new Date(1e3*e)},load:function(e){return new Date(e??sx())},next:function(e){return 1e3*(lo.floor(e/1e3)+1)},now:sx,tick:cx,unix:function(e){return Math.floor((e??new Date).getTime()/1e3)},zone:function(e){ax.zone=e}});const lx=new Map;async function fx(e,t,n,r){const i=lo.defaults(r??{},{avg:100,min:100,max:1e3,ref:1});let o=lx.get(e);if(null==o&&lx.set(e,o={time:0,last:null,wait:[]}),0===o.wait.length){let t=o.last;const r=lo.wrap(n,(async(n,r)=>{await gx(lo.clamp(i.ref*o.time,i.min,i.max));const a=Date.now();o.wait=[];try{return o.time=Math.max(o.time,i.avg),await n(r)}finally{o.time=Math.max(o.time,Date.now()-a),o.last===t&&lx.delete(e)}}));o.last=t=r(o.wait)}const a=o.wait.length;return o.wait.push(t),(await o.last)[a]}class dx extends jw{constructor(e){super("Timeout"),this.cause=e}}class px extends jw{static wrap(e){const t=new this;return t.cause=e,t}}async function hx(e){return await new Promise(((t,n)=>{e(((e,r)=>null!=e?n(e):t(r)))}))}async function vx(e){await gx(e-Date.now())}async function yx(e,t){return await gx(e),t}async function gx(e){return new Promise((t=>{setTimeout(t,e)}))}async function mx(e){try{return await e()}catch(e){if(!(e instanceof px))throw e}return null}async function bx(e){try{return await e()}catch(e){}return null}var wx=Object.freeze({__proto__:null,InterruptedError:px,TimeoutError:dx,batch:fx,defer:async function(e){return await new Promise((e=>lo.defer(e))),await e()},delay:yx,exec:mx,interrupt:function(e){throw px.wrap(e)},poll:async function(e,t=1e3){for(;;){const n=cx(),r=await bx(e);if(null!=r)return r;await vx(n+t)}},promisify:hx,sleep:gx,till:vx,trap:bx,wait:async function(e,t,n){return await Promise.race([e,yx(t,n)])}});const _x=function(e,t){return"string"==typeof t&&"T"===t[10]&&"."===t[19]&&"Z"===t[23]?new Date(t):t};var xx=Object.freeze({__proto__:null,DateReviver:_x});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function kx(e){return null==e}var Ox={isNothing:kx,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:kx(e)?[]:[e]},repeat:function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,i,o;if(t)for(n=0,r=(o=Object.keys(t)).length;n<r;n+=1)e[i=o[n]]=t[i];return e}};function jx(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function Ax(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=jx(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Ax.prototype=Object.create(Error.prototype),Ax.prototype.constructor=Ax,Ax.prototype.toString=function(e){return this.name+": "+jx(this,e)};var Sx=Ax;function Ex(e,t,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-t>s&&(t=r-s+(o=" ... ").length),n-r>s&&(n=r+s-(a=" ...").length),{str:o+e.slice(t,n).replace(/\t/g,"→")+a,pos:r-t+o.length}}function Tx(e,t){return Ox.repeat(" ",t-e.length)+e}var Cx=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],a=-1;n=r.exec(e.buffer);)o.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var s,c,u="",l=Math.min(e.line+t.linesAfter,o.length).toString().length,f=t.maxLength-(t.indent+l+3);for(s=1;s<=t.linesBefore&&!(a-s<0);s++)c=Ex(e.buffer,i[a-s],o[a-s],e.position-(i[a]-i[a-s]),f),u=Ox.repeat(" ",t.indent)+Tx((e.line-s+1).toString(),l)+" | "+c.str+"\n"+u;for(c=Ex(e.buffer,i[a],o[a],e.position,f),u+=Ox.repeat(" ",t.indent)+Tx((e.line+1).toString(),l)+" | "+c.str+"\n",u+=Ox.repeat("-",t.indent+l+3+c.pos)+"^\n",s=1;s<=t.linesAfter&&!(a+s>=o.length);s++)c=Ex(e.buffer,i[a+s],o[a+s],e.position-(i[a]-i[a+s]),f),u+=Ox.repeat(" ",t.indent)+Tx((e.line+s+1).toString(),l)+" | "+c.str+"\n";return u.replace(/\n$/,"")},Px=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Nx=["scalar","sequence","mapping"];var Ix=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===Px.indexOf(t))throw new Sx('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===Nx.indexOf(this.kind))throw new Sx('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function Rx(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)})),n[t]=e})),n}function Dx(e){return this.extend(e)}Dx.prototype.extend=function(e){var t=[],n=[];if(e instanceof Ix)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new Sx("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof Ix))throw new Sx("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new Sx("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new Sx("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof Ix))throw new Sx("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(Dx.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=Rx(r,"implicit"),r.compiledExplicit=Rx(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var Mx=Dx,zx=new Ix("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),Zx=new Ix("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),Vx=new Ix("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),Fx=new Mx({explicit:[zx,Zx,Vx]});var Lx=new Ix("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var $x=new Ix("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Ux(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Bx(e){return 48<=e&&e<=55}function Wx(e){return 48<=e&&e<=57}var Kx=new Ix("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,r=0,i=!1;if(!n)return!1;if("-"!==(t=e[r])&&"+"!==t||(t=e[++r]),"0"===t){if(r+1===n)return!0;if("b"===(t=e[++r])){for(r++;r<n;r++)if("_"!==(t=e[r])){if("0"!==t&&"1"!==t)return!1;i=!0}return i&&"_"!==t}if("x"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!Ux(e.charCodeAt(r)))return!1;i=!0}return i&&"_"!==t}if("o"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!Bx(e.charCodeAt(r)))return!1;i=!0}return i&&"_"!==t}}if("_"===t)return!1;for(;r<n;r++)if("_"!==(t=e[r])){if(!Wx(e.charCodeAt(r)))return!1;i=!0}return!(!i||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!Ox.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),qx=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var Gx=/^[-+]?[0-9]+e/;var Yx=new Ix("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!qx.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||Ox.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ox.isNegativeZero(e))return"-0.0";return n=e.toString(10),Gx.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),Hx=Fx.extend({implicit:[Lx,$x,Kx,Yx]}),Jx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Xx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var Qx=new Ix("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==Jx.exec(e)||null!==Xx.exec(e))},construct:function(e){var t,n,r,i,o,a,s,c,u=0,l=null;if(null===(t=Jx.exec(e))&&(t=Xx.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],a=+t[5],s=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(l=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(l=-l)),c=new Date(Date.UTC(n,r,i,o,a,s,u)),l&&c.setTime(c.getTime()-l),c},instanceOf:Date,represent:function(e){return e.toISOString()}});var ek=new Ix("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),tk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var nk=new Ix("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=tk;for(n=0;n<i;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=tk,a=0,s=[];for(t=0;t<i;t++)t%4==0&&t&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(t));return 0===(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),new Uint8Array(s)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",i=0,o=e.length,a=tk;for(t=0;t<o;t++)t%3==0&&t&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+e[t];return 0===(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),rk=Object.prototype.hasOwnProperty,ik=Object.prototype.toString;var ok=new Ix("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=[],s=e;for(t=0,n=s.length;t<n;t+=1){if(r=s[t],o=!1,"[object Object]"!==ik.call(r))return!1;for(i in r)if(rk.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),ak=Object.prototype.toString;var sk=new Ix("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],"[object Object]"!==ak.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}}),ck=Object.prototype.hasOwnProperty;var uk=new Ix("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(ck.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),lk=Hx.extend({implicit:[Qx,ek],explicit:[nk,ok,sk,uk]}),fk=Object.prototype.hasOwnProperty,dk=1,pk=2,hk=3,vk=4,yk=1,gk=2,mk=3,bk=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,wk=/[\x85\u2028\u2029]/,_k=/[,\[\]\{\}]/,xk=/^(?:!|!!|![a-z\-]+!)$/i,kk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ok(e){return Object.prototype.toString.call(e)}function jk(e){return 10===e||13===e}function Ak(e){return 9===e||32===e}function Sk(e){return 9===e||32===e||10===e||13===e}function Ek(e){return 44===e||91===e||93===e||123===e||125===e}function Tk(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Ck(e){return 120===e?2:117===e?4:85===e?8:0}function Pk(e){return 48<=e&&e<=57?e-48:-1}function Nk(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function Ik(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var Rk=new Array(256),Dk=new Array(256),Mk=0;Mk<256;Mk++)Rk[Mk]=Nk(Mk)?1:0,Dk[Mk]=Nk(Mk);function zk(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||lk,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Zk(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=Cx(n),new Sx(t,n)}function Vk(e,t){throw Zk(e,t)}function Fk(e,t){e.onWarning&&e.onWarning.call(null,Zk(e,t))}var Lk={YAML:function(e,t,n){var r,i,o;null!==e.version&&Vk(e,"duplication of %YAML directive"),1!==n.length&&Vk(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Vk(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&Vk(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&Fk(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&Vk(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],xk.test(r)||Vk(e,"ill-formed tag handle (first argument) of the TAG directive"),fk.call(e.tagMap,r)&&Vk(e,'there is a previously declared suffix for "'+r+'" tag handle'),kk.test(i)||Vk(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(t){Vk(e,"tag prefix is malformed: "+i)}e.tagMap[r]=i}};function $k(e,t,n,r){var i,o,a,s;if(t<n){if(s=e.input.slice(t,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||Vk(e,"expected valid JSON character");else bk.test(s)&&Vk(e,"the stream contains non-printable characters");e.result+=s}}function Uk(e,t,n,r){var i,o,a,s;for(Ox.isObject(n)||Vk(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(n)).length;a<s;a+=1)o=i[a],fk.call(t,o)||(t[o]=n[o],r[o]=!0)}function Bk(e,t,n,r,i,o,a,s,c){var u,l;if(Array.isArray(i))for(u=0,l=(i=Array.prototype.slice.call(i)).length;u<l;u+=1)Array.isArray(i[u])&&Vk(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===Ok(i[u])&&(i[u]="[object Object]");if("object"==typeof i&&"[object Object]"===Ok(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(u=0,l=o.length;u<l;u+=1)Uk(e,t,o[u],n);else Uk(e,t,o,n);else e.json||fk.call(n,i)||!fk.call(t,i)||(e.line=a||e.line,e.lineStart=s||e.lineStart,e.position=c||e.position,Vk(e,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function Wk(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):Vk(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Kk(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);0!==i;){for(;Ak(i);)9===i&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!jk(i))break;for(Wk(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&Fk(e,"deficient indentation"),r}function qk(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!Sk(t)))}function Gk(e,t){1===t?e.result+=" ":t>1&&(e.result+=Ox.repeat("\n",t-1))}function Yk(e,t){var n,r,i=e.tag,o=e.anchor,a=[],s=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,Vk(e,"tab characters must not be used in indentation")),45===r)&&Sk(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,Kk(e,!0,-1)&&e.lineIndent<=t)a.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,Xk(e,t,hk,!1,!0),a.push(e.result),Kk(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)Vk(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=i,e.anchor=o,e.kind="sequence",e.result=a,!0)}function Hk(e){var t,n,r,i,o=!1,a=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&Vk(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(o=!0,i=e.input.charCodeAt(++e.position)):33===i?(a=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,o){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):Vk(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!Sk(i);)33===i&&(a?Vk(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),xk.test(n)||Vk(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),_k.test(r)&&Vk(e,"tag suffix cannot contain flow indicator characters")}r&&!kk.test(r)&&Vk(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(t){Vk(e,"tag name is malformed: "+r)}return o?e.tag=r:fk.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:Vk(e,'undeclared tag handle "'+n+'"'),!0}function Jk(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&Vk(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!Sk(n)&&!Ek(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Vk(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Xk(e,t,n,r,i){var o,a,s,c,u,l,f,d,p,h=1,v=!1,y=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=vk===n||hk===n,r&&Kk(e,!0,-1)&&(v=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),1===h)for(;Hk(e)||Jk(e);)Kk(e,!0,-1)?(v=!0,s=o,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):s=!1;if(s&&(s=v||i),1!==h&&vk!==n||(d=dk===n||pk===n?t:t+1,p=e.position-e.lineStart,1===h?s&&(Yk(e,p)||function(e,t,n){var r,i,o,a,s,c,u,l=e.tag,f=e.anchor,d={},p=Object.create(null),h=null,v=null,y=null,g=!1,m=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),u=e.input.charCodeAt(e.position);0!==u;){if(g||-1===e.firstTabInLine||(e.position=e.firstTabInLine,Vk(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,63!==u&&58!==u||!Sk(r)){if(a=e.line,s=e.lineStart,c=e.position,!Xk(e,n,pk,!1,!0))break;if(e.line===o){for(u=e.input.charCodeAt(e.position);Ak(u);)u=e.input.charCodeAt(++e.position);if(58===u)Sk(u=e.input.charCodeAt(++e.position))||Vk(e,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(Bk(e,d,p,h,v,null,a,s,c),h=v=y=null),m=!0,g=!1,i=!1,h=e.tag,v=e.result;else{if(!m)return e.tag=l,e.anchor=f,!0;Vk(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!m)return e.tag=l,e.anchor=f,!0;Vk(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===u?(g&&(Bk(e,d,p,h,v,null,a,s,c),h=v=y=null),m=!0,g=!0,i=!0):g?(g=!1,i=!0):Vk(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,u=r;if((e.line===o||e.lineIndent>t)&&(g&&(a=e.line,s=e.lineStart,c=e.position),Xk(e,t,vk,!0,i)&&(g?v=e.result:y=e.result),g||(Bk(e,d,p,h,v,y,a,s,c),h=v=y=null),Kk(e,!0,-1),u=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&0!==u)Vk(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return g&&Bk(e,d,p,h,v,null,a,s,c),m&&(e.tag=l,e.anchor=f,e.kind="mapping",e.result=d),m}(e,p,d))||function(e,t){var n,r,i,o,a,s,c,u,l,f,d,p,h=!0,v=e.tag,y=e.anchor,g=Object.create(null);if(91===(p=e.input.charCodeAt(e.position)))a=93,u=!1,o=[];else{if(123!==p)return!1;a=125,u=!0,o={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),p=e.input.charCodeAt(++e.position);0!==p;){if(Kk(e,!0,t),(p=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=v,e.anchor=y,e.kind=u?"mapping":"sequence",e.result=o,!0;h?44===p&&Vk(e,"expected the node content, but found ','"):Vk(e,"missed comma between flow collection entries"),d=null,s=c=!1,63===p&&Sk(e.input.charCodeAt(e.position+1))&&(s=c=!0,e.position++,Kk(e,!0,t)),n=e.line,r=e.lineStart,i=e.position,Xk(e,t,dk,!1,!0),f=e.tag,l=e.result,Kk(e,!0,t),p=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==p||(s=!0,p=e.input.charCodeAt(++e.position),Kk(e,!0,t),Xk(e,t,dk,!1,!0),d=e.result),u?Bk(e,o,g,f,l,d,n,r,i):s?o.push(Bk(e,null,g,f,l,d,n,r,i)):o.push(l),Kk(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(h=!0,p=e.input.charCodeAt(++e.position)):h=!1}Vk(e,"unexpected end of the stream within a flow collection")}(e,d)?y=!0:(a&&function(e,t){var n,r,i,o,a=yk,s=!1,c=!1,u=t,l=0,f=!1;if(124===(o=e.input.charCodeAt(e.position)))r=!1;else{if(62!==o)return!1;r=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)yk===a?a=43===o?mk:gk:Vk(e,"repeat of a chomping mode identifier");else{if(!((i=Pk(o))>=0))break;0===i?Vk(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?Vk(e,"repeat of an indentation width identifier"):(u=t+i-1,c=!0)}if(Ak(o)){do{o=e.input.charCodeAt(++e.position)}while(Ak(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!jk(o)&&0!==o)}for(;0!==o;){for(Wk(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!c||e.lineIndent<u)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>u&&(u=e.lineIndent),jk(o))l++;else{if(e.lineIndent<u){a===mk?e.result+=Ox.repeat("\n",s?1+l:l):a===yk&&s&&(e.result+="\n");break}for(r?Ak(o)?(f=!0,e.result+=Ox.repeat("\n",s?1+l:l)):f?(f=!1,e.result+=Ox.repeat("\n",l+1)):0===l?s&&(e.result+=" "):e.result+=Ox.repeat("\n",l):e.result+=Ox.repeat("\n",s?1+l:l),s=!0,c=!0,l=0,n=e.position;!jk(o)&&0!==o;)o=e.input.charCodeAt(++e.position);$k(e,n,e.position,!1)}}return!0}(e,d)||function(e,t){var n,r,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if($k(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,i=e.position}else jk(n)?($k(e,r,i,!0),Gk(e,Kk(e,!1,t)),r=i=e.position):e.position===e.lineStart&&qk(e)?Vk(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Vk(e,"unexpected end of the stream within a single quoted scalar")}(e,d)||function(e,t){var n,r,i,o,a,s;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return $k(e,n,e.position,!0),e.position++,!0;if(92===s){if($k(e,n,e.position,!0),jk(s=e.input.charCodeAt(++e.position)))Kk(e,!1,t);else if(s<256&&Rk[s])e.result+=Dk[s],e.position++;else if((a=Ck(s))>0){for(i=a,o=0;i>0;i--)(a=Tk(s=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+a:Vk(e,"expected hexadecimal character");e.result+=Ik(o),e.position++}else Vk(e,"unknown escape sequence");n=r=e.position}else jk(s)?($k(e,n,r,!0),Gk(e,Kk(e,!1,t)),n=r=e.position):e.position===e.lineStart&&qk(e)?Vk(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Vk(e,"unexpected end of the stream within a double quoted scalar")}(e,d)?y=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!Sk(r)&&!Ek(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Vk(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),fk.call(e.anchorMap,n)||Vk(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Kk(e,!0,-1),!0}(e)?function(e,t,n){var r,i,o,a,s,c,u,l,f=e.kind,d=e.result;if(Sk(l=e.input.charCodeAt(e.position))||Ek(l)||35===l||38===l||42===l||33===l||124===l||62===l||39===l||34===l||37===l||64===l||96===l)return!1;if((63===l||45===l)&&(Sk(r=e.input.charCodeAt(e.position+1))||n&&Ek(r)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,a=!1;0!==l;){if(58===l){if(Sk(r=e.input.charCodeAt(e.position+1))||n&&Ek(r))break}else if(35===l){if(Sk(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&qk(e)||n&&Ek(l))break;if(jk(l)){if(s=e.line,c=e.lineStart,u=e.lineIndent,Kk(e,!1,-1),e.lineIndent>=t){a=!0,l=e.input.charCodeAt(e.position);continue}e.position=o,e.line=s,e.lineStart=c,e.lineIndent=u;break}}a&&($k(e,i,o,!1),Gk(e,e.line-s),i=o=e.position,a=!1),Ak(l)||(o=e.position+1),l=e.input.charCodeAt(++e.position)}return $k(e,i,o,!1),!!e.result||(e.kind=f,e.result=d,!1)}(e,d,dk===n)&&(y=!0,null===e.tag&&(e.tag="?")):(y=!0,null===e.tag&&null===e.anchor||Vk(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===h&&(y=s&&Yk(e,p))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&Vk(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,u=e.implicitTypes.length;c<u;c+=1)if((f=e.implicitTypes[c]).resolve(e.result)){e.result=f.construct(e.result),e.tag=f.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(fk.call(e.typeMap[e.kind||"fallback"],e.tag))f=e.typeMap[e.kind||"fallback"][e.tag];else for(f=null,c=0,u=(l=e.typeMap.multi[e.kind||"fallback"]).length;c<u;c+=1)if(e.tag.slice(0,l[c].tag.length)===l[c].tag){f=l[c];break}f||Vk(e,"unknown tag !<"+e.tag+">"),null!==e.result&&f.kind!==e.kind&&Vk(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+f.kind+'", not "'+e.kind+'"'),f.resolve(e.result,e.tag)?(e.result=f.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):Vk(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||y}function Qk(e){var t,n,r,i,o=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(i=e.input.charCodeAt(e.position))&&(Kk(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(a=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!Sk(i);)i=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&Vk(e,"directive name must not be less than one character in length");0!==i;){for(;Ak(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!jk(i));break}if(jk(i))break;for(t=e.position;0!==i&&!Sk(i);)i=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==i&&Wk(e),fk.call(Lk,n)?Lk[n](e,n,r):Fk(e,'unknown document directive "'+n+'"')}Kk(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,Kk(e,!0,-1)):a&&Vk(e,"directives end mark is expected"),Xk(e,e.lineIndent-1,vk,!1,!0),Kk(e,!0,-1),e.checkLineBreaks&&wk.test(e.input.slice(o,e.position))&&Fk(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&qk(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,Kk(e,!0,-1)):e.position<e.length-1&&Vk(e,"end of the stream or a document separator is expected")}function eO(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new zk(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,Vk(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Qk(n);return n.documents}var tO={loadAll:function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var r=eO(e,n);if("function"!=typeof t)return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])},load:function(e,t){var n=eO(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new Sx("expected a single document in the stream, but found more")}}},nO=Object.prototype.toString,rO=Object.prototype.hasOwnProperty,iO=65279,oO=9,aO=10,sO=13,cO=32,uO=33,lO=34,fO=35,dO=37,pO=38,hO=39,vO=42,yO=44,gO=45,mO=58,bO=61,wO=62,_O=63,xO=64,kO=91,OO=93,jO=96,AO=123,SO=124,EO=125,TO={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},CO=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],PO=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function NO(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new Sx("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+Ox.repeat("0",r-t.length)+t}var IO=1,RO=2;function DO(e){this.schema=e.schema||lk,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ox.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,i,o,a,s,c;if(null===t)return{};for(n={},i=0,o=(r=Object.keys(t)).length;i<o;i+=1)a=r[i],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(c=e.compiledTypeMap.fallback[a])&&rO.call(c.styleAliases,s)&&(s=c.styleAliases[s]),n[a]=s;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?RO:IO,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function MO(e,t){for(var n,r=Ox.repeat(" ",t),i=0,o=-1,a="",s=e.length;i<s;)-1===(o=e.indexOf("\n",i))?(n=e.slice(i),i=s):(n=e.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function zO(e,t){return"\n"+Ox.repeat(" ",e.indent*t)}function ZO(e){return e===cO||e===oO}function VO(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==iO||65536<=e&&e<=1114111}function FO(e){return VO(e)&&e!==iO&&e!==sO&&e!==aO}function LO(e,t,n){var r=FO(e),i=r&&!ZO(e);return(n?r:r&&e!==yO&&e!==kO&&e!==OO&&e!==AO&&e!==EO)&&e!==fO&&!(t===mO&&!i)||FO(t)&&!ZO(t)&&e===fO||t===mO&&i}function $O(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function UO(e){return/^\n* /.test(e)}var BO=1,WO=2,KO=3,qO=4,GO=5;function YO(e,t,n,r,i,o,a,s){var c,u=0,l=null,f=!1,d=!1,p=-1!==r,h=-1,v=function(e){return VO(e)&&e!==iO&&!ZO(e)&&e!==gO&&e!==_O&&e!==mO&&e!==yO&&e!==kO&&e!==OO&&e!==AO&&e!==EO&&e!==fO&&e!==pO&&e!==vO&&e!==uO&&e!==SO&&e!==bO&&e!==wO&&e!==hO&&e!==lO&&e!==dO&&e!==xO&&e!==jO}($O(e,0))&&function(e){return!ZO(e)&&e!==mO}($O(e,e.length-1));if(t||a)for(c=0;c<e.length;u>=65536?c+=2:c++){if(!VO(u=$O(e,c)))return GO;v=v&&LO(u,l,s),l=u}else{for(c=0;c<e.length;u>=65536?c+=2:c++){if((u=$O(e,c))===aO)f=!0,p&&(d=d||c-h-1>r&&" "!==e[h+1],h=c);else if(!VO(u))return GO;v=v&&LO(u,l,s),l=u}d=d||p&&c-h-1>r&&" "!==e[h+1]}return f||d?n>9&&UO(e)?GO:a?o===RO?GO:WO:d?qO:KO:!v||a||i(e)?o===RO?GO:WO:BO}function HO(e,t,n,r,i){e.dump=function(){if(0===t.length)return e.quotingType===RO?'""':"''";if(!e.noCompatMode&&(-1!==CO.indexOf(t)||PO.test(t)))return e.quotingType===RO?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),s=r||e.flowLevel>-1&&n>=e.flowLevel;switch(YO(t,s,e.indent,a,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!r,i)){case BO:return t;case WO:return"'"+t.replace(/'/g,"''")+"'";case KO:return"|"+JO(t,e.indent)+XO(MO(t,o));case qO:return">"+JO(t,e.indent)+XO(MO(function(e,t){var n,r,i=/(\n+)([^\n]*)/g,o=(s=e.indexOf("\n"),s=-1!==s?s:e.length,i.lastIndex=s,QO(e.slice(0,s),t)),a="\n"===e[0]||" "===e[0];var s;for(;r=i.exec(e);){var c=r[1],u=r[2];n=" "===u[0],o+=c+(a||n||""===u?"":"\n")+QO(u,t),a=n}return o}(t,a),o));case GO:return'"'+function(e){for(var t,n="",r=0,i=0;i<e.length;r>=65536?i+=2:i++)r=$O(e,i),!(t=TO[r])&&VO(r)?(n+=e[i],r>=65536&&(n+=e[i+1])):n+=t||NO(r);return n}(t)+'"';default:throw new Sx("impossible error: invalid scalar style")}}()}function JO(e,t){var n=UO(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function XO(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function QO(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,a=0,s=0,c="";n=i.exec(e);)(s=n.index)-o>t&&(r=a>o?a:s,c+="\n"+e.slice(o,r),o=r+1),a=s;return c+="\n",e.length-o>t&&a>o?c+=e.slice(o,a)+"\n"+e.slice(a+1):c+=e.slice(o),c.slice(1)}function ej(e,t,n,r){var i,o,a,s="",c=e.tag;for(i=0,o=n.length;i<o;i+=1)a=n[i],e.replacer&&(a=e.replacer.call(n,String(i),a)),(nj(e,t+1,a,!0,!0,!1,!0)||void 0===a&&nj(e,t+1,null,!0,!0,!1,!0))&&(r&&""===s||(s+=zO(e,t)),e.dump&&aO===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=c,e.dump=s||"[]"}function tj(e,t,n){var r,i,o,a,s,c;for(o=0,a=(i=n?e.explicitTypes:e.implicitTypes).length;o<a;o+=1)if(((s=i[o]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(n?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(c=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===nO.call(s.represent))r=s.represent(t,c);else{if(!rO.call(s.represent,c))throw new Sx("!<"+s.tag+'> tag resolver accepts not "'+c+'" style');r=s.represent[c](t,c)}e.dump=r}return!0}return!1}function nj(e,t,n,r,i,o,a){e.tag=null,e.dump=n,tj(e,n,!1)||tj(e,n,!0);var s,c=nO.call(e.dump),u=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var l,f,d="[object Object]"===c||"[object Array]"===c;if(d&&(f=-1!==(l=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||f||2!==e.indent&&t>0)&&(i=!1),f&&e.usedDuplicates[l])e.dump="*ref_"+l;else{if(d&&f&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),"[object Object]"===c)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var i,o,a,s,c,u,l="",f=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new Sx("sortKeys must be a boolean or a function");for(i=0,o=d.length;i<o;i+=1)u="",r&&""===l||(u+=zO(e,t)),s=n[a=d[i]],e.replacer&&(s=e.replacer.call(n,a,s)),nj(e,t+1,a,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&aO===e.dump.charCodeAt(0)?u+="?":u+="? "),u+=e.dump,c&&(u+=zO(e,t)),nj(e,t+1,s,!0,c)&&(e.dump&&aO===e.dump.charCodeAt(0)?u+=":":u+=": ",l+=u+=e.dump));e.tag=f,e.dump=l||"{}"}(e,t,e.dump,i),f&&(e.dump="&ref_"+l+e.dump)):(!function(e,t,n){var r,i,o,a,s,c="",u=e.tag,l=Object.keys(n);for(r=0,i=l.length;r<i;r+=1)s="",""!==c&&(s+=", "),e.condenseFlow&&(s+='"'),a=n[o=l[r]],e.replacer&&(a=e.replacer.call(n,o,a)),nj(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),nj(e,t,a,!1,!1)&&(c+=s+=e.dump));e.tag=u,e.dump="{"+c+"}"}(e,t,e.dump),f&&(e.dump="&ref_"+l+" "+e.dump));else if("[object Array]"===c)r&&0!==e.dump.length?(e.noArrayIndent&&!a&&t>0?ej(e,t-1,e.dump,i):ej(e,t,e.dump,i),f&&(e.dump="&ref_"+l+e.dump)):(!function(e,t,n){var r,i,o,a="",s=e.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),(nj(e,t,o,!1,!1)||void 0===o&&nj(e,t,null,!1,!1))&&(""!==a&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=s,e.dump="["+a+"]"}(e,t,e.dump),f&&(e.dump="&ref_"+l+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new Sx("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&HO(e,e.dump,t,o,u)}null!==e.tag&&"?"!==e.tag&&(s=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),s="!"===e.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",e.dump=s+" "+e.dump)}return!0}function rj(e,t){var n,r,i=[],o=[];for(ij(e,i,o),n=0,r=o.length;n<r;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function ij(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)ij(e[i],t,n);else for(i=0,o=(r=Object.keys(e)).length;i<o;i+=1)ij(e[r[i]],t,n)}var oj=function(e,t){var n=new DO(t=t||{});n.noRefs||rj(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),nj(n,0,r,!0,!0)?n.dump+"\n":""},aj=tO.load,sj={dump:oj}.dump;const cj=_x,uj=as((e=>aj(e))),lj=as((e=>sj(e)));var fj,dj=Object.freeze({__proto__:null,DateReviver:cj,parse:uj,stringify:lj}),pj={};fj=pj,function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(n){return function(n,r){var i,o,a,s,c,u,l,f,d,p=1,h=n.length,v="";for(o=0;o<h;o++)if("string"==typeof n[o])v+=n[o];else if("object"==typeof n[o]){if((s=n[o]).keys)for(i=r[p],a=0;a<s.keys.length;a++){if(null==i)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[a],s.keys[a-1]));i=i[s.keys[a]]}else i=s.param_no?r[s.param_no]:r[p++];if(e.not_type.test(s.type)&&e.not_primitive.test(s.type)&&i instanceof Function&&(i=i()),e.numeric_arg.test(s.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(t("[sprintf] expecting number but found %T",i));switch(e.number.test(s.type)&&(f=i>=0),s.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,s.width?parseInt(s.width):0);break;case"e":i=s.precision?parseFloat(i).toExponential(s.precision):parseFloat(i).toExponential();break;case"f":i=s.precision?parseFloat(i).toFixed(s.precision):parseFloat(i);break;case"g":i=s.precision?String(Number(i.toPrecision(s.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=s.precision?i.substring(0,s.precision):i;break;case"t":i=String(!!i),i=s.precision?i.substring(0,s.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=s.precision?i.substring(0,s.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=s.precision?i.substring(0,s.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}e.json.test(s.type)?v+=i:(!e.number.test(s.type)||f&&!s.sign?d="":(d=f?"+":"-",i=i.toString().replace(e.sign,"")),u=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",l=s.width-(d+i).length,c=s.width&&l>0?u.repeat(l):"",v+=s.align?d+i+c:"0"===u?d+c+i:c+d+i)}return v}(function(t){if(r[t])return r[t];for(var n,i=t,o=[],a=0;i;){if(null!==(n=e.text.exec(i)))o.push(n[0]);else if(null!==(n=e.modulo.exec(i)))o.push("%");else{if(null===(n=e.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){a|=1;var s=[],c=n[2],u=[];if(null===(u=e.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(u[1]);""!==(c=c.substring(u[0].length));)if(null!==(u=e.key_access.exec(c)))s.push(u[1]);else{if(null===(u=e.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(u[1])}n[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}i=i.substring(n[0].length)}return r[t]=o}(n),arguments)}function n(e,n){return t.apply(null,[e].concat(n||[]))}var r=Object.create(null);fj.sprintf=t,fj.vsprintf=n,"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=n)}();var hj=Object.freeze({__proto__:null,format:function(e,...t){return e=(e=e.replace(/%/g,"%%")).replace(/\{\{.*?\}\}|(\{)(.*?)(\})/g,((e,t,n,r)=>{if(null==t&&null==r)return e.slice(1,-1);let[i,o]=lo.defaults(lo.split(n,":"),["",""]);return""!==i&&(i=/^\d$/.test(i)?`${i}$`:`(${i})`),""===o&&(o="s"),`%${i}${o}`})),pj.sprintf(e,...t)},normalize:function(e){return e.replace(/\{\{.*?\}\}|(\{)(.*?)(\})/g,((e,t,n,r)=>null==t&&null==r?e.slice(1,-1):"?"))}});function vj(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("production"!==process.env.NODE_ENV){var i=rA[e],o=i?"function"==typeof i?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function yj(e){return!!e&&!!e[nA]}function gj(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===iA}(e)||Array.isArray(e)||!!e[tA]||!!(null===(t=e.constructor)||void 0===t?void 0:t[tA])||kj(e)||Oj(e))}function mj(e,t,n){void 0===n&&(n=!1),0===bj(e)?(n?Object.keys:oA)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function bj(e){var t=e[nA];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:kj(e)?2:Oj(e)?3:0}function wj(e,t){return 2===bj(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _j(e,t,n){var r=bj(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function xj(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function kj(e){return Jj&&e instanceof Map}function Oj(e){return Xj&&e instanceof Set}function jj(e){return e.o||e.t}function Aj(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=aA(e);delete t[nA];for(var n=oA(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Sj(e,t){return void 0===t&&(t=!1),Tj(e)||yj(e)||!gj(e)||(bj(e)>1&&(e.set=e.add=e.clear=e.delete=Ej),Object.freeze(e),t&&mj(e,(function(e,t){return Sj(t,!0)}),!0)),e}function Ej(){vj(2)}function Tj(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Cj(e){var t=sA[e];return t||vj(18,e),t}function Pj(){return"production"===process.env.NODE_ENV||Yj||vj(0),Yj}function Nj(e,t){t&&(Cj("Patches"),e.u=[],e.s=[],e.v=t)}function Ij(e){Rj(e),e.p.forEach(Mj),e.p=null}function Rj(e){e===Yj&&(Yj=e.l)}function Dj(e){return Yj={p:[],l:Yj,h:e,m:!0,_:0}}function Mj(e){var t=e[nA];0===t.i||1===t.i?t.j():t.g=!0}function zj(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||Cj("ES5").S(t,e,r),r?(n[nA].P&&(Ij(t),vj(4)),gj(e)&&(e=Zj(t,e),t.l||Fj(t,e)),t.u&&Cj("Patches").M(n[nA].t,e,t.u,t.s)):e=Zj(t,n,[]),Ij(t),t.u&&t.v(t.u,t.s),e!==eA?e:void 0}function Zj(e,t,n){if(Tj(t))return t;var r=t[nA];if(!r)return mj(t,(function(i,o){return Vj(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Fj(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Aj(r.k):r.o,o=i,a=!1;3===r.i&&(o=new Set(i),i.clear(),a=!0),mj(o,(function(t,o){return Vj(e,r,i,t,o,n,a)})),Fj(e,i,!1),n&&e.u&&Cj("Patches").N(r,n,e.u,e.s)}return r.o}function Vj(e,t,n,r,i,o,a){if("production"!==process.env.NODE_ENV&&i===n&&vj(5),yj(i)){var s=Zj(e,i,o&&t&&3!==t.i&&!wj(t.R,r)?o.concat(r):void 0);if(_j(n,r,s),!yj(s))return;e.m=!1}else a&&n.add(i);if(gj(i)&&!Tj(i)){if(!e.h.D&&e._<1)return;Zj(e,i),t&&t.A.l||Fj(e,i)}}function Fj(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&Sj(t,n)}function Lj(e,t){var n=e[nA];return(n?jj(n):e)[t]}function $j(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Uj(e){e.P||(e.P=!0,e.l&&Uj(e.l))}function Bj(e){e.o||(e.o=Aj(e.t))}function Wj(e,t,n){var r=kj(t)?Cj("MapSet").F(t,n):Oj(t)?Cj("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Pj(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=cA;n&&(i=[r],o=uA);var a=Proxy.revocable(i,o),s=a.revoke,c=a.proxy;return r.k=c,r.j=s,c}(t,n):Cj("ES5").J(t,n);return(n?n.A:Pj()).p.push(r),r}function Kj(e){return yj(e)||vj(22,e),function e(t){if(!gj(t))return t;var n,r=t[nA],i=bj(t);if(r){if(!r.P&&(r.i<4||!Cj("ES5").K(r)))return r.t;r.I=!0,n=qj(t,i),r.I=!1}else n=qj(t,i);return mj(n,(function(t,i){r&&function(e,t){return 2===bj(e)?e.get(t):e[t]}(r.t,t)===i||_j(n,t,e(i))})),3===i?new Set(n):n}(e)}function qj(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Aj(e)}var Gj,Yj,Hj="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Jj="undefined"!=typeof Map,Xj="undefined"!=typeof Set,Qj="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,eA=Hj?Symbol.for("immer-nothing"):((Gj={})["immer-nothing"]=!0,Gj),tA=Hj?Symbol.for("immer-draftable"):"__$immer_draftable",nA=Hj?Symbol.for("immer-state"):"__$immer_state",rA={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},iA=""+Object.prototype.constructor,oA="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,aA=Object.getOwnPropertyDescriptors||function(e){var t={};return oA(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},sA={},cA={get:function(e,t){if(t===nA)return e;var n=jj(e);if(!wj(n,t))return function(e,t,n){var r,i=$j(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!gj(r)?r:r===Lj(e.t,t)?(Bj(e),e.o[t]=Wj(e.A.h,r,e)):r},has:function(e,t){return t in jj(e)},ownKeys:function(e){return Reflect.ownKeys(jj(e))},set:function(e,t,n){var r=$j(jj(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Lj(jj(e),t),o=null==i?void 0:i[nA];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(xj(n,i)&&(void 0!==n||wj(e.t,t)))return!0;Bj(e),Uj(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Lj(e.t,t)||t in e.t?(e.R[t]=!1,Bj(e),Uj(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=jj(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){vj(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){vj(12)}},uA={};mj(cA,(function(e,t){uA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),uA.deleteProperty=function(e,t){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&vj(13),uA.set.call(this,e,t,void 0)},uA.set=function(e,t,n){return"production"!==process.env.NODE_ENV&&"length"!==t&&isNaN(parseInt(t))&&vj(14),cA.set.call(this,e[0],t,n,e[0])};var lA=function(){function e(e){var t=this;this.O=Qj,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&vj(6),void 0!==r&&"function"!=typeof r&&vj(7),gj(e)){var s=Dj(t),c=Wj(t,e,void 0),u=!0;try{a=n(c),u=!1}finally{u?Ij(s):Rj(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return Nj(s,r),zj(e,s)}),(function(e){throw Ij(s),e})):(Nj(s,r),zj(a,s))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===eA&&(a=void 0),t.D&&Sj(a,!0),r){var l=[],f=[];Cj("Patches").M(e,a,l,f),r(l,f)}return a}vj(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){gj(e)||vj(8),yj(e)&&(e=Kj(e));var t=Dj(this),n=Wj(this,e,void 0);return n[nA].C=!0,Rj(t),n},t.finishDraft=function(e,t){var n=e&&e[nA];"production"!==process.env.NODE_ENV&&(n&&n.C||vj(9),n.I&&vj(10));var r=n.A;return Nj(r,t),zj(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Qj&&vj(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Cj("Patches").$;return yj(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),fA=new lA,dA=fA.produce;function pA(e){return pA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pA(e)}function hA(e){var t=function(e,t){if("object"!==pA(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pA(t)?t:String(t)}function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vA(Object(n),!0).forEach((function(t){var r,i,o;r=e,i=t,o=n[t],(i=hA(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gA(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}fA.produceWithPatches.bind(fA),fA.setAutoFreeze.bind(fA),fA.setUseProxies.bind(fA),fA.applyPatches.bind(fA),fA.createDraft.bind(fA),fA.finishDraft.bind(fA);var mA="function"==typeof Symbol&&Symbol.observable||"@@observable",bA=function(){return Math.random().toString(36).substring(7).split("").join(".")},wA={INIT:"@@redux/INIT"+bA(),REPLACE:"@@redux/REPLACE"+bA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+bA()}};function _A(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function xA(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;switch(t){case"boolean":case"string":case"number":case"symbol":case"function":return t}if(Array.isArray(e))return"array";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";var n=function(e){return"function"==typeof e.constructor?e.constructor.name:null}(e);switch(n){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return n}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")}function kA(e){var t=typeof e;return"production"!==process.env.NODE_ENV&&(t=xA(e)),t}function OA(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("production"===process.env.NODE_ENV?gA(0):"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("production"===process.env.NODE_ENV?gA(1):"Expected the enhancer to be a function. Instead, received: '"+kA(n)+"'");return n(OA)(e,t)}if("function"!=typeof e)throw new Error("production"===process.env.NODE_ENV?gA(2):"Expected the root reducer to be a function. Instead, received: '"+kA(e)+"'");var i=e,o=t,a=[],s=a,c=!1;function u(){s===a&&(s=a.slice())}function l(){if(c)throw new Error("production"===process.env.NODE_ENV?gA(3):"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function f(e){if("function"!=typeof e)throw new Error("production"===process.env.NODE_ENV?gA(4):"Expected the listener to be a function. Instead, received: '"+kA(e)+"'");if(c)throw new Error("production"===process.env.NODE_ENV?gA(5):"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var t=!0;return u(),s.push(e),function(){if(t){if(c)throw new Error("production"===process.env.NODE_ENV?gA(6):"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");t=!1,u();var n=s.indexOf(e);s.splice(n,1),a=null}}}function d(e){if(!_A(e))throw new Error("production"===process.env.NODE_ENV?gA(7):"Actions must be plain objects. Instead, the actual type was: '"+kA(e)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(void 0===e.type)throw new Error("production"===process.env.NODE_ENV?gA(8):'Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(c)throw new Error("production"===process.env.NODE_ENV?gA(9):"Reducers may not dispatch actions.");try{c=!0,o=i(o,e)}finally{c=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:wA.INIT}),(r={dispatch:d,subscribe:f,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("production"===process.env.NODE_ENV?gA(10):"Expected the nextReducer to be a function. Instead, received: '"+kA(e));i=e,d({type:wA.REPLACE})}})[mA]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error("production"===process.env.NODE_ENV?gA(11):"Expected the observer to be an object. Instead, received: '"+kA(e)+"'");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[mA]=function(){return this},e},r}function jA(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function AA(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"production"!==process.env.NODE_ENV&&void 0===e[i]&&jA('No reducer provided for key "'+i+'"'),"function"==typeof e[i]&&(n[i]=e[i])}var o,a,s=Object.keys(n);"production"!==process.env.NODE_ENV&&(o={});try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:wA.INIT}))throw new Error("production"===process.env.NODE_ENV?gA(12):'The slice reducer for key "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:wA.PROBE_UNKNOWN_ACTION()}))throw new Error("production"===process.env.NODE_ENV?gA(13):'The slice reducer for key "'+t+"\" returned undefined when probed with a random type. Don't try to handle '"+wA.INIT+'\' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;if("production"!==process.env.NODE_ENV){var r=function(e,t,n,r){var i=Object.keys(t),o=n&&n.type===wA.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===i.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!_A(e))return"The "+o+' has unexpected type of "'+kA(e)+'". Expected argument to be an object with the following keys: "'+i.join('", "')+'"';var a=Object.keys(e).filter((function(e){return!t.hasOwnProperty(e)&&!r[e]}));return a.forEach((function(e){r[e]=!0})),n&&n.type===wA.REPLACE?void 0:a.length>0?"Unexpected "+(a.length>1?"keys":"key")+' "'+a.join('", "')+'" found in '+o+'. Expected to find one of the known reducer keys instead: "'+i.join('", "')+'". Unexpected keys will be ignored.':void 0}(e,n,t,o);r&&jA(r)}for(var i=!1,c={},u=0;u<s.length;u++){var l=s[u],f=n[l],d=e[l],p=f(d,t);if(void 0===p){var h=t&&t.type;throw new Error("production"===process.env.NODE_ENV?gA(14):"When called with an action of type "+(h?'"'+String(h)+'"':"(unknown type)")+', the slice reducer for key "'+l+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.')}c[l]=p,i=i||p!==d}return(i=i||s.length!==Object.keys(e).length)?c:e}}function SA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function EA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("production"===process.env.NODE_ENV?gA(15):"Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=SA.apply(void 0,o)(n.dispatch),yA(yA({},n),{},{dispatch:r})}}}function TA(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var CA=TA();CA.withExtraArgument=TA;var PA=CA,NA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),IA=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},RA=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},DA=Object.defineProperty,MA=Object.defineProperties,zA=Object.getOwnPropertyDescriptors,ZA=Object.getOwnPropertySymbols,VA=Object.prototype.hasOwnProperty,FA=Object.prototype.propertyIsEnumerable,LA=function(e,t,n){return t in e?DA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},$A=function(e,t){for(var n in t||(t={}))VA.call(t,n)&&LA(e,n,t[n]);if(ZA)for(var r=0,i=ZA(t);r<i.length;r++){n=i[r];FA.call(t,n)&&LA(e,n,t[n])}return e},UA=function(e,t){return MA(e,zA(t))},BA="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?SA:SA.apply(null,arguments)};function WA(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}function KA(e,t){var n=0;return{measureTime:function(e){var t=Date.now();try{return e()}finally{var r=Date.now();n+=r-t}},warnIfExceeded:function(){n>e&&console.warn(t+" took "+n+"ms, which is more than the warning threshold of "+e+"ms. \nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\nIt is disabled in production builds, so you don't need to worry about that.")}}}var qA=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return NA(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,RA([void 0],e[0].concat(this)))):new(t.bind.apply(t,RA([void 0],e.concat(this))))},t}(Array),GA=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return NA(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,RA([void 0],e[0].concat(this)))):new(t.bind.apply(t,RA([void 0],e.concat(this))))},t}(Array);function YA(e){return gj(e)?dA(e,(function(){})):e}var HA="production"===process.env.NODE_ENV,JA="Invariant failed";function XA(e,t){if(!e){if(HA)throw new Error(JA);throw new Error(JA+": "+(t||""))}}function QA(e,t,n,r){return JSON.stringify(e,function(e,t){var n=[],r=[];t||(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"});return function(i,o){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?r.splice(a,1/0,i):r.push(i),~n.indexOf(o)&&(o=t.call(this,i,o))}else n.push(o);return null==e?o:e.call(this,i,o)}}(t,r),n)}function eS(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function tS(e,t,n){var r=nS(e,t,n);return{detectMutations:function(){return rS(e,t,r,n)}}}function nS(e,t,n,r){void 0===t&&(t=[]),void 0===r&&(r="");var i={value:n};if(!e(n))for(var o in i.children={},n){var a=r?r+"."+o:o;t.length&&-1!==t.indexOf(a)||(i.children[o]=nS(e,t,n[o],a))}return i}function rS(e,t,n,r,i,o){void 0===t&&(t=[]),void 0===i&&(i=!1),void 0===o&&(o="");var a=n?n.value:void 0,s=a===r;if(i&&!s&&!Number.isNaN(r))return{wasMutated:!0,path:o};if(e(a)||e(r))return{wasMutated:!1};var c={};for(var u in n.children)c[u]=!0;for(var u in r)c[u]=!0;var l=t.length>0,f=function(i){var a=o?o+"."+i:i;if(l&&t.some((function(e){return e instanceof RegExp?e.test(a):a===e})))return"continue";var c=rS(e,t,n.children[i],r[i],s,a);if(c.wasMutated)return{value:c}};for(var u in c){var d=f(u);if("object"==typeof d)return d.value}return{wasMutated:!1}}function iS(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||WA(e)}function oS(e,t,n,r,i,o){var a;if(void 0===t&&(t=""),void 0===n&&(n=iS),void 0===i&&(i=[]),!n(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e)return!1;if(null==o?void 0:o.has(e))return!1;for(var s=null!=r?r(e):Object.entries(e),c=i.length>0,u=function(e,s){var u=t?t+"."+e:e;if(c&&i.some((function(e){return e instanceof RegExp?e.test(u):u===e})))return"continue";return n(s)?"object"==typeof s&&(a=oS(s,u,n,r,i,o))?{value:a}:void 0:{value:{keyPath:u,value:s}}},l=0,f=s;l<f.length;l++){var d=f[l],p=u(d[0],d[1]);if("object"==typeof p)return p.value}return o&&aS(e)&&o.add(e),!1}function aS(e){if(!Object.isFrozen(e))return!1;for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if("object"==typeof r&&null!==r&&!aS(r))return!1}return!0}function sS(e){return"boolean"==typeof e}function cS(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=e.immutableCheck,i=void 0===r||r,o=e.serializableCheck,a=void 0===o||o,s=new qA;n&&(sS(n)?s.push(PA):s.push(PA.withExtraArgument(n.extraArgument)));if("production"!==process.env.NODE_ENV){if(i){var c={};sS(i)||(c=i),s.unshift(function(e){if(void 0===e&&(e={}),"production"===process.env.NODE_ENV)return function(){return function(e){return function(t){return e(t)}}};var t=e.isImmutable,n=void 0===t?eS:t,r=e.ignoredPaths,i=e.warnAfter,o=void 0===i?32:i,a=e.ignore;r=r||a;var s=tS.bind(null,n,r);return function(e){var t,n=e.getState,r=n(),i=s(r);return function(e){return function(a){var c=KA(o,"ImmutableStateInvariantMiddleware");c.measureTime((function(){r=n(),t=i.detectMutations(),i=s(r),XA(!t.wasMutated,"A state mutation was detected between dispatches, in the path '"+(t.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}));var u=e(a);return c.measureTime((function(){r=n(),t=i.detectMutations(),i=s(r),t.wasMutated&&XA(!t.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(t.path||"")+". Take a look at the reducer(s) handling the action "+QA(a)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")})),c.warnIfExceeded(),u}}}}(c))}if(a){var u={};sS(a)||(u=a),s.push(function(e){if(void 0===e&&(e={}),"production"===process.env.NODE_ENV)return function(){return function(e){return function(t){return e(t)}}};var t=e.isSerializable,n=void 0===t?iS:t,r=e.getEntries,i=e.ignoredActions,o=void 0===i?[]:i,a=e.ignoredActionPaths,s=void 0===a?["meta.arg","meta.baseQueryMeta"]:a,c=e.ignoredPaths,u=void 0===c?[]:c,l=e.warnAfter,f=void 0===l?32:l,d=e.ignoreState,p=void 0!==d&&d,h=e.ignoreActions,v=void 0!==h&&h,y=e.disableCache,g=void 0!==y&&y||!WeakSet?void 0:new WeakSet;return function(e){return function(t){return function(i){var a=t(i),c=KA(f,"SerializableStateInvariantMiddleware");return v||o.length&&-1!==o.indexOf(i.type)||c.measureTime((function(){var e=oS(i,"",n,r,s,g);if(e){var t=e.keyPath,o=e.value;console.error("A non-serializable value was detected in an action, in the path: `"+t+"`. Value:",o,"\nTake a look at the logic that dispatched this action: ",i,"\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)","\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)")}})),p||(c.measureTime((function(){var t=oS(e.getState(),"",n,r,u,g);if(t){var o=t.keyPath,a=t.value;console.error("A non-serializable value was detected in the state, in the path: `"+o+"`. Value:",a,"\nTake a look at the reducer(s) handling this action type: "+i.type+".\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)")}})),c.warnIfExceeded()),a}}}}(u))}}return s}(e)}}var uS="production"===process.env.NODE_ENV;function lS(e){var t,n=cS(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,c=r.devTools,u=void 0===c||c,l=r.preloadedState,f=void 0===l?void 0:l,d=r.enhancers,p=void 0===d?void 0:d;if("function"==typeof o)t=o;else{if(!WA(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=AA(o)}var h=s;if("function"==typeof h&&(h=h(n),!uS&&!Array.isArray(h)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!uS&&h.some((function(e){return"function"!=typeof e})))throw new Error("each middleware provided to configureStore must be a function");var v=EA.apply(void 0,h),y=SA;u&&(y=BA($A({trace:!uS},"object"==typeof u&&u)));var g=new GA(v),m=g;return Array.isArray(p)?m=RA([v],p):"function"==typeof p&&(m=p(g)),OA(t,f,y.apply(void 0,m))}function fS(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return $A($A({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function dS(e){var t,n={},r=[],i={addCase:function(e,o){if("production"!==process.env.NODE_ENV){if(r.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(t)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`")}var a="string"==typeof e?e:e.type;if(a in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[a]=o,i},addMatcher:function(e,n){if("production"!==process.env.NODE_ENV&&t)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return r.push({matcher:e,reducer:n}),i},addDefaultCase:function(e){if("production"!==process.env.NODE_ENV&&t)throw new Error("`builder.addDefaultCase` can only be called once");return t=e,i}};return e(i),[n,r,t]}var pS=!1;var hS=!1;function vS(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");"undefined"!=typeof process&&"development"===process.env.NODE_ENV&&void 0===e.initialState&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");var n,r="function"==typeof e.initialState?e.initialState:YA(e.initialState),i=e.reducers||{},o=Object.keys(i),a={},s={},c={};function u(){"production"!==process.env.NODE_ENV&&"object"==typeof e.extraReducers&&(hS||(hS=!0,console.warn("The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice")));var t="function"==typeof e.extraReducers?dS(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,o=t[1],a=void 0===o?[]:o,c=t[2],u=void 0===c?void 0:c,l=$A($A({},i),s);return function(e,t,n,r){void 0===n&&(n=[]),"production"!==process.env.NODE_ENV&&"object"==typeof t&&(pS||(pS=!0,console.warn("The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer")));var i,o="function"==typeof t?dS(t):[t,n,r],a=o[0],s=o[1],c=o[2];if(function(e){return"function"==typeof e}(e))i=function(){return YA(e())};else{var u=YA(e);i=function(){return u}}function l(e,t){void 0===e&&(e=i());var n=RA([a[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if(yj(e))return void 0===(r=n(e,t))?e:r;if(gj(e))return dA(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=a;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}u&&e.addDefaultCase(u)}))}return o.forEach((function(e){var n,r,o=i[e],u=function(e,t){return e+"/"+t}(t,e);"reducer"in o?(n=o.reducer,r=o.prepare):n=o,a[e]=n,s[u]=n,c[e]=r?fS(u,r):fS(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:c,caseReducers:a,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}var yS=["name","message","stack","code"],gS=function(e,t){this.payload=e,this.meta=t},mS=function(e,t){this.payload=e,this.meta=t},bS=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,r=yS;n<r.length;n++){var i=r[n];"string"==typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};function wS(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}!function(){function e(e,t,n){var r=fS(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:UA($A({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=fS(e+"/pending",(function(e,t,n){return{payload:void 0,meta:UA($A({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),o=fS(e+"/rejected",(function(e,t,r,i,o){return{payload:i,error:(n&&n.serializeError||bS)(e||"Rejected"),meta:UA($A({},o||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a=!1,s="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){"production"!==process.env.NODE_ENV&&(a||(a=!0,console.info("This platform does not implement AbortController. \nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'.")))},e}();return Object.assign((function(e){return function(a,c,u){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),d=new s;function p(e){l=e,d.abort()}var h=function(){return s=this,h=null,v=function(){var s,h,v,y,g,m;return IA(this,(function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),y=null==(s=null==n?void 0:n.condition)?void 0:s.call(n,e,{getState:c,extra:u}),null===(w=y)||"object"!=typeof w||"function"!=typeof w.then?[3,2]:[4,y];case 1:y=b.sent(),b.label=2;case 2:if(!1===y||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return g=new Promise((function(e,t){return d.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),a(i(f,e,null==(h=null==n?void 0:n.getPendingMeta)?void 0:h.call(n,{requestId:f,arg:e},{getState:c,extra:u}))),[4,Promise.race([g,Promise.resolve(t(e,{dispatch:a,getState:c,extra:u,requestId:f,signal:d.signal,abort:p,rejectWithValue:function(e,t){return new gS(e,t)},fulfillWithValue:function(e,t){return new mS(e,t)}})).then((function(t){if(t instanceof gS)throw t;return t instanceof mS?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=b.sent(),[3,5];case 4:return m=b.sent(),v=m instanceof gS?o(null,f,e,m.payload,m.meta):o(m,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(v)&&v.meta.condition||a(v),[2,v]}var w}))},new Promise((function(e,t){var n=function(e){try{i(v.next(e))}catch(e){t(e)}},r=function(e){try{i(v.throw(e))}catch(e){t(e)}},i=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(n,r)};i((v=v.apply(s,h)).next())}));var s,h,v}();return Object.assign(h,{abort:p,requestId:f,arg:e,unwrap:function(){return h.then(wS)}})}}),{pending:i,rejected:o,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();var _S,xS="listenerMiddleware";fS(xS+"/add"),fS(xS+"/removeAll"),fS(xS+"/remove"),"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:"undefined"!=typeof global?global:globalThis),function(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[nA];return"production"!==process.env.NODE_ENV&&i(t),cA.get(t,e)},set:function(t){var n=this[nA];"production"!==process.env.NODE_ENV&&i(n),cA.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][nA];if(!i.P)switch(i.i){case 5:r(i)&&Uj(i);break;case 4:n(i)&&Uj(i)}}}function n(e){for(var t=e.t,n=e.k,r=oA(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==nA){var a=t[o];if(void 0===a&&!wj(t,o))return!0;var s=n[o],c=s&&s[nA];if(c?c.t!==a:!xj(s,a))return!0}}var u=!!t[nA];return r.length!==oA(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}function i(e){e.g&&vj(3,JSON.stringify(jj(e)))}var o={};!function(e,t){sA[e]||(sA[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=aA(n);delete o[nA];for(var a=oA(o),s=0;s<a.length;s++){var c=a[s];o[c]=e(c,t||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:Pj(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,nA,{value:o,writable:!0}),i},S:function(e,n,i){i?yj(n)&&n[nA].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[nA];if(n){var i=n.t,o=n.k,a=n.R,s=n.i;if(4===s)mj(o,(function(t){t!==nA&&(void 0!==i[t]||wj(i,t)?a[t]||e(o[t]):(a[t]=!0,Uj(n)))})),mj(i,(function(e){void 0!==o[e]||wj(o,e)||(a[e]=!1,Uj(n))}));else if(5===s){if(r(n)&&(Uj(n),a.length=!0),o.length<i.length)for(var c=o.length;c<i.length;c++)a[c]=!1;else for(var u=i.length;u<o.length;u++)a[u]=!0;for(var l=Math.min(o.length,i.length),f=0;f<l;f++)o.hasOwnProperty(f)||(a[f]=!0),void 0===a[f]&&e(o[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}(),function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"}(_S||(_S={}));var kS=_S,OS=function(e,t){return OS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},OS(e,t)};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function jS(e,t){function n(){this.constructor=e}OS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function AS(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function SS(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function ES(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function TS(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function CS(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function PS(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(CS(arguments[t]));return e}var NS="injectionTokens";function IS(e){return!!e.useClass}function RS(e){return!!e.useFactory}var DS=function(){function e(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return e.prototype.createProxy=function(e){var t,n=this,r=!1;return new Proxy({},this.createHandler((function(){return r||(t=e(n.wrap()),r=!0),t})))},e.prototype.createHandler=function(e){var t={};return this.reflectMethods.forEach((function(n){t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t[0]=e(),Reflect[n].apply(void 0,PS(t))}})),t},e}();function MS(e){return"string"==typeof e||"symbol"==typeof e}function zS(e){return"object"==typeof e&&"token"in e&&"transform"in e}function ZS(e){return!!e.useToken}function VS(e){return null!=e.useValue}var FS=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.setAll=function(e,t){this._registryMap.set(e,t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}(),LS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jS(t,e),t}(FS),$S=function(){this.scopedResolutions=new Map};function US(e,t,n){var r=CS(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1],i=function(e,t){return null===e?"at position #"+t:'"'+e.split(",")[t].trim()+'" at position #'+t}(void 0===r?null:r,t);return function(e,t,n){return void 0===n&&(n="    "),PS([e],t.message.split("\n").map((function(e){return n+e}))).join("\n")}("Cannot inject the dependency "+i+' of "'+e.name+'" constructor. Reason:',n)}var BS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jS(t,e),t}(FS),WS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jS(t,e),t}(FS),KS=function(){this.preResolution=new BS,this.postResolution=new WS},qS=new Map,GS=function(){function e(e){this.parent=e,this._registry=new LS,this.interceptors=new KS,this.disposed=!1,this.disposables=new Set}return e.prototype.register=function(e,t,n){var r;if(void 0===n&&(n={lifecycle:kS.Transient}),this.ensureNotDisposed(),r=function(e){return IS(e)||VS(e)||ZS(e)||RS(e)}(t)?t:{useClass:t},ZS(r))for(var i=[e],o=r;null!=o;){var a=o.useToken;if(i.includes(a))throw new Error("Token registration cycle detected! "+PS(i,[a]).join(" -> "));i.push(a);var s=this._registry.get(a);o=s&&ZS(s.provider)?s.provider:null}if((n.lifecycle===kS.Singleton||n.lifecycle==kS.ContainerScoped||n.lifecycle==kS.ResolutionScoped)&&(VS(r)||RS(r)))throw new Error('Cannot use lifecycle "'+kS[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:n}),this},e.prototype.registerType=function(e,t){return this.ensureNotDisposed(),MS(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),MS(e)){if(MS(t))return this.register(e,{useToken:t},{lifecycle:kS.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:kS.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!MS(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:kS.Singleton})},e.prototype.resolve=function(e,t){void 0===t&&(t=new $S),this.ensureNotDisposed();var n=this.getRegistration(e);if(!n&&MS(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(function(e){return"function"==typeof e||e instanceof DS}(e)){r=this.construct(e,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(e,t){var n,r;if(this.interceptors.preResolution.has(e)){var i=[];try{for(var o=TS(this.interceptors.preResolution.getAll(e)),a=o.next();!a.done;a=o.next()){var s=a.value;"Once"!=s.options.frequency&&i.push(s),s.callback(e,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,i)}},e.prototype.executePostResolutionInterceptor=function(e,t,n){var r,i;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var a=TS(this.interceptors.postResolution.getAll(e)),s=a.next();!s.done;s=a.next()){var c=s.value;"Once"!=c.options.frequency&&o.push(c),c.callback(e,t,n)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,o)}},e.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===kS.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n,r=e.options.lifecycle===kS.Singleton,i=e.options.lifecycle===kS.ContainerScoped,o=r||i;return n=VS(e.provider)?e.provider.useValue:ZS(e.provider)?o?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):IS(e.provider)?o?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):RS(e.provider)?e.provider.useFactory(this):this.construct(e.provider,t),e.options.lifecycle===kS.ResolutionScoped&&t.scopedResolutions.set(e,n),n},e.prototype.resolveAll=function(e,t){var n=this;void 0===t&&(t=new $S),this.ensureNotDisposed();var r=this.getAllRegistrations(e);if(!r&&MS(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),r){var i=r.map((function(e){return n.resolveRegistration(e,t)}));return this.executePostResolutionInterceptor(e,i,"All"),i}var o=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,o,"All"),o},e.prototype.isRegistered=function(e,t){return void 0===t&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},e.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var n=TS(this._registry.entries()),r=n.next();!r.done;r=n.next()){var i=CS(r.value,2),o=i[0],a=i[1];this._registry.setAll(o,a.filter((function(e){return!VS(e.provider)})).map((function(e){return e.instance=void 0,e})))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.createChildContainer=function(){var t,n;this.ensureNotDisposed();var r=new e(this);try{for(var i=TS(this._registry.entries()),o=i.next();!o.done;o=i.next()){var a=CS(o.value,2),s=a[0],c=a[1];c.some((function(e){return e.options.lifecycle===kS.ContainerScoped}))&&r._registry.setAll(s,c.map((function(e){return e.options.lifecycle===kS.ContainerScoped?{provider:e.provider,options:e.options}:e})))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.beforeResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},e.prototype.afterResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},e.prototype.dispose=function(){return SS(this,void 0,void 0,(function(){var e;return ES(this,(function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach((function(t){var n=t.dispose();n&&e.push(n)})),[4,Promise.all(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e,t){var n=this;if(e instanceof DS)return e.createProxy((function(e){return n.resolve(e,t)}));var r,i=function(){var r=qS.get(e);if(!r||0===r.length){if(0===e.length)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var i=r.map(n.resolveParams(t,e));return new(e.bind.apply(e,PS([void 0],i)))}();return"function"!=typeof(r=i).dispose||r.dispose.length>0||this.disposables.add(i),i},e.prototype.resolveParams=function(e,t){var n=this;return function(r,i){var o,a,s,c;try{return"object"==typeof(c=r)&&"token"in c&&"multiple"in c?zS(r)?r.multiple?(o=n.resolve(r.transform)).transform.apply(o,PS([n.resolveAll(r.token)],r.transformArgs)):(a=n.resolve(r.transform)).transform.apply(a,PS([n.resolve(r.token,e)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,e):zS(r)?(s=n.resolve(r.transform,e)).transform.apply(s,PS([n.resolve(r.token,e)],r.transformArgs)):n.resolve(r,e)}catch(e){throw new Error(US(t,i,e))}}},e.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},e}(),YS=new GS;function HS(){return function(e){qS.set(e,function(e){var t=Reflect.getMetadata("design:paramtypes",e)||[],n=Reflect.getOwnMetadata(NS,e)||{};return Object.keys(n).forEach((function(e){t[+e]=n[e]})),t}(e))}}function JS(e,t){return function(n){HS()(n),YS.register(t||n,n,{lifecycle:e})}}if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");function XS(){return class{}}const QS=class{};class eE{static create(e){const t={promise:e,target:null,get:eE.active};return t.promise=e.then((e=>(t.target=e,t.get=eE.revoke,delete t.promise,t.target))),t}static active(e,t,n){if(t===eE.promise)return e.promise;throw new ReferenceError("the defered target has not resolved yet")}static revoke(e,t,n){return e.target[t]}}eE.promise=Symbol("interceptor");const tE=[YS],nE={constructor:{check:e=>null!=e.prototype}};const rE=Symbol.for("xf.resolve.registry"),iE=lo.assign((function(...e){if("string"==typeof e[0])return lo.last(tE).resolve(e[0]);if(nE.constructor.check(e[0])){const[t]=e;return lo.last(tE).resolve(t)}const[t]=e;return function(e){const t=e;if(null!=t&&null!=t.then&&null!=t.catch){const e=eE.create(t);return new Proxy(e,e)}return e}(t(lo.last(tE)))}),{reflect:nE,container:YS,token:XS,factory:function(e){return e},maybe:function(e){return e},meta:function(e){return"singleton"===e.scope?function(e){HS()(e),YS.registerSingleton(e)}:"container"===e.scope?JS(kS.ContainerScoped):"resolution"===e.scope?JS(kS.ResolutionScoped):HS()},register:function(e){return function(t){YS.register(e,{useFactory:e=>e.resolve(t)})}},registry:rE,isolate:function(){const e=lo.last(tE).createChildContainer();return e.register(QS,{useValue:e}),e},use:function(e,t){try{return tE.push(e),t(lo.last(tE))}finally{tE.pop()}}}),oE=new WeakMap,aE=iE.token();function sE(e,t,n){const r=oE.get(e);r[t]=n,e.replaceReducer(AA(r))}function cE(e,t){const n=oE.get(e);delete n[t],e.replaceReducer(AA(n))}const uE={list:[],info:new WeakMap};function lE(e,t,n){return function(e,t,n){const r=vS({name:t,initialState:n,reducers:{update:(e,t)=>t.payload??null}}),i={store:e,slice:r,state:r.getInitialState(),proxy:null},o=i.proxy=new Proxy({},{get:(e,t)=>i.state?.[t]});return uE.info.set(o,i),sE(e,t,r.reducer),i}(e,t,n).proxy}function fE(e){return pE(e,(({state:e})=>e))}function dE(e,t){return pE(e,(n=>(n.store.dispatch((function(){n.state=j_(n.state,t),n.store.dispatch(n.slice.actions.update(n.state))})),e)))}function pE(e,t){return t(uE.info.get(e))}var hE=Object.freeze({__proto__:null,Store:aE,create:function(){const e=lS({reducer:{dummy:()=>({})}});return oE.set(e,{}),e},down:function(e){pE(e,(({store:t,slice:n})=>{dE(e,(e=>null)),cE(t,n.name)}))},exclude:cE,get:fE,include:sE,meta:function(e){return t=>{Reflect.defineMetadata("xf.redux.slice",e.slice,t),uE.list.push({type:t,slice:e.slice})}},registry:uE,slice:lE,update:dE});let vE=class{constructor(){this.listener=null,this.volume={music:1,effect:1},this.music=[]}setVolume(e,t){this.volume[e]=Iw(lo.clamp(t,0,1),3),"music"===e&&lo.each(this.music,(e=>{e.volume=e.volume}))}revise(e,t){return this.volume[this.getType(e)]*t}traceMusic(e){this.music.push(e)}clearMusic(e){lo.pull(this.music,e)}getHandler(e){return this.listener.handler(e)}play(e){this.listener.play(e)}getType(e){return lo.includes(this.music,e)?"music":"effect"}};vE=AS([iE.meta({scope:"singleton"})],vE);let yE=class{};yE.token=null;const gE={};var mE=e.sys.languageCode,bE=e.native,wE=e.Input,_E=e.EventHandler,xE=e.RigidBody2D,kE=e.ERigidBody2DType,OE=e.Collider2D,jE=e.CircleCollider2D,AE=e.Contact2DType,SE=e.Intersection2D,EE=e.EPhysics2DDrawFlags,TE=e.PhysicsSystem2D,CE=e.ParticleSystem2D,PE=e.UIOpacity,NE=e.UITransform,IE=e.AudioSource,RE=e.EditBox,DE=e.Tween;const ME=lo.assign((t=>{lo.assign(gE,t.env),mE=lo.join(lo.take(lo.split(e.sys.languageCode,"_"),2),"-"),bE=t.native,wE=t.Input,_E=t.EventHandler,xE=t.RigidBody2D,kE=t.ERigidBody2DType,OE=t.Collider2D,jE=t.CircleCollider2D,AE=t.Contact2DType,SE=t.Intersection2D,EE=t.EPhysics2DDrawFlags,TE=t.PhysicsSystem2D,CE=t.ParticleSystem2D,PE=t.UIOpacity,NE=t.UITransform,IE=t.AudioSource,RE=t.EditBox,t.tween,DE=t.Tween,lo.each(ME.ready,(e=>e()))}),{ready:[]});class zE{static apply(){this.patch=this.patch??new this}constructor(){this.patchCore(),this.patchEngine()}get cc(){return global.cc}patchCore(){if("WECHAT_GAME"===this.cc.sys.platform){Ow(iE.reflect.constructor,"check",(function(e,t){let n=!0;return n=n&&e.call(this,t),n=n&&""!==t.prototype.constructor.name,n}))}}patchEngine(){this.patchDirector(e.Director.prototype),this.patchNodeActivator(e.director._nodeActivator),this.patchParser(e.AssetManager.Parser),this.patchAudio(IE.prototype),this.patchButton(e.Button.prototype),this.patchToggle(e.Toggle.prototype)}patchDirector(e){Ow(e,"runSceneImmediate",(function(e,...t){const[n,r,i]=t,o=iE(yE.token);o.detach(),e.call(this,n,(()=>r?.(n)),i),o.attach()}))}patchNodeActivator(e){Ow(e,"destroyComp",(function(e,t){e.call(this,t),t.dispose?.()}))}patchParser(e){const t=e.instance,n=Reflect.get(t,"parseImport"),r=Reflect.get(t,"_parsers"),i=Reflect.get(this.cc,"game"),o=[!0];Ow(t,"parseImport",(function(e,t,...n){const r=i.bridge;let a=!0;a=a&&lo.last(o),a=a&&"cc.Prefab"!==t?.[0]?.__type__,o.push(a),r.component.trace(lo.last(o));const s=e.call(this,t,...n);return o.pop(),r.component.trace(lo.last(o)),s})),lo.each(r,((e,i)=>{e===n&&(r[i]=Reflect.get(t,"parseImport"))}))}patchAudio(e){if(gE.EDITOR)return;const t=Symbol.for("xf.engine.audio.volume"),n=Object.getOwnPropertyDescriptor(e,"volume");Ow(e,"play",(function(e,...t){this.volume=this.volume,e.call(this,...t)})),Ow(e,"playOneShot",(function(e,t){this.volume=this.volume,e.call(this,t)})),Ow(n,"set",(function(e,n){const r=iE(vE);lo.set(this,t,n),e.call(this,r.revise(this,n))})),Ow(n,"get",(function(e){return lo.get(this,t)??e.call(this)})),Object.defineProperty(e,"volume",n)}patchButton(e){gE.EDITOR||(Ow(e,"onEnable",(function(e){e.call(this);const t=iE(vE);this.clickEvents.unshift(t.getHandler("button.click"))})),Ow(e,"onDisable",(function(e){this.clickEvents.shift(),e.call(this)})))}patchToggle(e){gE.EDITOR||(Ow(e,"onEnable",(function(e){e.call(this);const t=iE(vE);this.clickEvents.unshift(t.getHandler("button.click"))})),Ow(e,"onDisable",(function(e){this.clickEvents.shift(),e.call(this)})))}}zE.patch=null;const ZE=Symbol.for("xf:engine:component:view");function VE(e,t){return e[ZE]=t}function FE(e){return e[ZE]}function LE(e,t){for(const n of e.components){const e=n[ZE];if(e instanceof t)return e}return null}function $E(e){return e.core}const UE={update:Symbol.for("xf.view.update")},BE={data:function(e){return lo.assign((()=>!0),{data:e})},redux:lo.assign((function(e,t){const n=$E(e);null==t&&null!==t&&(t=n.redux);const[r,i]=[n.redux,t];r===nx(r,i)&&i===nx(i,r)||(n.redux=tx({},t),n.touch())}),{build:function(e,t){const n=$E(e),r=tx({},t);return n.redux=r,n.touch(),n.redux},get:function(e){return $E(e).redux}}),hook:function e(...t){if("string"==typeof t[0])return(e,n)=>{Reflect.defineMetadata("xf:engine:view:hook",{name:t[0],method:n},e,n)};Reflect.apply(e(t[1]),null,t)},action:function(e,t){Reflect.defineMetadata("xf:engine:view:action",{},e,t)},select:function(e,t){Reflect.defineMetadata("xf:engine:view:select",{},e,t)},update:UE.update};var WE;let KE=WE=class{build(e,t){const n=this.detect(t);if(null==n.type)return async(...e)=>{const t=n.target[BE.update];return await t.call(n.target,...e),null};const r=this[`with${lo.upperFirst(n.type)}`];return async(...e)=>"boolean"==typeof e[0]?(n.node.active=e[0],null):(await r(n.target,...e),null)}withNull(e,t){}withNode(e,t){let n={active:null!=t};if(lo.isPlainObject(t)&&(n=t),null!=n.active&&(e.active=n.active),null!=n.position){const t=e.position.clone();t.x=n.position.x??t.x,t.y=n.position.y??t.y,e.position=t}if(null!=n.size){const t=e.getComponent(NE),r=t.contentSize.clone();r.width=n.size.w??r.width,r.height=n.size.h??r.height,t.contentSize=r}}withLabel(e,t){let n=null;n=n??WE.impl.i18n(e,t),n=n??lo.toString(t??""),e.string=n}withSprite(t,n){let r=t.spriteFrame;if(r=null,null==r){const i=t.node.getChildByName(`@${n}`);r=i?.getComponent(e.Sprite)?.spriteFrame}if(null==r){const n=t.node.getChildByName("@*");r=n?.getComponent(e.Sprite)?.spriteFrame}t.spriteFrame=r}withAudioSource(e,t){let n=e.clip;if(n=null,null==n){const r=e.node.getChildByName(`@${t}`);n=r?.getComponent(IE)?.clip}if(null==n){const t=e.node.getChildByName("@*");n=t?.getComponent(IE)?.clip}e.clip=n,e.play()}withProgressBar(e,t){e.progress=lo.clamp(lo.toNumber(t),0,1)}withSlider(e,t){e.progress=lo.clamp(lo.toNumber(t),0,1)}withToggle(e,t){}withEditBox(e,t){e.string=lo.toString(t)}withRichText(e,t){e.string=lo.toString(t)}async withAnimation(t,n){if(null!=n){let r=lo.toString(n);null==t.getState(r)&&(r="any");let i=Promise.resolve();t.getState(r)&&(i=new Promise((n=>{t.once(e.Animation.EventType.STOP,n)}))),t.play(r),await i}}detect(e){for(const t of e.components){const e=FE(t);if(null!=lo.get(e,BE.update))return{type:null,target:e}}return lo.transform(["Animation","ProgressBar","Toggle","Slider","Label","Sprite","AudioSource","EditBox","RichText"],((t,n)=>{const r=e.getComponent(`cc.${n}`);return null!=r&&(t.type=n,t.target=r),null==r}),{type:"Node",target:e,node:e})}};KE.impl={i18n:(e,t)=>null,multiplex:class{static get(e){const t=LE(e,this);return t?.get()??[{node:e,data:""}]}get(){return[]}}},KE=WE=AS([iE.meta({scope:"singleton"})],KE);let qE=class{show(){}hide(){}retry(e){lo.delay(e,1e3)}},GE=class{constructor(){this.data={running:{count:0},retry:{time:0,list:[]}},this.view=iE(qE)}check(){return this.data.running.count>0}async run(e,t){t=lo.defaults(t??{},{block:!0});const n=async(t=Date.now())=>{try{return await e()}catch(e){if(e instanceof dx)return await this.retry(t,n);throw e}};try{return t.block&&this.show(),await n()}finally{t.block&&this.hide()}}async wrap(e,t){return await this.run(lo.wrap(e,(async e=>{try{return await hx(e)}catch(e){throw new dx(e)}})),t)}delegate(e){this.view=e}show(){0==this.data.running.count++&&this.view.show()}hide(){0==--this.data.running.count&&this.view.hide()}async retry(e,t){return e<this.data.retry.time?t():(0===this.data.retry.list.length&&this.view.retry((()=>{const e=this.data.retry.list;this.data.retry.list=[],this.data.retry.time=Date.now(),lo.each(e,(e=>e()))})),await new Promise(((e,n)=>{this.data.retry.list.push((()=>e(t())))})))}};GE.View=qE,GE=AS([iE.meta({scope:"singleton"})],GE);let YE=class{constructor(){this.data={loading:0},this.system={loading:iE(GE),bundle:iE(aT)}}resolve(e){return e}async import(e,t){await this.system.loading.run((async()=>{await this.system.bundle.import(e)}),t)}async remove(e,t){await this.system.loading.run((async()=>{await this.system.bundle.remove(e)}),t)}find(e){return this.system.bundle.find(e)}async read(e,t){return await this.system.loading.run((async()=>await this.system.bundle.read(e)),t)}async load(e){try{return this.data.loading=this.data.loading+1,await this.system.loading.run((async()=>await this.system.bundle.load(e)),e)}finally{this.data.loading=this.data.loading-1}}async release(e,t){await this.system.loading.run((async()=>{await this.system.bundle.release(e)}),t)}};YE=AS([iE.meta({scope:"singleton"})],YE);class HE{constructor(){this.bridge=iE(uT),this.resource=iE(YE)}async container(){const t=e.view.getVisibleSize(),n=this.bridge.instantiate(HE.container.prefab,[]);return n.node.setPosition(t.width/2,t.height/2),n.node.setParent(HE.container.root.parent),n.node.setSiblingIndex(HE.container.root.getSiblingIndex()),{node:n.node,view:n.view}}async load(t){t.prefab=t.prefab??await this.resource.load({type:e.Prefab,path:rT(t.view)});const n=this.bridge.instantiate(t.prefab,t.args);return{prefab:t.prefab,...n}}async clean(e){this.resource.release(e.prefab)}}var JE;HE.container={prefab:null,view:null,root:null};let XE=JE=class{constructor(){this.list=[],this.factory=iE(HE)}async exec(e,...t){const n=await this.instantiate(e,t),r=await new Promise(((e,t)=>{n.close=e,n.interrupt=t}));return await yx(0),r}open(e,...t){mx((async()=>await this.exec(e,...t)))}close(e,t){const n=Tw(lo.find(this.list,{view:e}));n.container.validate()&&(delete n.interrupt,n.container.destroy(),n.close?.(t))}toast(e){mx((async()=>await this.message(e)))}async message(e){return await this.exec(JE.Message,{type:"message",text:e})}async select(e){return await this.exec(JE.Message,{type:"select",text:e})}async load(e,...t){const n=await this.factory.load({view:e,manager:this,args:t});return{node:n.node,view:n.view}}remove(e){const t=Tw(lo.find(this.list,{container:e}));this.clean(t),t.interrupt?.(new px("window has been destroyed"))}async instantiate(e,t){const n=await this.factory.load({view:e,args:t,manager:this}),r=await this.factory.container();r.view.bind(this,n.node);const i={view:n.view,node:r.node,container:r.view,prefab:n.prefab};return this.list.push(i),this.arrange(),i}clean(e){this.factory.clean(e),lo.remove(this.list,e),this.arrange()}arrange(){lo.reduce(lo.reverse(lo.clone(this.list)),((e,t)=>t.container.arrange(e)),{visible:!0,veil:!1})}};XE.Factory=HE,XE.Message=null,XE=JE=AS([iE.meta({scope:"singleton"})],XE);let QE=class{constructor(){this.loading=iE(GE)}async call(t,n,r){r[1]instanceof RE&&(r=[r[1],r[2]??"",r[0]]);let i=!1;i=i||r[0]instanceof e.Node,i=i||r[0]instanceof e.Component,i=i||r[0]instanceof e.Event,i||(r=[null,...r]),i&&this.loading.check()||(r=lo.reverse(lo.reduce(r,((e,t,n)=>{if(0===n){const{type:n,target:r}=this.detect(t);null!=(t=this[`valueFrom${lo.upperFirst(n)}`](r))&&e.push(t)}if(1===n){const n=t;""!==lo.trim(n)&&e.push(uj(n,cj))}return e}),[])),await mx((async()=>{await(t[n]?.(...r))})))}detect(e){const t={type:"null",target:null};if(null==e)return t;null==e.getComponent&&(e=e.target);return lo.transform(["Toggle","Slider","EditBox"],((t,n)=>{const r=e.getComponent(`cc.${n}Component`);return null!=r&&(t.type=n,t.target=r),null==r}),t)}valueFromNull(e){}valueFromToggle(e){return e.isChecked}valueFromSlider(e){return Math.floor(100*e.progress)}valueFromEditBox(e){return e.string}};QE=AS([iE.meta({scope:"singleton"})],QE);let eT=class{constructor(){this.select=(e,...t)=>{const n=this.view,r=n[K_(e)],i=G_();if(null==i)return r.call(n,...t);let o=this.memoized.selector.get(r);return null==o&&this.memoized.selector.set(r,o=this.memoize(r)),o(H_(i,{args:t}))},this.view=null,this.component=null,this.node=null,this.window=iE(XE),this.memoized=null,this.selector=[],this.redux={},this.defer=[],this.dispose=[],this.action=iE(QE),this.link=iE(KE),this.store=iE(aE)}static get(e){return e?.core}static bind(e,t,n){const r=lo.assign(new this,{view:e,component:t,node:t.node,extra:n.extra});lo.assign(e,{core:r});const i=r;return i.state=ex(n.state??{},(e=>{i.state=e,i.touch()})),r.memoized=this.memoized(e),r}static link(e){const t=e.view,n=e.component,r=iT(kw(t));e.selector=lo.flatten(lo.map(r.select,(r=>{const i=n[r.path];return null==i?[]:lo.map(KE.impl.multiplex.get(i),(n=>{const i=[];""!=lo.trim(n.data)&&i.push(uj(n.data));const o={value:null},a=e.memoize(lo.get(t,r.name)),s=e.link.build(t,n.node),c=Y_((()=>{const e=H_(G_(),{args:i});o.value=s(a(e))}));return async e=>{o.value=null,c(e),await o.value}}))}))),e.finally(e.store.subscribe((()=>e.update())))}static memoized(e){return X_(e,{core:{state:null}})}async use(e){await this.stateAction((()=>{tx(this.state,e)}))}async set(e){await this.stateAction((()=>{!function(e,t){"object"==typeof t?nx(e,t):rx(e,t)}(this.state,e)}))}get(e){let t=e;lo.isPlainObject(e)||(t={path:e,data:null});const n=lo.get(this.state,t.path);return null!=t.data?lo.includes(lo.castArray(t.data),n):n}finally(e){this.dispose.push(e)}valid(){return e.isValid(this.node,!0)}async delay(e,t){if(await yx(e),!this.valid())throw new px;return t}close(e){this.window.close(this.view,e)}destroy(){lo.each(this.dispose,(e=>e()))}async call(e,t){return await this.action.call(this.view,e,t)}touch(){mx((async()=>{const e=this.defer;this.defer=[],await fx(this,e,(async e=>{let t=null;try{if(!this.valid())throw new px;this.view.redux(),await this.update()}catch(e){throw t=e}finally{lo.each(lo.flatten(e),(e=>e(t)))}return[]}),{max:0,min:0})}))}async stateAction(e){await hx((t=>{this.defer.push(t),e(),this.defer.length>0&&(this.defer=[],t())}))}memoize(e){return Y_((t=>{const n=J_(t.view),r=J_(t.args),i=this.memoized.wrap({core:{state:n}});return e.call(i,...r)}))}async update(){if(!this.valid())return;const e={view:this.state,store:this.store.getState(),args:[]};await Promise.all(lo.map(this.selector,(t=>t(e))))}},tT=class{static inject(e,t,n){return eT.bind(e,t,n),BE.redux.build(e,{}),e}initial(){return{}}dispose(){this.core.destroy()}redux(){}};tT.Link=KE,tT.Core=eT;const nT={path:new Map,data:new Map};function rT(e){let t=nT.path.get(e);if(null==t)for(const[n,r]of xw)if(Reflect.get(r,"View")===e){nT.path.set(e,t=n);break}return Tw(t)}function iT(t){if("string"!=typeof t){return iT(rT(t))}const n=Reflect.get(xw.get(t),"View"),r=nT.data.get(n);if(null!=r)return r;const i=n.prototype,o=Reflect.ownKeys(i),a=Reflect.apply(i.initial,{},[]),s=lo.compact(lo.map(o,(e=>Reflect.getMetadata("xf:engine:view:hook",i,e)))),c=lo.compact(lo.map(o,(e=>Reflect.getMetadata("xf:engine:view:action",i,e)?e:null))),u=lo.compact(lo.map(o,(t=>Reflect.getMetadata("xf:engine:view:select",i,t)?{name:t,path:`xf:${t}`,info:{type:e.Node}}:null))),l=lo.compact(lo.map(a.extra??{},((e,t)=>e instanceof Zm?{name:t,path:`xf@${t}`,info:oT(e)}:null))),f={proxy:null,initial:a,hook:s,action:c,select:u,property:l};if(Reflect.getPrototypeOf(n)!==tT){const e=iT(Reflect.getPrototypeOf(n));f.hook=lo.concat(f.hook,e.hook),f.action=lo.concat(f.action,e.action),f.select=lo.concat(f.select,e.select),f.property=lo.concat(f.property,e.property)}return nT.data.set(n,f),f}function oT(t){const n=t._def;if("ZodNumber"===n?.typeName)return{type:"int"===n.checks?.kind?e.CCInteger:e.CCFloat};if("ZodString"===n?.typeName)return{type:e.CCString};if("ZodBoolean"===n?.typeName)return{type:e.CCBoolean};if("ZodArray"===n?.typeName)return{type:[oT(n.type)]};if("ZodObject"===n?.typeName){return{type:lo.fromPairs(lo.map(n.shape(),((e,t)=>[t,oT(e)])))}}return"ZodOptional"===n?.typeName||"ZodNullable"===n?.typeName?oT(n.innerType):"ZodDefault"===n?.typeName?lo.defaults({value:n.defaultValue()},oT(n.innerType)):"ZodEffects"===n?.typeName?lo.defaults(lo.pick(n.effect.refinement,["type","data"]),oT(n.schema)):{type:null}}let aT=class{constructor(){this.bundle=[e.assetManager.main]}async import(t){this.bundle.unshift(await hx((n=>{e.assetManager.loadBundle(t,n)})))}async remove(t){const n=Tw(e.assetManager.getBundle(t));n.releaseAll(),e.assetManager.removeBundle(n),lo.pull(this.bundle,n)}find(t){return null!=this.search(e.Asset,t)}async read(t){const n=await this.load({type:e.Asset,path:t}),r=n._nativeAsset;return await this.release(n),r}async load(t){const n=e=>(t,n)=>{n?.addRef(),e(t,n)},{bundle:r,path:i}=Tw(this.search(t.type,t.path));return t.type===e.SceneAsset?await hx((e=>{r.loadScene(i,null,t.progress,n(e))})):await hx((e=>{r.load(i,t.type,t.progress,n(e))}))}async release(e){e.decRef()}search(t,n){n=lo.reduce([{pattern:"/view/",value:"/prefab/"},{pattern:/\.[^.]+$/,value:""},{pattern:/~\/game\/[^\/]+\//,value:""},{pattern:/~\/app\//,value:""},{pattern:/~\/core\//,value:""}],((e,t)=>lo.replace(e,t.pattern,t.value)),n);const r=lo.find(this.bundle,(r=>t===e.SceneAsset?null!=r.getSceneInfo(n):null!=r.getInfoWithPath(n)));return null==r?null:{bundle:r,path:n}}};aT=AS([iE.meta({scope:"singleton"})],aT);const sT={pipe:function(e,t){let n=null,r=null;lo.each(["START","MOVE","END","CANCEL"],(i=>{const o=wE.EventType[`TOUCH_${i}`];e.on(o,(async e=>{"START"===i&&(r={},n={state:"move"},n.start=new Promise((e=>r.start=e)),n.move=new Promise((e=>r.move=e)),n.final=new Promise((e=>r.final=e)),r.start(e),t(n)),"MOVE"===i&&(r.move(e),n.move=new Promise((e=>r.move=e))),"END"!==i&&"CANCEL"!==i||(n.state="END"===i?"end":"cancel",r.move(e),r.final(e))}))}))},find:function(e,t){const n=t.getLocation();return lo.find(e.children,(e=>{let t=!0;return t=t&&e.active,t=t&&Tw(e.getComponent(NE)).hitTest(n),t}))},drag:async function(e,t){const n=e.getPosition(),r=Tw(e.parent.getComponent(NE)),i=(await t.start).getUILocation(),o={world:e.getPosition(),local:e.getPosition()};for(;"move"===t.state;)(await t.move).getUILocation(i),o.world.x=i.x,o.world.y=i.y,r.convertToNodeSpaceAR(o.world,o.local),e.setPosition(o.local.x,o.local.y);e.setPosition(n)}};let cT=class{constructor(){this.tracing=!1,this.loading=[],this.registry=new WeakMap}trace(e){this.tracing=e}initialize(e,t){if(this.tracing){const n=xw.get(t),r=Reflect.get(n,"View");this.loading.push({proxy:e,type:r})}}dispose(e){this.registry.get(e)?.dispose?.()}onLoad(e){this.registry.get(e)?.load?.()}onEnable(e){this.registry.get(e)?.enable?.()}start(e){this.registry.get(e)?.start?.()}onDisable(e){this.registry.get(e)?.disable?.()}call(e,t,n){tT.Core.get(this.registry.get(e))?.call(t,n)}instantiate(t,n){const r=e.instantiate(t);return{node:r,view:this.link(r,n)}}link(t,n){const r=lo.filter(this.loading,(({proxy:e})=>{for(let n=e.node;null!=n;n=n.parent)if(n===t)return!0;return!1}));return this.loading=[],lo.each(Array.from(this.build(r)),(([t,n])=>{const r=iT(kw(n)),i=lo.fromPairs(lo.map(r.initial.extra??{},((n,i)=>{const o=lo.find(r.property,{name:i});if(null==o)return[i,Nw(n)];let a=t[o.path];return a instanceof e.Component&&(a=FE(a)??a),[i,a]})));tT.inject(n,t,{state:Nw(r.initial.state),extra:i}),lo.each(r.hook,(({name:e,method:r})=>{"update"===e&&(t[e]=n[r].bind(n))}))})),lo.each(r,(({proxy:e})=>{tT.Core.link(tT.Core.get(FE(e)))})),this.redux(r,n[0])}build(e){const t=lo.reduce(e,((e,{type:t})=>{const n=t;return null!=n.core?e=>{iE.use(iE.isolate(),(t=>{n.core(t),e()}))}:e}),(e=>e())),n=new Map;return t((()=>{lo.transform(e,((e,{proxy:t,type:n})=>{const r=VE(t,new n);e.set(t,r),this.registry.set(t,r)}),n)})),n}group(e){const t=new Set(lo.map(e,(e=>e.proxy.node))),n=lo.transform(e,((e,{proxy:n})=>{let r=n.node;for(;r=r.parent,null!=r&&!t.has(r););let i=lo.find(e,{node:r});null==i&&e.push(i={node:r,list:[]}),i.list.push(n)}),[]);return lo.sortBy(n,(e=>null!=e.node))}redux(e,t){const n={list:this.group(e),mark:new Set,root:null},r=(e,n)=>{lo.each(n.list,(i=>{if(e.mark.has(i))return;e.mark.add(i);const o=FE(i),a=[o];null==n.node&&(e.root=o,a[1]=t),BE.redux(...a);const s=lo.find(e.list,{node:i.node});null!=s&&r(e,s)}))};return lo.each(n.list,(e=>r(n,e))),n.root}};cT=AS([iE.meta({scope:"singleton"})],cT);let uT=class t{constructor(n){this.component=iE(cT),this.load=n,iE.container.register(t,{useValue:this}),e.game.bridge=this}async boot(){this.component.trace(!0),await this.load()}metadata(e){return iT(e)}instantiate(e,t){return this.component.instantiate(e,t)}link(e,t){return this.component.link(e,t)}};var lT=Object.freeze({__proto__:null,Animation:e.Animation,AudioClip:e.AudioClip,get AudioSource(){return IE},Bridge:uT,get Bundle(){return aT},Canvas:e.Canvas,get CircleCollider2D(){return jE},get Collider2D(){return OE},Component:e.Component,get Contact2DType(){return AE},get EPhysics2DDrawFlags(){return EE},get ERigidBody2DType(){return kE},get EditBox(){return RE},Event:e.Event,get EventHandler(){return _E},Game:e.Game,get Input(){return wE},get Intersection2D(){return SE},Label:e.Label,LabelOutline:e.LabelOutline,Layout:e.Layout,Node:e.Node,get ParticleSystem2D(){return CE},Patch:zE,get PhysicsSystem2D(){return TE},Prefab:e.Prefab,ProgressBar:e.ProgressBar,RichText:e.RichText,get RigidBody2D(){return xE},Root:yE,Scene:e.Scene,SceneAsset:e.SceneAsset,Size:e.Size,Slider:e.Slider,Sprite:e.Sprite,Toggle:e.Toggle,Touch:e.Touch,get Tween(){return DE},get UIOpacity(){return PE},get UITransform(){return NE},Vec2:e.Vec2,Vec3:e.Vec3,Widget:e.Widget,bind:ME,cast:LE,color:e.color,director:e.director,env:gE,find:function(t,n){return e.find(lo.toString(t),n)},game:e.game,instantiate:e.instantiate,get lang(){return mE},link:VE,metadata:iT,name:function(e){return lo.get(Reflect.getPrototypeOf(e),"__classname__")},get native(){return bE},patch:function(){zE.apply()},resolve:rT,set:function(e,t,n){return e[t]=n,e},size:e.size,sys:e.sys,touch:sT,tween:e.tween,typeinfo:oT,v2:e.v2,v3:e.v3,valid:e.isValid,view:FE,viewport:e.view});var fT,dT={exports:{}};fT=dT,function(e,t){fT.exports?fT.exports=t():e.log=t()}(n,(function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(t,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function s(e,n,r){return function(){typeof console!==t&&(a.call(this,n,r),this[e].apply(this,arguments))}}function c(r,a,c){return function(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?o:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):e)}(r)||s.apply(this,arguments)}function u(e,n,i){var o,s=this;n=null==n?"WARN":n;var u="loglevel";function l(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(u)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}"string"==typeof e?u+=":"+e:"symbol"==typeof e&&(u=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=i||c,s.getLevel=function(){return o},s.setLevel=function(n,i){if("string"==typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==i&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+n+";"}catch(e){}}}(n),a.call(s,n,e),typeof console===t&&n<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){n=e,l()||s.setLevel(e,!1)},s.resetLevel=function(){s.setLevel(n,!1),function(){if(typeof window!==t&&u){try{return void window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var f=l();null==f&&(f=n),s.setLevel(f,!1)}var l=new u,f={};l.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new u(e,l.getLevel(),l.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=d),l},l.getLoggers=function(){return f},l.default=l,l}));var pT=r(dT.exports);const hT=lo.assign(pT,{get:pT.getLogger});var vT;const yT={};let gT=vT=class{static export(e){const t=lo.pick(e,["get"]);return lo.each(t,((n,r)=>{t[r]=t[r]?.bind(e)})),t}constructor(){this.impl={get:e=>null},lo.assign(yT,vT.export(this))}get(e,t){const n=this.impl.get(e);return lo.isPlainObject(t)||lo.isArray(t)?lo.merge(t,n):n??t}};gT=vT=AS([iE.meta({scope:"singleton"})],gT);const mT=lo.assign((function(e,t){return mT.impl(e,t)}),{impl:function(e,t){return e??`{{${t??"?"}}}`}});const bT=function(...e){},wT=lo.assign((function(e){return function(e){}}),{action:function(...e){},event:function(...e){}});class _T{static bind(e,t){new _T(e,t)}static memoized(e){return X_(e,{core:{state:null}})}constructor(e,t){this.select=(e,...t)=>{const n=this.lambda,r=n[K_(e)],i=G_();if(null==i)return r.call(n,...t);let o=this.memoized.selector.get(r);return null==o&&(o=Y_((e=>{const t=J_(e.store),n=J_(e.args),i=t[this.slice],o=this.memoized.wrap({core:{state:i}});return r.call(o,...n)})),this.memoized.selector.set(r,o)),o(H_(i,{args:t}))};const{store:n,slice:r}=e;this.slice=r,this.state=lE(n,r,t.initial()),this.lambda=lo.assign(t,{core:this}),this.memoized=_T.memoized(this.lambda)}set(e){xf.redux.update(this.state,e)}get(e){return e(fE(this.state))}}const xT={select:(e,t,...n)=>e.core.select(t,...n)};class kT{static factory(e){return iE.factory((t=>new this({store:t.resolve(aE),slice:`!${Tw(e??lo.get(this,"redux"))}`})))}constructor(e){_T.bind(e,this)}initial(){return null}}kT.Core=_T;class OT{constructor(e){this.name=null,this.data=null,this.save=lo.debounce(this.save.bind(this),1e3),this.name=e,this.data=this.load()}set(e){return this.save(e),this.data=e}get(){return this.data}save(e){const t=JSON.stringify(e);localStorage.setItem(this.name,t)}load(){const e=lo.trim(localStorage.getItem(this.name));return JSON.parse(""!==e?e:"null",_x)}}let jT=class{constructor(){this.cache={}}set(e,t){return this.with(e,(e=>e.set(t)))}get(e,t){return this.with(e,(e=>lo.merge(t,e.get())))}with(e,t){let n=this.cache[e];return null==n&&(n=this.cache[e]=new OT(e)),t(n)}};jT=AS([iE.meta({scope:"singleton"})],jT);let AT=class{constructor(){this.running={asset:null,view:null,signal:null,done:null},this.bridge=iE(uT),this.loading=iE(GE),this.resource=iE(YE)}async wait(e){this.running.view===e&&await this.running.signal}async run(e){return await this.start(await this.prepare(e))}async load(t,n){return await this.resource.load(lo.assign({type:e.SceneAsset,path:t},n))}async prepare(e){return e.data=e.data??[],e.asset=e.asset??await this.load(e.name,e.option),e}async start(t){const n=this.resource.resolve(t.name),r=(...n)=>{let[r]=n;r instanceof e.SceneAsset&&(r=r.scene),null!=this.running.asset&&this.resource.release(this.running.asset),this.running.done?.(),this.running.asset=t.asset,this.running.view=this.bridge.link(r,[t.data]),this.running.signal=new Promise((e=>this.running.done=e))};return await this.loading.wrap((t=>{e.director.loadScene(n,t,r)}),t.option),this.running.view}};AT=AS([iE.meta({scope:"singleton"})],AT);const ST=global.xf={};lo.assign(ST,{z:Sw,state:ix}),lo.assign(ST,{type:ox,async:wx,runtime:Aw,json:xx,yaml:dj,string:hj,time:ux,util:Dw,redux:hE,engine:lT}),lo.assign(ST,{manifest:{debug:!0,version:{code:"0.0.0",hash:"cdcdcd"}},logger:hT,exist:Tw,maybe:Cw,immutable:Pw,resolve:iE,resolved:async function(e){await e[eE.promise]},config:yT,i18n:mT,route:bT,service:wT,lambda:xT,feature:xT,view:BE}),lo.assign(ST,{Error:class e extends jw{static compatible(e){return is(e,(e=>"number"==typeof e?.code))}static code(e){const t=this;class n extends(this){static check(t){return this.compatible(t)&&(t=t.code),t===e}constructor(r){r=r??lo.findKey(t,(e=>e===n)),"object"==typeof r&&({message:r}=r),super({code:e,message:r})}}return n}static from(e){let t=e;return this.compatible(t)||(t=new this({code:0,message:"unknown",cause:e})),t}static object(e){const t=this.from(e);return{code:t.code,message:t.message,cause:t.data}}constructor(t){super(t.message,t.frame),this.code=t.code,this.cause=t.cause,e.compatible(t.cause)&&(this.data=lo.pick(t.cause,"code","message"))}},Container:QS,Config:gT,Storage:jT,Service:class{constructor(e){}},Lambda:kT,Feature:class e extends kT{static register(t){lo.each(uE.list,(({type:n,slice:r})=>{if(!(n.prototype instanceof e))return;t.register(n,{useFactory:()=>{const e=new n({store:t.resolve(aE),slice:r});return t.register(n,{useValue:e}),e}})}))}},Loading:GE,Resource:YE,Audio:vE,View:tT,Window:XE,Scene:AT});let ET=class{constructor(){this.listener={stat:null}}async args(){return{}}post(e,t){}async use(e,t){}async vibrate(e){}async track(e,t){}async checkAd(e){return!1}async playAd(e){return null}};var TT;ET=AS([xf.resolve.meta({scope:"singleton"})],ET);let CT=TT=class extends ET{constructor(){super(...arguments),this.system={storage:xf.resolve(xf.Storage)}}async args(){const e=lo.trim(location.search,"?"),t=lo.without(lo.split(e,"&"),"");return lo.fromPairs(lo.map(t,(e=>{const t=lo.split(e,"=");return[decodeURIComponent(lo.head(t)),decodeURIComponent(lo.last(t))]})))}post(e,t){globalThis.parent.postMessage({event:e,data:t},"*")}async track(e,t){const n="html5.analytics",r=this.system.storage.get(n,{});r[e]=(r[e]??0)+1,this.system.storage.set(n,r)}async checkAd(e){return"banner"===e||lo.random(!0)<.8}async playAd(e){return"banner"===e?{}:lo.random(!0)<.1?null:"rewarded"===e?lo.random(!0)<.1?{state:"started"}:lo.random(!0)<.2?{state:"completed"}:{state:"rewarded",amount:0,label:""}:{}}};xf.engine.sys.isBrowser&&xf.resolve.container.register(ET,{useToken:TT}),CT=TT=AS([xf.resolve.meta({scope:"singleton"})],CT);let PT=class{constructor(){this.adaptee=xf.resolve((e=>global.wx))}async vibrate(e){const t=e<300?"vibrateShort":"vibrateLong";await this.adaptee[t]({type:"medium"})}};var NT;PT=AS([xf.resolve.meta({scope:"singleton"})],PT);let IT=NT=class{static get Adaptee(){return global.gameanalytics}constructor(){this.adaptee=xf.resolve((e=>NT.Adaptee.GameAnalytics)),NT.Adaptee.utilities.GAUtilities.createGuid=xf.util.uuid,this.adaptee.setEnabledInfoLog(xf.manifest.debug),this.adaptee.configureBuild(xf.manifest.version.code),this.adaptee.initialize("cdcdcdcdcdcdcdcdcdcdcdcdcdcdcdcd","cdcdcdcdcdcdcdcdcdcdcdcdcdcdcdcdcdcdcdcd")}async track(e,t){await this.adaptee.addDesignEvent(e,t??0)}};var RT;IT=NT=AS([xf.resolve.meta({scope:"singleton"})],IT);let DT=RT=class extends ET{constructor(){super(...arguments),this.active={},this.adapter={feedback:xf.resolve(PT),analytics:xf.resolve(IT)}}async use(e,t){this.active[e]=t}async vibrate(e){this.active.vibrate&&await this.adapter.feedback.vibrate(e)}async track(e,t){await this.adapter.analytics.track(e,t)}};"WECHAT_GAME"===xf.engine.sys.platform&&xf.resolve.container.register(ET,{useToken:RT}),DT=RT=AS([xf.resolve.meta({scope:"singleton"})],DT);let MT=class{constructor(){this.waiting={},this.listener={},this.adaptee=xf.engine.native.bridge,this.adaptee.onNative=this.recv.bind(this)}listen(e,t){this.listener[e]=t}async call(e,t={}){if(null!=this.waiting[e])throw new Error(`${e} is already in waiting`);return xf.async.promisify((n=>{this.waiting[e]=async({error:e,data:t})=>{n(e,t)},this.send(e,JSON.stringify(t))}))}send(e,t){xf.logger.debug(`[script.bridge] send: ${lo.join([`type=${e}`,`json=${t}`],", ")}`),this.adaptee.sendToNative(e,t??"{}")}recv(e,t){xf.logger.debug(`[script.bridge] recv: ${lo.join([`type=${e}`,`json=${t}`],", ")}`);const n=lo.assign(JSON.parse(t),{type:e}),r=this.waiting[n.type];if(null!=r)return delete this.waiting[n.type],void r(n);this.listener[n.type]?.(n.data)}};MT=AS([xf.resolve.meta({scope:"singleton"})],MT);let zT=class{constructor(){this.bridge=xf.resolve(MT)}async vibrate(e){await this.bridge.call("Feedback.Vibrate",{duration:e})}};zT=AS([xf.resolve.meta({scope:"singleton"})],zT);let ZT=class{constructor(){this.state={},this.bridge=xf.resolve(MT),this.platform=xf.resolve((async e=>e.resolve(await LT))),this.bridge.listen("Ad.Banner.Displayed",(async e=>{this.platform.listener.stat?.({name:"Ad.Banner.Displayed",data:e})})),this.bridge.listen("Ad.Rewarded.VideoStarted",(async e=>{this.state.rewarded={state:"started"}})),this.bridge.listen("Ad.Rewarded.VideoCompleted",(async e=>{this.state.rewarded={state:"completed"}})),this.bridge.listen("Ad.Rewarded.UserRewarded",(async e=>{this.state.rewarded=lo.assign({state:"rewarded"},e)}))}async check(e){return"banner"===e||await this.bridge.call(this.full(e,"ready"))}async play(e){return await this.check(e)?"banner"===e?{}:(this.state[e]=null,await this.bridge.call(this.full(e,"play"))?this.state[e]??{}:null):null}full(e,t){return`Ad.${lo.capitalize(e)}.${lo.capitalize(t)}`}};ZT=AS([xf.resolve.meta({scope:"singleton"})],ZT);let VT=class{constructor(){this.bridge=xf.resolve(MT)}async track(e,t){await this.bridge.call("Analytics.Event",{event:e,value:t??0})}};var FT;VT=AS([xf.resolve.meta({scope:"singleton"})],VT);let LT=FT=class extends ET{constructor(){super(...arguments),this.active={},this.adapter={feedback:xf.resolve(zT),ad:xf.resolve(ZT),analytics:xf.resolve(VT)}}async use(e,t){this.active[e]=t}async vibrate(e){this.active.vibrate&&await this.adapter.feedback.vibrate(e)}async track(e,t){await this.adapter.analytics.track(e,t)}async checkAd(e){return await this.adapter.ad.check(e)}async playAd(e){return await this.adapter.ad.play(e)}};var $T;xf.engine.sys.isNative&&xf.resolve.container.register(ET,{useToken:FT}),LT=FT=AS([xf.resolve.meta({scope:"singleton"})],LT);const UT=lo.assign((function(e){return function(t){BT.registry.set(t,e)}}),{});let BT=$T=class{constructor(){this.map=new Map,this.raw=new Map,this.system={resource:xf.resolve(xf.Resource)}}static async load(){const e=xf.resolve($T);await e.load(),lo.assign(UT,e.directive())}async load(){this.map=new Map,this.raw=new Map,await Promise.all(lo.map(Array.from($T.registry),(async([e,t])=>{const n=`data/${t}.yaml`;if(!this.system.resource.find(n))return this.raw.set(e,[]);const r=await this.system.resource.read(n),i=xf.yaml.parse(r.toString(),xf.yaml.DateReviver);return this.raw.set(e,i)})))}all(e){return this.data(e).all}get(e,t,n){const r=this.data(e);let i=r.idx[t];return null==i&&(i=r.idx[t]=lo.keyBy(r.all,t)),i[n]}directive(){const e=lo.pick(this,["all","get"]);return lo.each(e,((t,n)=>{e[n]=e[n]?.bind(this)})),e}data(e){let t=this.map.get(e);if(null==t){let n=Reflect.get(e,"load");n=n??lo.assign,n=xf.util.bind(n,e);const r=lo.map(this.raw.get(e),(t=>n(new e,t)));t={idx:{},all:r},this.map.set(e,t),this.raw.delete(e)}return t}};var WT;BT.registry=new Map,BT=$T=AS([xf.resolve.meta({scope:"singleton"})],BT);const KT={};let qT=WT=class{static load(e){const t=xf.resolve(WT);t.load(e),t.use(xf.engine.lang),lo.assign(KT,t.directive())}constructor(){this.lang={native:"en",active:"en"},this.dict=null,xf.i18n.impl=this.get.bind(this)}load(e){({lang:this.lang,dict:this.dict}=this.build(e))}use(e){let t=xf.exist(lo.first(lo.split(e,"-"))),n=this.dict.key["i18n.lang.name"]??{},r=this.lang.active;r=null!=n[t]?t:r,r=null!=n[e]?e:r,this.lang.active=r}get(e,t){e=""!==e?e:null,t=""!==t?t:null;let n=this.dict.txt[e??""];return null!=t&&(n=this.dict.key[t]),null==n&&xf.manifest.debug?this.lang.active!==this.lang.native?`{{${e??t??"?"}}}`:e??`{{${t??"?"}}}`:n?.[this.lang.active]??e??""}directive(){const e=lo.pick(this,["use","get"]);return lo.each(e,((t,n)=>{e[n]=e[n]?.bind(KT)})),e}build(e){const t=xf.config.get("vendor.i18n",this.lang),n=e;return{lang:t,dict:{key:lo.keyBy(n,"key"),txt:lo.keyBy(n,t.native)}}}};qT=WT=AS([xf.resolve.meta({scope:"singleton"})],qT);class GT extends xf.Service{}const YT=lo.assign((async function(){await BT.load(),await YT.boot()}),{boot:async()=>{}});var HT=Object.freeze({__proto__:null,AdType:["banner","rewarded","interstitial"],get Data(){return BT},get Internationalization(){return qT},get Platform(){return ET},Service:GT,bootstrap:YT,data:UT,i18n:KT});lo.assign(xf,{vendor:HT});let JT=class{};JT=AS([xf.vendor.data("i18n")],JT);let XT=class{};XT=AS([xf.vendor.data("config")],XT),xf.vendor.bootstrap.boot=async()=>{xf.resolve(xf.Config).impl.get=e=>xf.vendor.data.get(XT,"name",e)?.data,xf.vendor.Internationalization.load(xf.vendor.data.all(JT))};let QT=class extends xf.View{constructor(){super(...arguments),this.system={bridge:xf.resolve(xf.engine.Bridge),loading:xf.resolve(xf.Loading)}}initial(){return{extra:{content:xf.z.instanceof(xf.engine.Node),audio:xf.z.instanceof(xf.engine.Prefab),loading:xf.z.instanceof(xf.engine.Prefab)}}}load(){xf.Window.Factory.container.root=this.core.node,this.setupAudio(),this.setupLoading()}attach(){this.core.node.parent=xf.engine.find("Canvas")}detach(){this.core.node.parent=null}instantiate(e){const t=this.system.bridge.instantiate(e,[]);return t.node.parent=this.core.extra.content,t.view}setupAudio(){this.instantiate(this.core.extra.audio)}setupLoading(){const e=this.instantiate(this.core.extra.loading);this.system.loading.delegate(e)}};AS([xf.view.hook],QT.prototype,"load",null);var eC=Object.freeze({__proto__:null,View:QT});let tC=class e extends xf.View{constructor(){super(...arguments),this.system={audio:xf.resolve(xf.Audio)}}initial(){return{extra:{content:xf.z.instanceof(xf.engine.Node)}}}load(){this.system.audio.listener={handler:this.handler.bind(this),play:this.play.bind(this)}}async buttonClicked(){this.play("button.click")}handler(t){const n=new xf.engine.Component.EventHandler;return n.target=this.core.node,n.component=xf.engine.name(this.core.component),n.handler=xf.exist(e.handler[t]),n}play(e){const t=this.core.extra.content.getChildByName(e),n=t?.getComponent(xf.engine.AudioSource);n?.playOneShot(n.clip,n.volume)}};tC.handler={"button.click":"buttonClicked"},AS([xf.view.hook],tC.prototype,"load",null),AS([xf.view.action],tC.prototype,"buttonClicked",null);var nC=Object.freeze({__proto__:null,View:tC});let rC=class e extends xf.View{static get initial(){return{running:!1,recovery:!1}}initial(){return{state:e.initial}}show(){this.core.set({running:!0})}hide(){this.core.set(e.initial)}retry(e){this.core.set({recovery:!0}),lo.delay(e,3e3)}selectRunning(){return this.core.state.running}selectRecovery(){return this.core.state.recovery}};AS([xf.view.select],rC.prototype,"selectRunning",null),AS([xf.view.select],rC.prototype,"selectRecovery",null);var iC=Object.freeze({__proto__:null,View:rC});const oC=xf.View.Link.impl.multiplex;let aC=class extends xf.View{initial(){return{extra:{list:xf.z.array(xf.z.object({node:xf.z.instanceof(xf.engine.Node),data:xf.z.string().default("")}).refine(xf.view.data({class:"ea22cd4c"}))),more:xf.z.string().refine(xf.view.data({multiline:!0})).default("")}}}get(){lo.remove(this.core.extra.list,(({node:e})=>null==e||""===e.uuid));const e=xf.util.replace(lo.trim(this.core.extra.more),"","[]"),t=lo.transform(xf.yaml.parse(e),((e,t)=>{const n=t;lo.isString(n.data)||(n.data=xf.yaml.stringify(n.data));const r=lo.transform(lo.split(n.node,"/"),((e,t)=>{let n={path:t,some:t};if("*"===t){const t=this.find(e.some);n={path:"{}",some:t.children[0].name},e.name.push(lo.map(t.children,"name"))}e.path=`${e.path}/${n.path}`,e.some=`${e.some}/${n.some}`}),{name:[],path:".",some:"."}),i=lo.reduce(lo.reverse(r.name),((e,t)=>lo.flatten(lo.map(t,(t=>lo.map(e,(e=>[t,...e])))))),[[]]);lo.each(i,(t=>{const i=xf.string.format(r.path,...t),o=xf.string.format(n.data,...t);e.push({node:this.find(i),data:o})}))}),[]);return lo.concat(this.core.extra.list,t)}find(e){return xf.exist(lo.reduce(lo.split(e,"/"),((e,t)=>"."===t?e:".."===t?e.parent:xf.engine.find(t,e)),this.core.node))}};xf.View.Link.impl.multiplex=aC,aC.get=oC.get;var sC=Object.freeze({__proto__:null,View:aC});let cC=class extends xf.View{initial(){return{extra:{asset:null,prefab:xf.z.instanceof(xf.engine.Prefab)}}}load(){this.core.extra.asset=xf.engine.instantiate(this.core.extra.prefab),this.core.extra.asset.active=!1,this.core.extra.asset.parent=this.core.node}get(e){const t=this.core.extra.asset.getChildByName(`@${e}`);return t?.getComponent(xf.engine.Sprite)}};AS([xf.view.hook],cC.prototype,"load",null);var uC=Object.freeze({__proto__:null,View:cC});const lC=Symbol.for("xf.view.i18n");let fC=class e extends xf.View{static get(t,n){const r=e.i18n(t);return null==r.view?null:r.view.get(n)}initial(){return{extra:{auto:xf.z.boolean().default(!0),key:xf.z.string().default(""),preview:xf.z.string().refine(xf.view.data({multiline:!0})).default("")}}}load(){const t=this.core.node.getComponent(xf.engine.Label);if(null==t)return;const n=e.i18n(t);if(t.string===n.text){const r=xf.i18n(n.text,this.core.extra.key);t.string=e.preview(r,this.core.extra.preview)}}get(e){const t=xf.i18n(this.info.text,this.core.extra.key),n=lo.castArray(e??{});return xf.string.format(t,...n)}static patch(){}static i18n(t){const n=t;let r=n[lC];return null==r&&(r=n[lC]={view:xf.engine.cast(n.node,e)},null!=r.view&&(r.view.info=r,r.text=n.string)),r}static preview(e,t){const n=xf.string.normalize(e);return""===lo.trim(t)?n:xf.util.trap((()=>{const n=xf.yaml.parse(t,xf.yaml.DateReviver),r=lo.castArray(n);return xf.string.format(e,...r)}))??n}};xf.engine.bind.ready.push(fC.patch.bind(fC)),xf.View.Link.impl.i18n=fC.get.bind(fC),AS([xf.view.hook],fC.prototype,"load",null);var dC=Object.freeze({__proto__:null,View:fC});let pC=class extends xf.View{initial(){return{extra:{cover:xf.z.instanceof(xf.engine.Prefab).nullish()}}}load(){if(null!=this.core.extra.cover){const e=xf.engine.instantiate(this.core.extra.cover);e.position=xf.engine.set(e.position.clone(),"z",65535),e.parent=this.core.node.parent}const e=this.core.node.getComponent(xf.engine.Widget),t=xf.engine.viewport.getVisibleSize(),n=t.width/t.height;n>2&&(e.left=e.right=.04),n<.5&&(e.top=.04);const r=xf.config.get("core.viewport.margin",{t:0,b:0,l:0,r:0});lo.each([["t","top"],["b","bottom"],["l","left"],["r","right"]],(([t,n])=>e[n]+=r[t]));this.core.node.getComponent(xf.engine.UITransform).setAnchorPoint(.5/(e.left-e.right+1),.5/(e.bottom-e.top+1))}};AS([xf.view.hook],pC.prototype,"load",null);var hC=Object.freeze({__proto__:null,View:pC});let vC=class extends xf.View{constructor(){super(...arguments),this.system={audio:xf.resolve(xf.Audio)}}enable(){const e=this.core.node.getComponent(xf.engine.AudioSource);this.system.audio.traceMusic(e),e.volume=e.volume}disable(){const e=this.core.node.getComponent(xf.engine.AudioSource);this.system.audio.clearMusic(e)}};AS([xf.view.hook],vC.prototype,"enable",null),AS([xf.view.hook],vC.prototype,"disable",null);var yC=Object.freeze({__proto__:null,View:vC});let gC=class extends xf.View{enable(){this.core.node.getComponent(xf.engine.Animation)?.stop(),this.core.node.getComponent(xf.engine.Animation)?.play()}};AS([xf.view.hook],gC.prototype,"enable",null);var mC=Object.freeze({__proto__:null,View:gC});let bC=class extends xf.View{constructor(){super(...arguments),this.data={anim:{src:{x:0,y:0},dst:{x:1,y:1}},real:{src:{x:0,y:0},dst:{x:1,y:1}}}}[xf.view.update](e){this.data.real={src:e.src??e.dst,dst:e.dst}}initial(){return{extra:{node:xf.z.instanceof(xf.engine.Node),data:xf.z.string().refine(xf.view.data({multiline:!0})).default("")}}}redux(){this.data.anim=lo.merge({src:{x:0,y:0},dst:{x:100,y:100}},xf.yaml.parse(this.core.extra.data))}load(){xf.runtime.patch(this.target,"setPosition",((e,t)=>{const n=this.revise(t.x,"x"),r=this.revise(t.y,"y");return e.call(this.target,n,r,t.z)}))}get target(){return xf.exist(this.core.extra.node??this.core.node.parent)}revise(e,t){const{anim:n,real:r}=this.data,i=n.dst[t]-n.src[t],o=r.dst[t]-r.src[t];return r.src[t]+o*(e-n.src[t])/i}};AS([xf.view.hook],bC.prototype,"load",null);var wC=Object.freeze({__proto__:null,View:bC});let _C=class extends xf.View{constructor(){super(...arguments),this.dict={}}initial(){return{extra:{list:xf.z.array(xf.z.instanceof(xf.engine.EventHandler))}}}load(){this.dict=lo.fromPairs(lo.map(this.core.extra.list,(e=>{""===e.customEventData&&(e.customEventData="{}");const t=xf.yaml.parse(e.customEventData);return[lo.get(t,"name")??e.handler,e]})))}animationEvent(e){this.dict[e]?.emit([])}};AS([xf.view.hook],_C.prototype,"load",null),AS([xf.view.action],_C.prototype,"animationEvent",null);var xC=Object.freeze({__proto__:null,View:_C});let kC=class extends xf.View{enable(){this.core.node.getComponent(xf.engine.AudioSource)?.stop(),this.core.node.getComponent(xf.engine.AudioSource)?.play()}};AS([xf.view.hook],kC.prototype,"enable",null);var OC=Object.freeze({__proto__:null,View:kC});let jC=class extends xf.View{initial(){return{extra:{node:xf.z.instanceof(xf.engine.Node)}}}enable(){const e=this.core.extra.node??this.core.node;e.getComponent(xf.engine.ParticleSystem2D)?.resetSystem()}};AS([xf.view.hook],jC.prototype,"enable",null);var AC=Object.freeze({__proto__:null,View:jC});let SC=class extends xf.View{initial(){return{extra:{animation:xf.z.boolean().default(!0)}}}bind(e){this.core.extra.animation&&e.play("open")}info(){return{opaque:!1}}};var EC=Object.freeze({__proto__:null,View:SC});let TC=class extends xf.View{bind(e){}info(){return{opaque:!0}}};var CC,PC=Object.freeze({__proto__:null,View:TC});let NC=class extends xf.View{initial(){return{extra:{root:xf.z.instanceof(xf.engine.Node),veil:xf.z.instanceof(xf.engine.Node)}}}dispose(){this.manager.remove(this)}destroy(){this.core.node.destroy()}validate(){return xf.engine.valid(this.core.node,!0)}bind(e,t){this.manager=e,this.trait=this.find(t),this.trait.bind(this),t.parent=this.core.extra.root}arrange(e){this.core.node.active=e.visible;const t=this.trait.info();return this.core.extra.veil.active=!t.opaque&&!e.veil,{visible:!t.opaque&&e.visible,veil:!t.opaque||e.veil}}play(e){const t=this.core.extra.root.parent;t.getComponent(xf.engine.Animation)?.play(e)}find(e){const t=[SC,TC];return xf.exist(lo.first(lo.transform(t,((t,n)=>{const r=xf.engine.cast(e,n);return null!=r&&t.push(r),0===t.length}),[])))}};CC=NC,HE.container.view=CC,AS([xf.view.hook],NC.prototype,"dispose",null);var IC,RC=Object.freeze({__proto__:null,View:NC});let DC=class extends xf.View{initial(){const e={type:"message",text:"..."};return{redux:e,yield:!1,state:e}}redux(){this.core.set(xf.view.redux.get(this))}async okay(){this.core.close(!0)}async cancel(){this.core.close(!1)}async close(){this.selectType("message")?await this.okay():await this.cancel()}selectType(e){return this.core.state.type===e}selectText(){return this.core.state.text}};IC=DC,xf.Window.Message=IC,AS([xf.view.action],DC.prototype,"okay",null),AS([xf.view.action],DC.prototype,"cancel",null),AS([xf.view.action],DC.prototype,"close",null),AS([xf.view.select],DC.prototype,"selectType",null),AS([xf.view.select],DC.prototype,"selectText",null);var MC=Object.freeze({__proto__:null,View:DC});let zC=class extends xf.Feature{constructor(e){super(e),this.system={audio:xf.resolve(xf.Audio),storage:xf.resolve(xf.Storage),platform:xf.resolve(xf.vendor.Platform)},this.core.set=lo.wrap(this.core.set,((e,t)=>{e.call(this.core,t),this.save(this.core.get((e=>e)))})),this.core.set((e=>this.load(e))),this.updateVolume("music",this.core.state.audio.music),this.updateVolume("effect",this.core.state.audio.effect),this.updateVibration(this.core.state.vibration)}initial(){return{audio:{music:100,effect:100},vibration:!0}}updateVolume(e,t){t=lo.clamp(t,0,100),this.system.audio.setVolume(e,t/100),this.core.set((n=>{n.audio[e]=t}))}selectVolume(e){return this.core.state.audio[e]}updateVibration(e){this.system.platform.use("vibrate",e),this.core.set((t=>{t.vibration=e}))}selectVibration(){return this.core.state.vibration}load(e){return this.system.storage.get("setting",e)}save(e){return this.system.storage.set("setting",e)}};zC=AS([xf.redux.meta({slice:"setting"})],zC);let ZC=class extends xf.Feature{constructor(){super(...arguments),this.system={storage:xf.resolve(xf.Storage)}}initial(){return{time:{signUp:null}}}async active(){const e=this.system.storage.get("user",{time:{signUp:xf.time.unix()}});this.system.storage.set("user",e),this.core.set((t=>{lo.merge(t,e)}))}newbie(){const e=xf.time.unix();return(this.core.state.time.signUp??e)+86400>e}};ZC=AS([xf.redux.meta({slice:"user"})],ZC);let VC=class extends xf.Feature{constructor(){super(...arguments),this.system={data:xf.resolve(xf.vendor.Data),scene:xf.resolve(xf.Scene),resource:xf.resolve(xf.Resource)}}initial(){return{name:null,load:0}}async load(e){const[t,n]=[this.core.state.name,e];n!==t&&(null!=t&&(this.core.set((e=>{e.name=null})),await this.system.resource.remove(`game-${t}`)),null!=n&&(await this.system.resource.import(`game-${n}`),this.core.set((e=>{e.name=n})))),this.core.set((e=>{e.load=xf.time.unix()})),await this.system.data.load(),null!=this.core.state.name&&await this.system.scene.run({name:"main",data:{}})}async down(){await this.system.scene.run({name:"load",data:{}})}selectActive(){return null==this.core.state.name?null:{name:this.core.state.name,load:this.core.state.load}}selectName(){return this.core.state.name}};VC=AS([xf.redux.meta({slice:"game"})],VC);let FC=class extends xf.Feature{constructor(e){super(e),this.data={"stat.once":[],"stat.unix":0,"stat.time.new":0,"stat.time.dau":0,"game.time.new":{},"game.time.dau":{},"game.load.new":{},"game.load.dau":{}},this.feature={user:xf.resolve((async e=>e.resolve(await ZC))),game:xf.resolve((async e=>e.resolve(await VC)))},this.system={platform:xf.resolve(xf.vendor.Platform),storage:xf.resolve(xf.Storage)},this.data=this.load(),this.system.platform.listener.stat=async({name:e})=>{"Ad.Banner.Displayed"===e&&await this.playAd("banner","show")}}initial(){return{active:!1}}async active(e=!0){await xf.async.sleep(0),this.core.state.active||(xf.async.exec((async()=>{const e=1e4,t=6e4;for(;;)await xf.async.delay(e),await this.active(!1),await xf.async.delay(t-e)})),this.core.set((e=>{e.active=!0})));const t=xf.time.unix();xf.time.date(xf.time.from(t))!==xf.time.date(xf.time.from(this.data["stat.unix"]))&&(this.data["stat.unix"]=t,this.data["stat.time.dau"]=0,this.data["game.time.dau"]={},this.data["game.load.dau"]={}),e&&await this.group((async e=>{1==++this.data[`stat.time.${e}`]&&await this.track({path:["1-app","user",e]}),await this.track({path:["1-app","load",e]})}));const n=this.feature.game.selectActive();null==n||e||await this.group((async e=>{const t={time:this.data[`game.time.${e}`],load:this.data[`game.load.${e}`]},r=t.time[n.name]??0;1===(t.time[n.name]=r+1)&&await this.track({path:["3-game","user",e,n.name]});const i=t.load[n.name]??0;(t.load[n.name]=n.load)!==i&&await this.track({path:["3-game","load",e,n.name]})})),this.save()}async playAd(e,t,n){n=n??"unknown",await this.group((async r=>{"show"===t&&await this.track({path:["1-app",`ad-${e}`,r]});const i=this.feature.game.selectName();null!=i&&("show"===t&&await this.track({path:["3-game",`ad-${e}`,r,i]}),await this.track({path:[`5-${i}`,`ad-${e}-${t}`,r,n]}))}))}async gamePlay(e,t){const n=xf.util.exist(this.feature.game.selectName());await this.group((async r=>{await this.track({path:[`7-${n}`,`level-global-${r}`,t,e],once:!1}),await this.track({path:[`7-${n}`,`level-record-${r}`,t,e],once:!0})}))}load(){return this.system.storage.get("stat",this.data)}save(){return this.system.storage.set("stat",this.data)}async group(e){for(const t of["new","dau"])("new"!==t||this.feature.user.newbie())&&await e(t)}async track(e){if(e.path.length>5)throw new RangeError;const t=lo.join(e.path,":");if(e.once){const e=this.data["stat.once"];if(lo.includes(e,t))return;e.push(t),this.save()}await this.system.platform.track(t,e.value)}};FC=AS([xf.redux.meta({slice:"stat"})],FC);let LC=class extends xf.View{constructor(){super(...arguments),this.feature={user:xf.resolve(ZC),game:xf.resolve(VC),stat:xf.resolve(FC),setting:xf.resolve(zC)},this.system={platform:xf.resolve(ET)}}async start(){await this.feature.user.active(),await this.feature.stat.active();const{game:e}=await this.system.platform.args();await this.feature.game.load(e??"piano")}};AS([xf.view.hook],LC.prototype,"start",null);var $C=Object.freeze({__proto__:null,View:LC});class UC extends xf.View{constructor(){super(...arguments),this.trait={graph:{cache:1500,speed:350,space:3}}}initial(){return{extra:{style:xf.z.string().refine(xf.view.data({multiline:!0})).default("{}"),board:xf.z.array(xf.z.instanceof(xf.engine.Node)),graph:xf.z.array(xf.z.instanceof(xf.engine.Node))}}}async load(){lo.assign(global,{playPiano:e=>{this.play(e)},pausePiano:e=>{this.play(!e)},resetPiano:()=>{this.play([])}}),this.layout=this.prepare()}play(e){return!0===e?this.tween():!1===e?this.pause():(null!=this.data&&this.clear(),this.data=this.setup(e),void this.tween())}prepare(){const e=this.core.extra,t=lo.compact(lo.flatten(lo.map(e.board,((e,t)=>lo.map(e.children,(e=>e.active?{index:lo.toNumber(e.name),layer:t,sprite:e.getComponent(xf.engine.Sprite),offset:e.position.x}:null)))))),n=xf.yaml.parse(e.style);return{style:lo.fromPairs(lo.map(n,((e,t)=>[t,xf.engine.find(e,this.core.node).getComponent(xf.engine.Sprite).spriteFrame]))),board:lo.keyBy(t,"index"),graph:lo.map(e.graph,(e=>[...e.children]))}}queue(e){const t={};return lo.sortBy(lo.flatten(lo.map(e,(e=>{const n=e,r={epoch:n[0]+this.trait.graph.cache,state:"up",style:"o",index:n[2]-1,range:null};lo.startsWith(n[1],"on")&&(r.state="down"),lo.endsWith(n[1],"prompt")&&(r.style="i"),lo.endsWith(n[1],"chord")&&(r.style="x");const i=[r];return"down"===i[0].state&&(i.unshift({epoch:i[0].epoch-this.trait.graph.cache,state:"load",style:i[0].style,index:i[0].index,range:{begin:i[0].epoch,end:i[0].epoch}}),t[i[0].index]=i[0]),"up"===i[0].state&&(t[i[0].index].range.end=i[0].epoch),i}))),"epoch")}setup(e){const t=this.offset(this.trait.graph.cache);this.core.extra.graph[0].parent.setPosition(0,-t);return{queue:this.queue(e),track:lo.map(this.layout.board,(e=>[])),tween:null}}clear(){this.pause(),lo.each(this.layout.board,((e,t)=>{this.setBoard(lo.toNumber(t),"up")})),lo.each(this.data.track,((e,t)=>{lo.each(e,(e=>{this.freeGraph(t,e)}))}))}tween(){const e=this.offset(9999e3),t=this.core.extra.graph[0].parent;this.data.tween=xf.engine.tween(t).by(9999,{position:new xf.engine.Vec3(0,-e)},{onUpdate:()=>{this.step(this.time(-t.position.y))}}).start()}pause(){this.data.tween.stop()}step(e){const t=this.trait.graph.space;for(;;){const n=this.data.queue[0];if(null==n||n.epoch>e)break;this.data.queue.shift();const{index:r,state:i,style:o,range:a}=n;if("load"!==i&&this.setBoard(r,i),"load"===i){const e=this.offset(a.begin),n=this.offset(a.end-a.begin)-t,i=this.lockGraph(r,o,e,n);this.data.track[r].push(i)}"up"===i&&this.freeGraph(r,this.data.track[r].shift())}}time(e){return e/this.trait.graph.speed*1e3}offset(e){return e/1e3*this.trait.graph.speed}setBoard(e,t){const{sprite:n,layer:r}=this.layout.board[e];n.spriteFrame=this.layout.style[`board:${r}:${t}`]}lockGraph(e,t,n,r){const{layer:i,offset:o}=this.layout.board[e],a=this.layout.graph[i].pop();a.active=!0;a.getComponent(xf.engine.Sprite).spriteFrame=this.layout.style[`graph:${t}`];const s=a.getComponent(xf.engine.UITransform);return s.setContentSize(new xf.engine.Size(s.width,r)),a.setPosition(o,n),a}freeGraph(e,t){const{layer:n}=this.layout.board[e];this.layout.graph[n].push(t),t.active=!1}}AS([xf.view.hook],UC.prototype,"load",null);var BC=Object.freeze({__proto__:null,View:UC});xf.runtime.register("~/core/view/root",eC),xf.runtime.register("~/core/view/root/audio",nC),xf.runtime.register("~/core/view/root/loading",iC),xf.runtime.register("~/core/view/multiplex",sC),xf.runtime.register("~/core/view/atlas",uC),xf.runtime.register("~/core/view/i18n",dC),xf.runtime.register("~/core/view/viewport",hC),xf.runtime.register("~/core/view/music",yC),xf.runtime.register("~/core/view/anim/rewind",mC),xf.runtime.register("~/core/view/anim/beacon",wC),xf.runtime.register("~/core/view/anim/event",xC),xf.runtime.register("~/core/view/audio/rewind",OC),xf.runtime.register("~/core/view/particle/reset",AC),xf.runtime.register("~/core/view/window/container",RC),xf.runtime.register("~/core/view/window/screen",PC),xf.runtime.register("~/core/view/window/dialog",EC),xf.runtime.register("~/core/view/window/message",MC),xf.runtime.register("~/app/view/load",$C),xf.runtime.register("~/game/piano/view/main",BC);let WC=class{constructor(){this.root=qC.create(this)}get manifest(){return Reflect.getPrototypeOf(this).constructor.manifest}async boot(){return lo.merge(xf.manifest,this.manifest),xf.logger.setDefaultLevel(this.manifest.logging),await xf.vendor.bootstrap(),await this.start(),this.manifest.start}async start(){}};var KC;WC.manifest={debug:!1,logging:"warn",version:{code:"0.0.0",hash:"cdcdcd"},start:null};class qC{static create(e){const t=new this(e);return xf.resolve.container.register(KC,{useValue:t}),t}constructor(e){new xf.engine.Bridge((async()=>await this.start(e)))}attach(){this.view.attach()}detach(){this.view.detach()}async start(e){xf.state.autoFreeze(!1),xf.engine.patch(),await xf.runtime.load();const t=xf.resolve(xf.Scene),n=xf.resolve(xf.Window),r=xf.resolve(xf.Resource);xf.resolve.container.register(xf.redux.Store,{useValue:xf.redux.create()}),xf.Feature.register(xf.resolve.container),await r.import("core"),await r.import("app");const i=xf.exist(await e.boot());xf.Window.Factory.container.prefab=await r.load({type:xf.engine.Prefab,path:"~/core/prefab/window/container"}),this.view=xf.util.get(await n.load(QT),"view"),this.view.attach(),await t.run({name:i,data:{}})}}KC=qC,xf.engine.Root.token=KC;class GC extends WC{async start(){xf.engine.game.frameRate=60}}new GC,GC.manifest={debug:!1,logging:"info",version:{code:"0.0.0",hash:"cdcdcd"},start:"load"}}(cc);
